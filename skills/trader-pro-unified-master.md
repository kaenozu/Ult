# Trader Pro Unified Master Skill

## 1. 論理の一貫性 (Logical Synchronization)
- **絶対ルール**: AIのシグナルタイプ(BUY/SELL/HOLD)と、画面上の予報線（雲）の向き、およびターゲット価格の上下関係は**100%一致**していなければならない。
- **自動ガード**: `predictedChange` がプラスなら `BUY`、マイナスなら `SELL`、0なら `HOLD` を強制し、ターゲット価格を現在値から正しい方向にオフセットする。

## 2. 視覚の黄金比 (Visual Precision)
- **需給の壁**: チャートを邪魔しない右端15%のグラデーションヒストグラムを維持。計算は直近250日（1年）に最適化する。
- **予測の雲**: ATR（ボラティリティ）と自信度に基づき、不確実性を「扇状の広がり」として描画する。

## 3. 市場のネイティブ処理 (Market Native Awareness)
- **シンボル変換**: 日本株(4桁)への `.T` 付与と、インデックス(`^`)への例外処理を自動適用する。
- **データ永続化**: IndexedDBを活用し、5年分のデータを差分取得(Delta Fetch)で管理。空データの保存を禁止する。

## 4. プロセス防護 (Process Armor)
- **生存優先**: `node.exe` の一括キルを禁止。必ずポート(3000/3001)を特定し、自身を除外して狙い撃つ。
- **クリーン再起動**: キャッシュ `.next` の完全削除と `Start-Process` による外部起動をセットで行う。

## 5. 自動化プロトコル (Automation)
- **自己検閲**: ファイル変更後、シグナルの不整合や描画の崩れ、シンボル処理のデグレード（退行）がないか自律的にスキャンする。
