# REFACTOR-001: 定数・設定の一元管理

**Issue**: kaenozu/Ult#522  
**Phase**: 1 (基盤構築)  
**優先度**: High  
**複雑さ**: Medium  
**推定工数**: 4-6時間

---

## 概要

現在のコードベースには魔法の数値（マジックナンバー）が多数散在しており、保守性と可読性を低下させています。このIssueでは、全ての定数と設定を一元管理する仕組みを構築します。

## 問題点

### 現状の問題

```typescript
// 各所に散在する定数
if (confidence >= 80) { ... }  // 80とは？
if (data.length < 60) { ... }   // 60とは？
const step = 3;                 // 3とは？
```

**問題**:
- 同じ定数が複数箇所で再定義
- 定数の意味が不明確
- 変更時に全箇所を探す必要

### 影響範囲

- チャート設定（期間、色、サイズ等）
- テクニカル指標パラメータ（SMA期間、RSI閾値等）
- API設定（タイムアウト、リトライ回数等）

---

## 解決策

### 1. 定数ファイル構造

```
app/constants/
├── index.ts              # メインエクスポート
├── trading.ts            # 取引関連定数
├── chart.ts              # チャート関連定数
├── technical.ts          # テクニカル指標定数
└── api.ts                # API関連定数
```

### 2. 実装例

詳細な実装例とタスクリストは `/home/runner/work/Ult/Ult/REFACTORING_ROADMAP_TRACKING.md` を参照。

---

## タスクリスト

- [ ] 定数ファイル構造の作成
- [ ] ハードコードされた値の移行
- [ ] 環境変数の型安全な管理
- [ ] テストと検証

---

## 成功指標

- ✅ 全ての魔法の数値が定数ファイルに集約
- ✅ 環境変数が型安全にアクセス可能
- ✅ ビルド時に設定エラーを検出可能
