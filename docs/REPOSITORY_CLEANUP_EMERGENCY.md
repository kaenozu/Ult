# ç·Šæ€¥: ãƒªãƒã‚¸ãƒˆãƒªã‚µã‚¤ã‚ºå‰Šæ¸›ãƒ—ãƒ©ãƒ³

## ğŸš¨ å•é¡Œã®ç™ºè¦‹

Gitå±¥æ­´ã« **`.next/` ãƒ“ãƒ«ãƒ‰ã‚¢ãƒ¼ãƒ†ã‚£ãƒ•ã‚¡ã‚¯ãƒˆ** ãŒå¤§é‡ã«å«ã¾ã‚Œã¦ã„ã¾ã™ã€‚

### æœ€æ‚ªã®ãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆä¸Šä½5ä»¶ï¼‰
| ãƒ•ã‚¡ã‚¤ãƒ« | ã‚µã‚¤ã‚º |
|---------|--------|
| `.next/dev/cache/turbopack/d1bd5b58/00002116.sst` | **102 MB** |
| `.next/dev/cache/turbopack/d1bd5b58/00002117.sst` | **98 MB** |
| `.next/dev/cache/webpack/client-development/8.pack.gz` | **84 MB** |
| `.next/dev/cache/turbopack/d1bd5b58/00002120.sst` | **65 MB** |
| `.next/dev/cache/turbopack/d1bd5b58/00002119.sst` | **58 MB** |

**åˆè¨ˆ: 400MBä»¥ä¸ŠãŒ`.next/`ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã ã‘**

---

## ğŸ“‹ è§£æ±ºæ‰‹é †

### Step 1: .next/ ã‚’Gitå±¥æ­´ã‹ã‚‰å®Œå…¨ã«å‰Šé™¤

âš ï¸ **è­¦å‘Š: ã“ã‚Œã¯Gitå±¥æ­´ã‚’æ›¸ãæ›ãˆã¾ã™ã€‚ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼å…¨å“¡ã«é€šçŸ¥ã—ã¦ãã ã•ã„ï¼**

```bash
# git-filter-repo ãŒå¿…è¦
pip install git-filter-repo

# .next/ ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã‚’å…¨å±¥æ­´ã‹ã‚‰å‰Šé™¤
git filter-repo --path .next --invert-paths
```

### Step 2: å¼·åˆ¶ãƒ—ãƒƒã‚·ãƒ¥

```bash
# ãƒªãƒ¢ãƒ¼ãƒˆã«å¼·åˆ¶ãƒ—ãƒƒã‚·ãƒ¥ï¼ˆå…¨ãƒ–ãƒ©ãƒ³ãƒï¼‰
git push origin --force --all
git push origin --force --tags
```

### Step 3: ãƒãƒ¼ãƒ ãƒ¡ãƒ³ãƒãƒ¼ã¸ã®å¯¾å¿œ

```bash
# å„ãƒ¡ãƒ³ãƒãƒ¼ã¯ä»¥ä¸‹ã‚’å®Ÿè¡Œ:
git fetch origin
git reset --hard origin/main  # ã¾ãŸã¯å„è‡ªã®ä½œæ¥­ãƒ–ãƒ©ãƒ³ãƒ
# ã¾ãŸã¯ãƒªãƒã‚¸ãƒˆãƒªã‚’å†ã‚¯ãƒ­ãƒ¼ãƒ³
```

---

## ğŸ” è¿½åŠ ã®å¤§ããªãƒ•ã‚¡ã‚¤ãƒ«

ä»¥ä¸‹ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚‚ç¢ºèªãƒ»å‰Šé™¤å¯¾è±¡:

1. **ãƒ­ã‚°ãƒ•ã‚¡ã‚¤ãƒ«** (`.log`)
2. **ã‚­ãƒ£ãƒƒã‚·ãƒ¥ãƒ•ã‚¡ã‚¤ãƒ«** (`__pycache__/`, `.cache/`)
3. **ãƒ†ã‚¹ãƒˆå‡ºåŠ›** (`test_output*.txt`)
4. **ã‚«ãƒãƒ¬ãƒƒã‚¸ãƒ¬ãƒãƒ¼ãƒˆ** (`coverage/`)

---

## ğŸ›¡ï¸ å†ç™ºé˜²æ­¢ç­–

### 1. .gitignore ã¯æ—¢ã«æ•´å‚™æ¸ˆã¿ âœ…
```gitignore
# Build artifacts
.next/
out/
dist/
build/

# Cache
__pycache__/
.cache/

# Logs
*.log
```

### 2. ãƒ—ãƒªã‚³ãƒŸãƒƒãƒˆãƒ•ãƒƒã‚¯ã®è¨­å®š

```bash
# ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
.githooks/setup.sh

# ç¢ºèª
ls -la .git/hooks/pre-commit
```

### 3. CIã§ã®ç›£è¦–ï¼ˆæ—¢ã«è¨­å®šæ¸ˆã¿ï¼‰

`.github/workflows/repo-size-check.yml` ãŒå®Ÿè¡Œã•ã‚Œã¾ã™ã€‚

---

## ğŸ“Š ã‚µã‚¤ã‚ºç›®æ¨™

| ç¾åœ¨ | ç›®æ¨™ | å‰Šæ¸›ç‡ |
|------|------|--------|
| 400MB+ | <100MB | **75%å‰Šæ¸›** |

---

## âš ï¸ æ³¨æ„äº‹é …

1. **ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‚’ä½œæˆ** ã—ã¦ã‹ã‚‰å®Ÿè¡Œ
2. **ãƒãƒ¼ãƒ å…¨å“¡ã«é€šçŸ¥** ã—ã¦ã‹ã‚‰å®Ÿè¡Œ
3. **ä½œæ¥­ä¸­ã®ãƒ–ãƒ©ãƒ³ãƒ** ãŒã‚ã‚‹å ´åˆã¯æ³¨æ„
4. **force pushå¾Œ**ã¯å…¨å“¡ãŒãƒªãƒ™ãƒ¼ã‚¹ãŒå¿…è¦

---

## ğŸ¯ å³åº§ã«å®Ÿè¡Œã™ã‚‹ã‚³ãƒãƒ³ãƒ‰

```bash
# 1. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—
cd ..
cp -r Ult Ult-backup-$(date +%Y%m%d)
cd Ult

# 2. ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install git-filter-repo

# 3. å‰Šé™¤å®Ÿè¡Œ
git filter-repo --path .next --invert-paths

# 4. å¼·åˆ¶ãƒ—ãƒƒã‚·ãƒ¥
git push origin --force --all
git push origin --force --tags
```

---

## ğŸ“ ã‚µãƒãƒ¼ãƒˆ

å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆ:
1. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã‹ã‚‰å¾©å…ƒ
2. ãƒãƒ¼ãƒ ãƒãƒ£ãƒ³ãƒãƒ«ã§å ±å‘Š
3. æ‰‹å‹•ã§ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—ã‚’æ¤œè¨

---

**ä½œæˆæ—¥**: 2026-02-07  
**å„ªå…ˆåº¦**: ğŸ”´ æœ€é«˜ï¼ˆãƒªãƒã‚¸ãƒˆãƒªã‚µã‚¤ã‚ºãŒè‡´å‘½çš„ï¼‰
