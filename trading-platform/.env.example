# ==============================================================================
# 環境変数テンプレート
# ==============================================================================
# このファイルを .env.local にコピーして、各変数の値を設定してください
# .env.local は .gitignore に含まれているため、Gitにコミットされません
#
# 本番環境では必須の変数に "⚠️ REQUIRED IN PRODUCTION" のマークがあります

# ==============================================================================
# 🔐 セキュリティ設定
# ==============================================================================

# JWT認証シークレット ⚠️ REQUIRED IN PRODUCTION
# 本番環境では必ず変更してください。デフォルト値は使用しないでください
# 推奨: 32文字以上のランダムな文字列を使用
# 生成例: openssl rand -base64 32
JWT_SECRET=

# JWT有効期限（デフォルト: 24h）
# 例: 1h, 24h, 7d
JWT_EXPIRATION=24h

# ==============================================================================
# 💾 データベース設定
# ==============================================================================

# データベース接続URL ⚠️ REQUIRED IN PRODUCTION
# 例: postgresql://user:password@localhost:5432/dbname
DATABASE_URL=

# ==============================================================================
# 🔌 WebSocket設定
# ==============================================================================

# WebSocketサーバーのURL（公開URL）
# 開発環境: ws://localhost:3001
# 本番環境: wss://your-domain.com/ws
NEXT_PUBLIC_WS_URL=ws://localhost:3001

# WebSocket Server Security Settings
# Authentication token - REQUIRED in production
# Generate with: openssl rand -hex 32
WS_AUTH_TOKEN=

# Allowed origins for WebSocket connections (comma-separated)
# Example: http://localhost:3000,https://yourdomain.com
ALLOWED_ORIGINS=http://localhost:3000

# WebSocket server port (optional, default: 3001)
# WS_PORT=3001

# WebSocket server host (optional, default: 0.0.0.0)
# WS_HOST=0.0.0.0

# Maximum connections per IP address (optional, default: 5)
# WS_MAX_CONNECTIONS_PER_IP=5

# Maximum message size in bytes (optional, default: 1048576 = 1MB)
# WS_MAX_MESSAGE_SIZE=1048576

# Rate limit: maximum messages per minute (optional, default: 100)
# WS_RATE_LIMIT_MAX_MESSAGES=100

# ==============================================================================
# 📊 外部API設定（オプション）
# ==============================================================================

# Alpha Vantage APIキー（市場データ取得用）
# ⚠️ このサービスは一部機能で廃止予定です
# 取得方法: https://www.alphavantage.co/support/#api-key
ALPHA_VANTAGE_API_KEY=

# ==============================================================================
# 🔄 代替データソース設定（リアルタイム取引用）
# ==============================================================================
# ⚠️ Yahoo Financeは15分遅延で日本株のイントラデイデータ未対応
# 実際の取引には以下の有料データソースの使用を推奨

# IEX Cloud API Key（リアルタイム米国株データ）
# 料金: $9/月〜（https://iexcloud.io/pricing/）
# 特徴: リアルタイム、bid/ask対応、レート制限緩い
IEX_CLOUD_API_KEY=

# Polygon.io API Key（リアルタイム米国株・暗号通貨データ）
# 料金: $29/月〜（https://polygon.io/pricing/）
# 特徴: リアルタイム、ティックデータ、高頻度取引対応
POLYGON_API_KEY=

# Alpaca Market Data API Key（無料枠あり）
# 料金: 無料〜（https://alpaca.markets/data）
# 特徴: リアルタイム、無料枠豊富、米国株対応
ALPACA_API_KEY=
ALPACA_SECRET_KEY=

# データソース優先順位設定（カンマ区切り）
# 例: polygon,iex_cloud,yahoo_finance
DATA_SOURCE_PRIORITY=yahoo_finance

# データソースヘルスチェック間隔（秒）
DATA_SOURCE_HEALTH_CHECK_INTERVAL=300

# バックエンドAPIのURL（Pythonバックエンドを使用する場合）
BACKEND_API_URL=http://localhost:8000

# Next.js公開URL
NEXT_PUBLIC_APP_URL=http://localhost:3000

# ==============================================================================
# 🏦 ブローカー連携設定
# ==============================================================================

# デフォルトのブローカー（paper, alpaca, oanda, interactive_brokers）
DEFAULT_BROKER=paper

# ペーパートレーディングを有効にするか（デフォルト: true）
ENABLE_PAPER_TRADING=true

# Alpaca API設定
# 取得方法: https://alpaca.markets/
ALPACA_API_KEY=
ALPACA_API_SECRET=
ALPACA_PAPER_TRADING=true

# OANDA API設定（FX/商品取引）
# 取得方法: https://www.oanda.com/
OANDA_API_KEY=
OANDA_ACCOUNT_ID=
OANDA_PRACTICE_MODE=true

# Interactive Brokers API設定
# 取得方法: https://www.interactivebrokers.com/
IB_API_KEY=
IB_ACCOUNT_ID=
IB_PAPER_TRADING=true

# 注文実行設定
ORDER_RETRY_ENABLED=true
ORDER_MAX_RETRIES=3
ORDER_RETRY_DELAY=1000

# ==============================================================================
# データ取得設定
# ==============================================================================
# データ取得の間隔（ミリ秒）
DATA_FETCH_INTERVAL=60000

# データ取得のタイムアウト（ミリ秒）
DATA_FETCH_TIMEOUT=30000

# ==============================================================================
# キャッシュ設定
# ==============================================================================
# キャッシュのTTL（ミリ秒）
CACHE_TTL=300000

# キャッシュの最大サイズ
CACHE_MAX_SIZE=1000

# ==============================================================================
# レート制限設定
# ==============================================================================
# APIリクエストのレート制限（リクエスト/分）
RATE_LIMIT_REQUESTS_PER_MINUTE=5

# APIリクエストのレート制限（リクエスト/時間）
RATE_LIMIT_REQUESTS_PER_HOUR=500

# ==============================================================================
# リスク管理設定
# ==============================================================================
# デフォルトのリスクパーセンテージ（0.0-1.0）
DEFAULT_RISK_PERCENTAGE=0.02

# デフォルトのストップロスパーセンテージ（0.0-1.0）
DEFAULT_STOP_LOSS_PERCENTAGE=0.05

# デフォルトの利益確定パーセンテージ（0.0-1.0）
DEFAULT_TAKE_PROFIT_PERCENTAGE=0.10

# ==============================================================================
# テクニカル指標設定
# ==============================================================================
# RSI期間
RSI_PERIOD=14

# MACD短期期間
MACD_FAST_PERIOD=12

# MACD長期期間
MACD_SLOW_PERIOD=26

# MACDシグナル期間
MACD_SIGNAL_PERIOD=9

# ボリンジャーバンド期間
BOLLINGER_BANDS_PERIOD=20

# ボリンジャーバンドの標準偏差乗数
BOLLINGER_BANDS_STD_DEV=2

# ATR期間
ATR_PERIOD=14

# ==============================================================================
# AI予測設定
# ==============================================================================
# AI予測を有効にするかどうか
ENABLE_AI_PREDICTION=true

# AI予測の信頼度閾値（0-100）
AI_CONFIDENCE_THRESHOLD=80

# ==============================================================================
# 📝 ログ設定
# ==============================================================================

# ログレベル
# 開発環境デフォルト: debug
# 本番環境デフォルト: info
# 選択肢: debug, info, warn, error
LOG_LEVEL=info

# ログを有効にするかどうか（デフォルト: true）
ENABLE_LOGGING=true

# ==============================================================================
# 🐛 デバッグ設定
# ==============================================================================

# デバッグモードを有効にするかどうか（デフォルト: false）
DEBUG_MODE=false

# ==============================================================================
# 🛡️ セキュリティとレート制限
# ==============================================================================

# APIキーの検証を有効にするかどうか（デフォルト: true）
ENABLE_API_KEY_VALIDATION=true

# レート制限を有効にするかどうか（デフォルト: true）
ENABLE_RATE_LIMITING=true

# レート制限の最大リクエスト数（デフォルト: 100）
RATE_LIMIT_MAX=100

# ==============================================================================
# UI設定
# ==============================================================================
# デフォルトのテーマ（light, dark）
DEFAULT_THEME=dark

# デフォルトの市場（japan, usa）
DEFAULT_MARKET=japan

# ==============================================================================
# 📈 アナリティクスと監視
# ==============================================================================

# アナリティクスを有効にするかどうか
# 開発環境デフォルト: false
# 本番環境デフォルト: true
ENABLE_ANALYTICS=false

# パフォーマンス監視を有効にするかどうか（デフォルト: true）
ENABLE_PERFORMANCE_MONITORING=true

# ==============================================================================
# 🔔 通知設定
# ==============================================================================

# 通知を有効にするかどうか（デフォルト: true）
ENABLE_NOTIFICATIONS=true

# 通知のタイプ（email, browser, webhook）
NOTIFICATION_TYPE=browser

# ==============================================================================
# 🧪 分析設定
# ==============================================================================

# バックテストを有効にするかどうか（デフォルト: true）
ENABLE_BACKTEST=true

# バックテストの初期資金（デフォルト: 1000000）
BACKTEST_INITIAL_CAPITAL=1000000

# ==============================================================================
# 開発ツール設定
# ==============================================================================
# ホットリロードを有効にするかどうか
NEXT_PUBLIC_ENABLE_HOT_RELOAD=true

# ソースマップを有効にするかどうか
NEXT_PUBLIC_ENABLE_SOURCE_MAP=false

# ==============================================================================
# 監視・エラートラッキング設定
# ==============================================================================
# Sentry DSN（エラートラッキング）
# 取得方法: https://sentry.io/ でプロジェクトを作成
NEXT_PUBLIC_SENTRY_DSN=

# Sentry環境名（production, staging, development）
NEXT_PUBLIC_SENTRY_ENVIRONMENT=development

# パフォーマンストレース率（0.0-1.0）本番では0.1程度を推奨
NEXT_PUBLIC_SENTRY_TRACES_SAMPLE_RATE=1.0

# Web Vitals監視を有効にするかどうか
NEXT_PUBLIC_ENABLE_WEB_VITALS=true

# CSRF Protection
# CSRF Token validation for state-changing operations
ENABLE_CSRF_PROTECTION=true
CSRF_TOKEN_LENGTH=32

# CSRF Protection Settings
# Double-submit cookie pattern for CSRF defense
ENABLE_CSRF_PROTECTION=true
CSRF_TOKEN_LENGTH=32

# ==============================================================================
# 🧪 E2Eテスト設定
# ==============================================================================
# 注意: これらのパスワードは変更し、強力な値を設定してください
TEST_ADMIN_PASSWORD=
TEST_TRADER_PASSWORD=
TEST_VIEWER_PASSWORD=

# ==============================================================================
# 🔐 監査ログ暗号化設定
# ==============================================================================
# AuditLogger の暗号化キー（enableEncryption: true 時に使用）
# 重要: この鍵は秘密に保ち、本番環境では必ず変更してください
# 生成例: openssl rand -base64 32
NEXT_PUBLIC_AUDIT_ENCRYPTION_KEY=
