
> trading-platform@0.1.0 test
> jest --coverage --watchAll=false --coverageReporters=text --coverageReporters=json

FAIL app/__tests__/data-interpolation.test.ts
  ‚óè Data Interpolation and Technical Indicator Tests ‚Ä∫ Data Interpolation Handling ‚Ä∫ should handle null/invalid values in SMA calculation

    expect(received).toBeCloseTo(expected, precision)

    Expected: 103
    Received: NaN

    Expected precision:    2
    Expected difference: < 0.005
    Received difference:   NaN

    [0m [90m 18 |[39m       expect(result[[35m3[39m])[33m.[39mtoBeNaN()[33m;[39m
     [90m 19 |[39m       [90m// 5Áï™ÁõÆ„ÅÆ„Éá„Éº„Çø„ÅØ„ÄÅÊúâÂäπ„Å™„Éá„Éº„Çø„Åå3„Å§(102,104,103)„ÅÇ„Çã„ÅÆ„ÅßË®àÁÆóÂèØËÉΩ[39m
    [31m[1m>[22m[39m[90m 20 |[39m       expect(result[[35m4[39m])[33m.[39mtoBeCloseTo(([35m102[39m [33m+[39m [35m104[39m [33m+[39m [35m103[39m) [35m/ 3, 2); /[39m[33m/[39m [35m103[39m
     [90m    |[39m                         [31m[1m^[22m[39m
     [90m 21 |[39m       [90m// 6Áï™ÁõÆ„ÅÆ„Éá„Éº„Çø„ÅØNaN„ÅÆ„Åü„ÇÅNaN[39m
     [90m 22 |[39m       expect(result[[35m5[39m])[33m.[39mtoBeNaN()[33m;[39m
     [90m 23 |[39m       [90m// 7Áï™ÁõÆ„ÅÆ„Éá„Éº„Çø„ÅØ„ÄÅÊúâÂäπ„Å™„Éá„Éº„Çø„Åå2„Å§„Åó„Åã„Å™„ÅÑ„ÅÆ„ÅßNaN[39m[0m

      at Object.toBeCloseTo (app/__tests__/data-interpolation.test.ts:20:25)

  ‚óè Data Interpolation and Technical Indicator Tests ‚Ä∫ Data Interpolation Handling ‚Ä∫ should handle null/invalid values in RSI calculation

    expect(received).toBeNaN()

    Received: 100

    [0m [90m 38 |[39m       expect(result[[35m2[39m])[33m.[39mtoBeNaN()[33m;[39m [90m// nullÂÄ§„ÅÆ„Åü„ÇÅNaN[39m
     [90m 39 |[39m       expect(result[[35m3[39m])[33m.[39mtoBeNaN()[33m;[39m [90m// ÂçÅÂàÜ„Å™„Éá„Éº„Çø„Åå„Å™„ÅÑ„Åü„ÇÅNaN[39m
    [31m[1m>[22m[39m[90m 40 |[39m       expect(result[[35m4[39m])[33m.[39mtoBeNaN()[33m;[39m [90m// ÂçÅÂàÜ„Å™„Éá„Éº„Çø„Åå„Å™„ÅÑ„Åü„ÇÅNaN[39m
     [90m    |[39m                         [31m[1m^[22m[39m
     [90m 41 |[39m       expect(result[[35m5[39m])[33m.[39mtoBeNaN()[33m;[39m [90m// ÂçÅÂàÜ„Å™„Éá„Éº„Çø„Åå„Å™„ÅÑ„Åü„ÇÅNaN[39m
     [90m 42 |[39m     })[33m;[39m
     [90m 43 |[39m[0m

      at Object.toBeNaN (app/__tests__/data-interpolation.test.ts:40:25)

FAIL app/lib/__tests__/riskManagement.test.ts
  ‚óè RiskManagement ‚Ä∫ calculatePositionSize ‚Ä∫ should calculate position size for fixed_ratio method

    expect(received).toBe(expected) // Object.is equality

    Expected: 500
    Received: 5

    [0m [90m 94 |[39m
     [90m 95 |[39m       expect(result[33m.[39mpositionSize)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 96 |[39m       expect(result[33m.[39mriskAmount)[33m.[39mtoBe([35m500[39m)[33m;[39m [90m// (100-95) * positionSize[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 97 |[39m       expect(result[33m.[39mriskPercent)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m 98 |[39m     })[33m;[39m
     [90m 99 |[39m[0m

      at Object.toBe (app/lib/__tests__/riskManagement.test.ts:96:33)

  ‚óè RiskManagement ‚Ä∫ calculatePositionSize ‚Ä∫ should return minimum size for small capital

    expect(received).toBe(expected) // Object.is equality

    Expected: 100
    Received: 0

    [0m [90m 107 |[39m       )[33m;[39m
     [90m 108 |[39m
    [31m[1m>[22m[39m[90m 109 |[39m       expect(result[33m.[39mpositionSize)[33m.[39mtoBe([33mPOSITION_SIZING[39m[33m.[39m[33mMIN_SIZE[39m)[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 110 |[39m     })[33m;[39m
     [90m 111 |[39m
     [90m 112 |[39m     it([32m'should respect maxPositionPercent limit'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toBe (app/lib/__tests__/riskManagement.test.ts:109:35)

  ‚óè RiskManagement ‚Ä∫ calculateStopLossPrice ‚Ä∫ should calculate trailing stop

    expect(received).toBe(expected) // Object.is equality

    Expected: 90
    Received: 75

    [0m [90m 218 |[39m       [36mconst[39m stopLoss [33m=[39m calculateStopLossPrice([35m100[39m[33m,[39m [32m'LONG'[39m[33m,[39m { enabled[33m:[39m [36mtrue[39m[33m,[39m type[33m:[39m [32m'trailing'[39m[33m,[39m value[33m:[39m [35m5[39m }[33m,[39m [35m5[39m)[33m;[39m
     [90m 219 |[39m       [90m// Trailing stop uses ATR initially[39m
    [31m[1m>[22m[39m[90m 220 |[39m       expect(stopLoss)[33m.[39mtoBe([35m90[39m)[33m;[39m
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 221 |[39m     })[33m;[39m
     [90m 222 |[39m   })[33m;[39m
     [90m 223 |[39m[0m

      at Object.toBe (app/lib/__tests__/riskManagement.test.ts:220:24)

  ‚óè RiskManagement ‚Ä∫ calculateTakeProfitPrice ‚Ä∫ should calculate percentage take profit for LONG

    expect(received).toBe(expected) // Object.is equality

    Expected: 110
    Received: 110.00000000000001

    [0m [90m 230 |[39m     it([32m'should calculate percentage take profit for LONG'[39m[33m,[39m () [33m=>[39m {
     [90m 231 |[39m       [36mconst[39m takeProfit [33m=[39m calculateTakeProfitPrice([35m100[39m[33m,[39m [32m'LONG'[39m[33m,[39m [35m95[39m[33m,[39m { enabled[33m:[39m [36mtrue[39m[33m,[39m type[33m:[39m [32m'percentage'[39m[33m,[39m value[33m:[39m [35m10[39m })[33m;[39m
    [31m[1m>[22m[39m[90m 232 |[39m       expect(takeProfit)[33m.[39mtoBe([35m110[39m)[33m;[39m
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 233 |[39m     })[33m;[39m
     [90m 234 |[39m
     [90m 235 |[39m     it([32m'should calculate percentage take profit for SHORT'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toBe (app/lib/__tests__/riskManagement.test.ts:232:26)

  ‚óè RiskManagement ‚Ä∫ checkDailyLossLimit ‚Ä∫ should use custom dailyLossLimit

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 278 |[39m       [36mconst[39m settings [33m=[39m { [33m...[39m[33mDEFAULT_RISK_SETTINGS[39m[33m,[39m dailyLossLimit[33m:[39m [35m10[39m }[33m;[39m
     [90m 279 |[39m       [36mconst[39m result [33m=[39m checkDailyLossLimit([35m500[39m[33m,[39m [35m10000[39m[33m,[39m settings)[33m;[39m
    [31m[1m>[22m[39m[90m 280 |[39m       expect(result[33m.[39mexceeded)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 281 |[39m     })[33m;[39m
     [90m 282 |[39m   })[33m;[39m
     [90m 283 |[39m[0m

      at Object.toBe (app/lib/__tests__/riskManagement.test.ts:280:31)

  ‚óè RiskManagement ‚Ä∫ Edge cases ‚Ä∫ should handle very small capital

    expect(received).toBe(expected) // Object.is equality

    Expected: 100
    Received: 0

    [0m [90m 375 |[39m         [33mDEFAULT_RISK_SETTINGS[39m
     [90m 376 |[39m       )[33m;[39m
    [31m[1m>[22m[39m[90m 377 |[39m       expect(result[33m.[39mpositionSize)[33m.[39mtoBe([33mPOSITION_SIZING[39m[33m.[39m[33mMIN_SIZE[39m)[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 378 |[39m     })[33m;[39m
     [90m 379 |[39m
     [90m 380 |[39m     it([32m'should handle very large capital'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toBe (app/lib/__tests__/riskManagement.test.ts:377:35)

FAIL app/__tests__/utils-technical-indicators.test.ts
  ‚óè Technical Indicators - calculateSMA ‚Ä∫ should handle NaN values in input

    expect(received).toBeCloseTo(expected)

    Expected: 106
    Received: 108

    Expected precision:    2
    Expected difference: < 0.005
    Received difference:   2

    [0m [90m 33 |[39m
     [90m 34 |[39m     expect(result[[35m2[39m])[33m.[39mtoBeNaN()[33m;[39m [90m// Not enough valid data[39m
    [31m[1m>[22m[39m[90m 35 |[39m     expect(result[[35m5[39m])[33m.[39mtoBeCloseTo(([35m104[39m [33m+[39m [35m106[39m [33m+[39m [35m108[39m) [33m/[39m [35m3[39m)[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 36 |[39m   })[33m;[39m
     [90m 37 |[39m
     [90m 38 |[39m   it([32m'should handle null and undefined values'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toBeCloseTo (app/__tests__/utils-technical-indicators.test.ts:35:23)

  ‚óè Technical Indicators - calculateSMA ‚Ä∫ should handle null and undefined values

    expect(received).toBeCloseTo(expected)

    Expected: 107.33333333333333
    Received: NaN

    Expected precision:    2
    Expected difference: < 0.005
    Received difference:   NaN

    [0m [90m 42 |[39m
     [90m 43 |[39m     expect(result[[35m2[39m])[33m.[39mtoBeNaN()[33m;[39m [90m// Not enough valid data[39m
    [31m[1m>[22m[39m[90m 44 |[39m     expect(result[[35m5[39m])[33m.[39mtoBeCloseTo(([35m104[39m [33m+[39m [35m108[39m [33m+[39m [35m110[39m) [33m/[39m [35m3[39m)[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 45 |[39m   })[33m;[39m
     [90m 46 |[39m
     [90m 47 |[39m   it([32m'should handle negative values by treating them as invalid'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toBeCloseTo (app/__tests__/utils-technical-indicators.test.ts:44:23)

  ‚óè Technical Indicators - calculateSMA ‚Ä∫ should handle negative values by treating them as invalid

    expect(received).toBeCloseTo(expected)

    Expected: 106
    Received: 108

    Expected precision:    2
    Expected difference: < 0.005
    Received difference:   2

    [0m [90m 51 |[39m
     [90m 52 |[39m     expect(result[[35m2[39m])[33m.[39mtoBeNaN()[33m;[39m [90m// Negative value treated as invalid[39m
    [31m[1m>[22m[39m[90m 53 |[39m     expect(result[[35m5[39m])[33m.[39mtoBeCloseTo(([35m104[39m [33m+[39m [35m106[39m [33m+[39m [35m108[39m) [33m/[39m [35m3[39m)[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 54 |[39m   })[33m;[39m
     [90m 55 |[39m
     [90m 56 |[39m   it([32m'should handle zero values as valid'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toBeCloseTo (app/__tests__/utils-technical-indicators.test.ts:53:23)

  ‚óè Technical Indicators - calculateSMA ‚Ä∫ should handle zero values as valid

    expect(received).toBeCloseTo(expected)

    Expected: 68
    Received: NaN

    Expected precision:    2
    Expected difference: < 0.005
    Received difference:   NaN

    [0m [90m 59 |[39m     [36mconst[39m result [33m=[39m calculateSMA(prices[33m,[39m period)[33m;[39m
     [90m 60 |[39m
    [31m[1m>[22m[39m[90m 61 |[39m     expect(result[[35m2[39m])[33m.[39mtoBeCloseTo(([35m100[39m [33m+[39m [35m0[39m [33m+[39m [35m104[39m) [33m/[39m [35m3[39m)[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 62 |[39m   })[33m;[39m
     [90m 63 |[39m
     [90m 64 |[39m   it([32m'should handle empty array'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toBeCloseTo (app/__tests__/utils-technical-indicators.test.ts:61:23)

  ‚óè Technical Indicators - calculateRSI ‚Ä∫ should calculate RSI correctly with valid data

    expect(received).not.toBeNaN()

    Received: NaN

    [0m [90m 94 |[39m     expect(result[33m.[39mlength)[33m.[39mtoBe(prices[33m.[39mlength)[33m;[39m
     [90m 95 |[39m     expect(result[[35m0[39m])[33m.[39mtoBeNaN()[33m;[39m [90m// First period+1 values are NaN[39m
    [31m[1m>[22m[39m[90m 96 |[39m     expect(result[[35m14[39m])[33m.[39mnot[33m.[39mtoBeNaN()[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 97 |[39m     expect(result[[35m15[39m])[33m.[39mnot[33m.[39mtoBeNaN()[33m;[39m
     [90m 98 |[39m     [90m// RSI should be between 0 and 100[39m
     [90m 99 |[39m     [36mconst[39m validRSI [33m=[39m result[33m.[39mfilter(v [33m=>[39m [33m![39misNaN(v))[33m;[39m[0m

      at Object.toBeNaN (app/__tests__/utils-technical-indicators.test.ts:96:28)

  ‚óè Technical Indicators - calculateRSI ‚Ä∫ should handle NaN values in input

    expect(received).not.toBeNaN()

    Received: NaN

    [0m [90m 109 |[39m     [36mconst[39m result [33m=[39m calculateRSI(prices[33m,[39m period)[33m;[39m
     [90m 110 |[39m
    [31m[1m>[22m[39m[90m 111 |[39m     expect(result[[35m14[39m])[33m.[39mnot[33m.[39mtoBeNaN()[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 112 |[39m     expect(result[[35m15[39m])[33m.[39mtoBeNaN()[33m;[39m [90m// NaN in calculation[39m
     [90m 113 |[39m     expect(result[[35m16[39m])[33m.[39mtoBeNaN()[33m;[39m [90m// Previous value was NaN[39m
     [90m 114 |[39m   })[33m;[39m[0m

      at Object.toBeNaN (app/__tests__/utils-technical-indicators.test.ts:111:28)

  ‚óè Technical Indicators - calculateRSI ‚Ä∫ should handle null and undefined values

    expect(received).not.toBeNaN()

    Received: NaN

    [0m [90m 119 |[39m     [36mconst[39m result [33m=[39m calculateRSI(prices[33m,[39m period)[33m;[39m
     [90m 120 |[39m
    [31m[1m>[22m[39m[90m 121 |[39m     expect(result[[35m14[39m])[33m.[39mnot[33m.[39mtoBeNaN()[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 122 |[39m     expect(result[[35m15[39m])[33m.[39mtoBeNaN()[33m;[39m
     [90m 123 |[39m   })[33m;[39m
     [90m 124 |[39m[0m

      at Object.toBeNaN (app/__tests__/utils-technical-indicators.test.ts:121:28)

  ‚óè Technical Indicators - calculateRSI ‚Ä∫ should handle negative values by treating them as invalid

    expect(received).not.toBeNaN()

    Received: NaN

    [0m [90m 128 |[39m     [36mconst[39m result [33m=[39m calculateRSI(prices[33m,[39m period)[33m;[39m
     [90m 129 |[39m
    [31m[1m>[22m[39m[90m 130 |[39m     expect(result[[35m14[39m])[33m.[39mnot[33m.[39mtoBeNaN()[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 131 |[39m     expect(result[[35m15[39m])[33m.[39mtoBeNaN()[33m;[39m
     [90m 132 |[39m   })[33m;[39m
     [90m 133 |[39m[0m

      at Object.toBeNaN (app/__tests__/utils-technical-indicators.test.ts:130:28)

  ‚óè Technical Indicators - calculateRSI ‚Ä∫ should handle all gains (RSI should be 100)

    expect(received).toBeCloseTo(expected)

    Expected: 100
    Received: NaN

    Expected precision:    2
    Expected difference: < 0.005
    Received difference:   NaN

    [0m [90m 137 |[39m     [36mconst[39m result [33m=[39m calculateRSI(prices[33m,[39m period)[33m;[39m
     [90m 138 |[39m
    [31m[1m>[22m[39m[90m 139 |[39m     expect(result[[35m14[39m])[33m.[39mtoBeCloseTo([35m100[39m)[33m;[39m
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 140 |[39m   })[33m;[39m
     [90m 141 |[39m
     [90m 142 |[39m   it([32m'should handle all losses (RSI should be 0)'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toBeCloseTo (app/__tests__/utils-technical-indicators.test.ts:139:24)

  ‚óè Technical Indicators - calculateRSI ‚Ä∫ should handle all losses (RSI should be 0)

    expect(received).toBeCloseTo(expected)

    Expected: 0
    Received: NaN

    Expected precision:    2
    Expected difference: < 0.005
    Received difference:   NaN

    [0m [90m 145 |[39m     [36mconst[39m result [33m=[39m calculateRSI(prices[33m,[39m period)[33m;[39m
     [90m 146 |[39m
    [31m[1m>[22m[39m[90m 147 |[39m     expect(result[[35m14[39m])[33m.[39mtoBeCloseTo([35m0[39m)[33m;[39m
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 148 |[39m   })[33m;[39m
     [90m 149 |[39m
     [90m 150 |[39m   it([32m'should handle empty array'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toBeCloseTo (app/__tests__/utils-technical-indicators.test.ts:147:24)

  ‚óè Technical Indicators - calculateRSI ‚Ä∫ should use default period of 14

    expect(received).not.toBeNaN()

    Received: NaN

    [0m [90m 158 |[39m
     [90m 159 |[39m     expect(result[33m.[39mlength)[33m.[39mtoBe(prices[33m.[39mlength)[33m;[39m
    [31m[1m>[22m[39m[90m 160 |[39m     expect(result[[35m14[39m])[33m.[39mnot[33m.[39mtoBeNaN()[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 161 |[39m   })[33m;[39m
     [90m 162 |[39m })[33m;[39m
     [90m 163 |[39m[0m

      at Object.toBeNaN (app/__tests__/utils-technical-indicators.test.ts:160:28)

  ‚óè Technical Indicators - calculateMACD ‚Ä∫ should calculate MACD correctly with valid data

    expect(received).not.toBeNaN()

    Received: NaN

    [0m [90m 178 |[39m     [90m// Later values should be valid[39m
     [90m 179 |[39m     expect(result[33m.[39mmacd[[35m50[39m])[33m.[39mnot[33m.[39mtoBeNaN()[33m;[39m
    [31m[1m>[22m[39m[90m 180 |[39m     expect(result[33m.[39msignal[[35m50[39m])[33m.[39mnot[33m.[39mtoBeNaN()[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 181 |[39m     expect(result[33m.[39mhistogram[[35m50[39m])[33m.[39mnot[33m.[39mtoBeNaN()[33m;[39m
     [90m 182 |[39m   })[33m;[39m
     [90m 183 |[39m[0m

      at Object.toBeNaN (app/__tests__/utils-technical-indicators.test.ts:180:35)

  ‚óè Technical Indicators - calculateMACD ‚Ä∫ should calculate histogram correctly (macd - signal)

    expect(received).toBeCloseTo(expected)

    Expected: NaN
    Received: NaN

    Expected precision:    2
    Expected difference: < 0.005
    Received difference:   NaN

    [0m [90m 214 |[39m
     [90m 215 |[39m     [36mconst[39m validIndex [33m=[39m [35m50[39m[33m;[39m
    [31m[1m>[22m[39m[90m 216 |[39m     expect(result[33m.[39mhistogram[validIndex])[33m.[39mtoBeCloseTo(
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 217 |[39m       result[33m.[39mmacd[validIndex] [33m-[39m result[33m.[39msignal[validIndex]
     [90m 218 |[39m     )[33m;[39m
     [90m 219 |[39m   })[33m;[39m[0m

      at Object.toBeCloseTo (app/__tests__/utils-technical-indicators.test.ts:216:42)

  ‚óè Technical Indicators - calculateATR ‚Ä∫ should handle NaN values in input

    expect(received).not.toBeNaN()

    Received: NaN

    [0m [90m 313 |[39m     [36mconst[39m result [33m=[39m calculateATR(highs[33m,[39m lows[33m,[39m closes[33m,[39m [35m14[39m)[33m;[39m
     [90m 314 |[39m
    [31m[1m>[22m[39m[90m 315 |[39m     expect(result[[35m13[39m])[33m.[39mnot[33m.[39mtoBeNaN()[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 316 |[39m     expect(result[[35m14[39m])[33m.[39mtoBeNaN()[33m;[39m [90m// NaN in calculation[39m
     [90m 317 |[39m   })[33m;[39m
     [90m 318 |[39m[0m

      at Object.toBeNaN (app/__tests__/utils-technical-indicators.test.ts:315:28)

  ‚óè Technical Indicators - calculateATR ‚Ä∫ should handle null and undefined values

    expect(received).not.toBeNaN()

    Received: NaN

    [0m [90m 324 |[39m     [36mconst[39m result [33m=[39m calculateATR(highs[33m,[39m lows[33m,[39m closes[33m,[39m [35m14[39m)[33m;[39m
     [90m 325 |[39m
    [31m[1m>[22m[39m[90m 326 |[39m     expect(result[[35m13[39m])[33m.[39mnot[33m.[39mtoBeNaN()[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 327 |[39m     expect(result[[35m14[39m])[33m.[39mtoBeNaN()[33m;[39m
     [90m 328 |[39m   })[33m;[39m
     [90m 329 |[39m[0m

      at Object.toBeNaN (app/__tests__/utils-technical-indicators.test.ts:326:28)

  ‚óè Technical Indicators - calculateATR ‚Ä∫ should handle negative values by treating them as invalid

    expect(received).not.toBeNaN()

    Received: NaN

    [0m [90m 335 |[39m     [36mconst[39m result [33m=[39m calculateATR(highs[33m,[39m lows[33m,[39m closes[33m,[39m [35m14[39m)[33m;[39m
     [90m 336 |[39m
    [31m[1m>[22m[39m[90m 337 |[39m     expect(result[[35m13[39m])[33m.[39mnot[33m.[39mtoBeNaN()[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 338 |[39m     expect(result[[35m14[39m])[33m.[39mtoBeNaN()[33m;[39m
     [90m 339 |[39m   })[33m;[39m
     [90m 340 |[39m[0m

      at Object.toBeNaN (app/__tests__/utils-technical-indicators.test.ts:337:28)

  ‚óè Technical Indicators - calculateATR ‚Ä∫ should handle arrays of different lengths

    expect(received).toBe(expected) // Object.is equality

    Expected: 2
    Received: 3

    [0m [90m 351 |[39m
     [90m 352 |[39m     [90m// Should use the minimum length[39m
    [31m[1m>[22m[39m[90m 353 |[39m     expect(result[33m.[39mlength)[33m.[39mtoBe([35m2[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 354 |[39m   })[33m;[39m
     [90m 355 |[39m
     [90m 356 |[39m   it([32m'should use default period of 14'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toBe (app/__tests__/utils-technical-indicators.test.ts:353:27)

  ‚óè Technical Indicators - Edge Cases and Error Handling ‚Ä∫ should handle arrays with all NaN values

    expect(received).toBeNaN()

    Received: 100

    [0m [90m 396 |[39m
     [90m 397 |[39m     sma[33m.[39mforEach(v [33m=>[39m expect(v)[33m.[39mtoBeNaN())[33m;[39m
    [31m[1m>[22m[39m[90m 398 |[39m     rsi[33m.[39mforEach(v [33m=>[39m expect(v)[33m.[39mtoBeNaN())[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 399 |[39m     macd[33m.[39mmacd[33m.[39mforEach(v [33m=>[39m expect(v)[33m.[39mtoBeNaN())[33m;[39m
     [90m 400 |[39m   })[33m;[39m
     [90m 401 |[39m[0m

      at toBeNaN (app/__tests__/utils-technical-indicators.test.ts:398:32)
          at Array.forEach (<anonymous>)
      at Object.forEach (app/__tests__/utils-technical-indicators.test.ts:398:9)

FAIL app/lib/__tests__/mlPrediction.test.ts
  ‚óè MLPredictionService ‚Ä∫ predict ‚Ä∫ should calculate ensemble prediction from weighted models

    expect(received).toBeCloseTo(expected, precision)

    Expected: 0.801408019374783
    Received: 0.8458893471756127

    Expected precision:    5
    Expected difference: < 0.000005
    Received difference:   0.044481327800829695

    [0m [90m 198 |[39m         prediction[33m.[39mlstmPrediction [33m*[39m [33mENSEMBLE_WEIGHTS[39m[33m.[39m[33mLSTM[39m[33m;[39m
     [90m 199 |[39m       
    [31m[1m>[22m[39m[90m 200 |[39m       expect(prediction[33m.[39mensemblePrediction)[33m.[39mtoBeCloseTo(expectedEnsemble[33m,[39m [35m5[39m)[33m;[39m
     [90m     |[39m                                             [31m[1m^[22m[39m
     [90m 201 |[39m     })[33m;[39m
     [90m 202 |[39m   })[33m;[39m
     [90m 203 |[39m[0m

      at Object.toBeCloseTo (app/lib/__tests__/mlPrediction.test.ts:200:45)

  ‚óè MLPredictionService ‚Ä∫ Edge cases ‚Ä∫ should handle flat prices

    expect(received).toBe(expected) // Object.is equality

    Expected: "HOLD"
    Received: "SELL"

    [0m [90m 338 |[39m
     [90m 339 |[39m       [90m// With flat prices, should likely be HOLD[39m
    [31m[1m>[22m[39m[90m 340 |[39m       expect(signal[33m.[39mtype)[33m.[39mtoBe([32m'HOLD'[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 341 |[39m     })[33m;[39m
     [90m 342 |[39m   })[33m;[39m
     [90m 343 |[39m })[33m;[39m[0m

      at Object.toBe (app/lib/__tests__/mlPrediction.test.ts:340:27)

FAIL app/__tests__/utils-error-handling.test.ts
  ‚óè Utils Error Handling ‚Ä∫ WebSocket URL Error Handling ‚Ä∫ should handle path without leading slash

    expect(received).toContain(expected) // indexOf

    Expected substring: "/ws/signals"
    Received string:    "ws://localhost:8000ws/signals"

    [0m [90m 288 |[39m     it([32m'should handle path without leading slash'[39m[33m,[39m () [33m=>[39m {
     [90m 289 |[39m       [36mconst[39m result [33m=[39m getWebSocketUrl([32m'ws/signals'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 290 |[39m       expect(result)[33m.[39mtoContain([32m'/ws/signals'[39m)[33m;[39m
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 291 |[39m     })[33m;[39m
     [90m 292 |[39m
     [90m 293 |[39m     it([32m'should handle path with leading slash'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toContain (app/__tests__/utils-error-handling.test.ts:290:22)

FAIL app/__tests__/ml-prediction.test.ts (5.534 s)
  ‚óè MLPredictionService ‚Ä∫ calculateIndicators ‚Ä∫ should return indicators with correct values

    expect(received).toBeGreaterThanOrEqual(expected)

    Expected: >= 0
    Received:    NaN

    [0m [90m 92 |[39m
     [90m 93 |[39m       [90m// SMA„ÅÆË®àÁÆóÁµêÊûú„ÇíÊ§úË®ºÔºàÁ∞°ÊòìÁöÑ„Å´ÊúÄÂàù„ÅÆÂÄ§„ÅÆ„ÅøÔºâ[39m
    [31m[1m>[22m[39m[90m 94 |[39m       expect(result[33m.[39msma5[[35m0[39m])[33m.[39mtoBeGreaterThanOrEqual([35m0[39m)[33m;[39m
     [90m    |[39m                              [31m[1m^[22m[39m
     [90m 95 |[39m       expect(result[33m.[39msma20[[35m0[39m])[33m.[39mtoBeGreaterThanOrEqual([35m0[39m)[33m;[39m
     [90m 96 |[39m       expect(result[33m.[39msma50[[35m0[39m])[33m.[39mtoBeGreaterThanOrEqual([35m0[39m)[33m;[39m
     [90m 97 |[39m[0m

      at Object.toBeGreaterThanOrEqual (app/__tests__/ml-prediction.test.ts:94:30)

  ‚óè MLPredictionService ‚Ä∫ analyzeMarketCorrelation ‚Ä∫ should handle market correlation analysis

    TypeError: _mlPrediction.mlPredictionService.analyzeMarketCorrelation is not a function

    [0m [90m 277 |[39m       [90m// „Éó„É©„Ç§„Éô„Éº„Éà„É°„ÇΩ„ÉÉ„Éâ„Çí„ÉÜ„Çπ„Éà„Åô„Çã„Åü„ÇÅ„ÅÆ„É©„ÉÉ„Éë„ÉºÈñ¢Êï∞„ÇíÂÆöÁæ©[39m
     [90m 278 |[39m       [36mconst[39m analyzeMarketCorrelation [33m=[39m (stock[33m:[39m [33mStock[39m[33m,[39m data[33m:[39m [33mOHLCV[39m[][33m,[39m indexDataInput[33m:[39m [33mOHLCV[39m[] [33m|[39m undefined[33m,[39m prediction[33m:[39m number) [33m=>[39m {
    [31m[1m>[22m[39m[90m 279 |[39m         [36mreturn[39m (mlPredictionService [36mas[39m any)[33m.[39manalyzeMarketCorrelation(stock[33m,[39m data[33m,[39m indexDataInput[33m,[39m prediction)[33m;[39m
     [90m     |[39m                                             [31m[1m^[22m[39m
     [90m 280 |[39m       }[33m;[39m
     [90m 281 |[39m
     [90m 282 |[39m       [36mconst[39m result [33m=[39m analyzeMarketCorrelation(mockStock[33m,[39m mockOHLCVData[33m,[39m indexData[33m,[39m [35m2.5[39m)[33m;[39m[0m

      at analyzeMarketCorrelation (app/__tests__/ml-prediction.test.ts:279:45)
      at Object.analyzeMarketCorrelation (app/__tests__/ml-prediction.test.ts:282:22)

  ‚óè MLPredictionService ‚Ä∫ analyzeMarketCorrelation ‚Ä∫ should handle undefined index data

    TypeError: _mlPrediction.mlPredictionService.analyzeMarketCorrelation is not a function

    [0m [90m 302 |[39m     it([32m'should handle undefined index data'[39m[33m,[39m () [33m=>[39m {
     [90m 303 |[39m       [36mconst[39m analyzeMarketCorrelation [33m=[39m (stock[33m:[39m [33mStock[39m[33m,[39m data[33m:[39m [33mOHLCV[39m[][33m,[39m indexDataInput[33m:[39m [33mOHLCV[39m[] [33m|[39m undefined[33m,[39m prediction[33m:[39m number) [33m=>[39m {
    [31m[1m>[22m[39m[90m 304 |[39m         [36mreturn[39m (mlPredictionService [36mas[39m any)[33m.[39manalyzeMarketCorrelation(stock[33m,[39m data[33m,[39m indexDataInput[33m,[39m prediction)[33m;[39m
     [90m     |[39m                                             [31m[1m^[22m[39m
     [90m 305 |[39m       }[33m;[39m
     [90m 306 |[39m
     [90m 307 |[39m       [36mconst[39m result [33m=[39m analyzeMarketCorrelation(mockStock[33m,[39m mockOHLCVData[33m,[39m undefined[33m,[39m [35m2.5[39m)[33m;[39m[0m

      at analyzeMarketCorrelation (app/__tests__/ml-prediction.test.ts:304:45)
      at Object.analyzeMarketCorrelation (app/__tests__/ml-prediction.test.ts:307:22)

PASS app/__tests__/OptimizedAccuracyService.test.ts
  ‚óè Console

    console.log
      [OptimizedAccuracyService] Cache miss, optimizing parameters for TEST

      at OptimizedAccuracyService.log [as getOptimizedParams] (app/lib/OptimizedAccuracyService.ts:101:17)

    console.log
      [OptimizedAccuracyService] Cache hit for TEST

      at OptimizedAccuracyService.log [as getOptimizedParams] (app/lib/OptimizedAccuracyService.ts:96:21)

    console.log
      [OptimizedAccuracyService] Cache miss, optimizing parameters for TEST

      at OptimizedAccuracyService.log [as getOptimizedParams] (app/lib/OptimizedAccuracyService.ts:101:17)

    console.log
      [OptimizedAccuracyService] Cache miss, optimizing parameters for 7203

      at OptimizedAccuracyService.log [as getOptimizedParams] (app/lib/OptimizedAccuracyService.ts:101:17)

    console.log
      [OptimizedAccuracyService] Backtest completed in 21.23ms

      at OptimizedAccuracyService.log [as runOptimizedBacktest] (app/lib/OptimizedAccuracyService.ts:362:17)

    console.log
      Backtest execution time: 22.42ms

      at Object.log (app/__tests__/OptimizedAccuracyService.test.ts:92:15)

    console.log
      [OptimizedAccuracyService] Cache miss, optimizing parameters for TEST

      at OptimizedAccuracyService.log [as getOptimizedParams] (app/lib/OptimizedAccuracyService.ts:101:17)

    console.log
      [OptimizedAccuracyService] Backtest completed in 15.64ms

      at OptimizedAccuracyService.log [as runOptimizedBacktest] (app/lib/OptimizedAccuracyService.ts:362:17)

    console.log
      [OptimizedAccuracyService] Cache hit for TEST

      at OptimizedAccuracyService.log [as getOptimizedParams] (app/lib/OptimizedAccuracyService.ts:96:21)

    console.log
      [OptimizedAccuracyService] Backtest completed in 1.84ms

      at OptimizedAccuracyService.log [as runOptimizedBacktest] (app/lib/OptimizedAccuracyService.ts:362:17)

    console.log
      [OptimizedAccuracyService] Cache miss, optimizing parameters for TEST

      at OptimizedAccuracyService.log [as getOptimizedParams] (app/lib/OptimizedAccuracyService.ts:101:17)

    console.log
      [OptimizedAccuracyService] Backtest completed in 1.23ms

      at OptimizedAccuracyService.log [as runOptimizedBacktest] (app/lib/OptimizedAccuracyService.ts:362:17)

    console.log
      [OptimizedAccuracyService] Cache miss, optimizing parameters for TEST

      at OptimizedAccuracyService.log [as getOptimizedParams] (app/lib/OptimizedAccuracyService.ts:101:17)

    console.log
      [OptimizedAccuracyService] Backtest completed in 6.18ms

      at OptimizedAccuracyService.log [as runOptimizedBacktest] (app/lib/OptimizedAccuracyService.ts:362:17)

    console.log
      [OptimizedAccuracyService] Cache miss, optimizing parameters for TEST

      at OptimizedAccuracyService.log [as getOptimizedParams] (app/lib/OptimizedAccuracyService.ts:101:17)

    console.log
      [OptimizedAccuracyService] Cache miss, optimizing parameters for TEST

      at OptimizedAccuracyService.log [as getOptimizedParams] (app/lib/OptimizedAccuracyService.ts:101:17)

FAIL app/lib/__tests__/OptimizedBacktest.perf.test.ts (6.057 s)
  ‚óè Console

    console.log
      [OptimizedAccuracyService] Cache miss, optimizing parameters for TEST

      at OptimizedAccuracyService.log [as getOptimizedParams] (app/lib/OptimizedAccuracyService.ts:101:17)

    console.log
      [OptimizedAccuracyService] Backtest completed in 77.57ms

      at OptimizedAccuracyService.log [as runOptimizedBacktest] (app/lib/OptimizedAccuracyService.ts:362:17)

    console.log
      [1„É∂ÊúàÂàÜ] OptimizedAccuracyService: 89.37ms

      at Object.log (app/lib/__tests__/OptimizedBacktest.perf.test.ts:72:17)

    console.log
      [1„É∂ÊúàÂàÜ] AccuracyServiceÔºàÊóßÔºâ: 1.02ms

      at Object.log (app/lib/__tests__/OptimizedBacktest.perf.test.ts:96:17)

    console.log
      [OptimizedAccuracyService] Cache miss, optimizing parameters for TEST

      at OptimizedAccuracyService.log [as getOptimizedParams] (app/lib/OptimizedAccuracyService.ts:101:17)

    console.log
      [OptimizedAccuracyService] Backtest completed in 1.18ms

      at OptimizedAccuracyService.log [as runOptimizedBacktest] (app/lib/OptimizedAccuracyService.ts:362:17)

    console.log
      [OptimizedAccuracyService] Cache miss, optimizing parameters for TEST

      at OptimizedAccuracyService.log [as getOptimizedParams] (app/lib/OptimizedAccuracyService.ts:101:17)

    console.log
      [OptimizedAccuracyService] Backtest completed in 7.61ms

      at OptimizedAccuracyService.log [as runOptimizedBacktest] (app/lib/OptimizedAccuracyService.ts:362:17)

    console.log
      [3„É∂ÊúàÂàÜ] OptimizedAccuracyService: 19.61ms

      at Object.log (app/lib/__tests__/OptimizedBacktest.perf.test.ts:72:17)

    console.log
      [3„É∂ÊúàÂàÜ] AccuracyServiceÔºàÊóßÔºâ: 47.68ms

      at Object.log (app/lib/__tests__/OptimizedBacktest.perf.test.ts:96:17)

    console.log
      [OptimizedAccuracyService] Cache miss, optimizing parameters for TEST

      at OptimizedAccuracyService.log [as getOptimizedParams] (app/lib/OptimizedAccuracyService.ts:101:17)

    console.log
      [OptimizedAccuracyService] Backtest completed in 1.88ms

      at OptimizedAccuracyService.log [as runOptimizedBacktest] (app/lib/OptimizedAccuracyService.ts:362:17)

    console.log
      [OptimizedAccuracyService] Cache miss, optimizing parameters for TEST

      at OptimizedAccuracyService.log [as getOptimizedParams] (app/lib/OptimizedAccuracyService.ts:101:17)

    console.log
      [OptimizedAccuracyService] Backtest completed in 25.89ms

      at OptimizedAccuracyService.log [as runOptimizedBacktest] (app/lib/OptimizedAccuracyService.ts:362:17)

    console.log
      [1Âπ¥ÂàÜÔºàÂñ∂Ê•≠Êó•Ôºâ] OptimizedAccuracyService: 27.85ms

      at Object.log (app/lib/__tests__/OptimizedBacktest.perf.test.ts:72:17)

    console.log
      [1Âπ¥ÂàÜÔºàÂñ∂Ê•≠Êó•Ôºâ] AccuracyServiceÔºàÊóßÔºâ: 163.68ms

      at Object.log (app/lib/__tests__/OptimizedBacktest.perf.test.ts:96:17)

    console.log
      [OptimizedAccuracyService] Cache miss, optimizing parameters for TEST

      at OptimizedAccuracyService.log [as getOptimizedParams] (app/lib/OptimizedAccuracyService.ts:101:17)

    console.log
      [OptimizedAccuracyService] Backtest completed in 20.58ms

      at OptimizedAccuracyService.log [as runOptimizedBacktest] (app/lib/OptimizedAccuracyService.ts:362:17)

    console.log
      [OptimizedAccuracyService] Cache miss, optimizing parameters for TEST

      at OptimizedAccuracyService.log [as getOptimizedParams] (app/lib/OptimizedAccuracyService.ts:101:17)

    console.log
      [OptimizedAccuracyService] Backtest completed in 6.65ms

      at OptimizedAccuracyService.log [as runOptimizedBacktest] (app/lib/OptimizedAccuracyService.ts:362:17)

    console.log
      [OptimizedAccuracyService] Cache hit for TEST

      at OptimizedAccuracyService.log [as getOptimizedParams] (app/lib/OptimizedAccuracyService.ts:96:21)

    console.log
      [OptimizedAccuracyService] Backtest completed in 1.91ms

      at OptimizedAccuracyService.log [as runOptimizedBacktest] (app/lib/OptimizedAccuracyService.ts:362:17)

    console.log
      [„Ç≠„É£„ÉÉ„Ç∑„É•„ÉÜ„Çπ„Éà] 1ÂõûÁõÆ: 7.99ms, 2ÂõûÁõÆ: 14.89ms

      at Object.log (app/lib/__tests__/OptimizedBacktest.perf.test.ts:148:15)

    console.log
      [OptimizedAccuracyService] Cache miss, optimizing parameters for TEST

      at OptimizedAccuracyService.log [as getOptimizedParams] (app/lib/OptimizedAccuracyService.ts:101:17)

    console.log
      [OptimizedAccuracyService] Backtest completed in 10.45ms

      at OptimizedAccuracyService.log [as runOptimizedBacktest] (app/lib/OptimizedAccuracyService.ts:362:17)

    console.log
      [OptimizedAccuracyService] Cache miss, optimizing parameters for TEST

      at OptimizedAccuracyService.log [as getOptimizedParams] (app/lib/OptimizedAccuracyService.ts:101:17)
          at Array.forEach (<anonymous>)

    console.log
      [OptimizedAccuracyService] Backtest completed in 5.76ms

      at OptimizedAccuracyService.log [as runOptimizedBacktest] (app/lib/OptimizedAccuracyService.ts:362:17)
          at Array.forEach (<anonymous>)

    console.log
      [OptimizedAccuracyService] Cache miss, optimizing parameters for TEST

      at OptimizedAccuracyService.log [as getOptimizedParams] (app/lib/OptimizedAccuracyService.ts:101:17)
          at Array.forEach (<anonymous>)

    console.log
      [OptimizedAccuracyService] Backtest completed in 6.95ms

      at OptimizedAccuracyService.log [as runOptimizedBacktest] (app/lib/OptimizedAccuracyService.ts:362:17)
          at Array.forEach (<anonymous>)

    console.log
      [OptimizedAccuracyService] Cache miss, optimizing parameters for TEST

      at OptimizedAccuracyService.log [as getOptimizedParams] (app/lib/OptimizedAccuracyService.ts:101:17)
          at Array.forEach (<anonymous>)

    console.log
      [OptimizedAccuracyService] Backtest completed in 8.87ms

      at OptimizedAccuracyService.log [as runOptimizedBacktest] (app/lib/OptimizedAccuracyService.ts:362:17)
          at Array.forEach (<anonymous>)

    console.log
      Ë®àÁÆóÈáè„ÉÜ„Çπ„Éà: 100‚Üí200Êó•: 0.50ÂÄç, 200‚Üí400Êó•: 1.20ÂÄç

      at Object.log (app/lib/__tests__/OptimizedBacktest.perf.test.ts:204:13)

  ‚óè „Éê„ÉÉ„ÇØ„ÉÜ„Çπ„ÉàË®àÁÆó„ÅÆ„Éë„Éï„Ç©„Éº„Éû„É≥„Çπ„ÉÜ„Çπ„Éà ‚Ä∫ 1Âπ¥ÂàÜÔºàÂñ∂Ê•≠Êó•Ôºâ„ÅÆ„Éá„Éº„ÇøÔºà252Êó•Ôºâ ‚Ä∫ ‰∏°ÂÆüË£Ö„ÅÆÁµêÊûú„Åå‰∏ÄËá¥„Åô„Çã

    expect(received).toBe(expected) // Object.is equality

    Expected: 0
    Received: 2

    [0m [90m 115 |[39m
     [90m 116 |[39m         [90m// ‰∏ªË¶Å„Å™ÊåáÊ®ô„Åå‰∏ÄËá¥„Åô„Çã„Åì„Å®„ÇíÁ¢∫Ë™ç[39m
    [31m[1m>[22m[39m[90m 117 |[39m         expect(optimizedResult[33m.[39mtotalTrades)[33m.[39mtoBe(originalResult[33m.[39mtotalTrades)[33m;[39m
     [90m     |[39m                                             [31m[1m^[22m[39m
     [90m 118 |[39m         expect(optimizedResult[33m.[39mwinningTrades)[33m.[39mtoBe(originalResult[33m.[39mwinningTrades)[33m;[39m
     [90m 119 |[39m         expect(optimizedResult[33m.[39mlosingTrades)[33m.[39mtoBe(originalResult[33m.[39mlosingTrades)[33m;[39m
     [90m 120 |[39m         expect(optimizedResult[33m.[39mwinRate)[33m.[39mtoBeCloseTo(originalResult[33m.[39mwinRate[33m,[39m [35m1[39m)[33m;[39m[0m

      at Object.toBe (app/lib/__tests__/OptimizedBacktest.perf.test.ts:117:45)

  ‚óè „Éê„ÉÉ„ÇØ„ÉÜ„Çπ„ÉàË®àÁÆó„ÅÆ„Éë„Éï„Ç©„Éº„Éû„É≥„Çπ„ÉÜ„Çπ„Éà ‚Ä∫ „Ç≠„É£„ÉÉ„Ç∑„É•Ê©üËÉΩ„ÅÆ„ÉÜ„Çπ„Éà ‚Ä∫ Âêå„Åò„Éá„Éº„Çø„ÅÆ2ÂõûÁõÆ„ÅÆË®àÁÆó„ÅØ„Ç≠„É£„ÉÉ„Ç∑„É•„Åã„ÇâÂèñÂæó„Åï„Çå„Çã

    expect(received).toBeLessThan(expected)

    Expected: < 3.9944500000001426
    Received:   14.892799999999625

    [0m [90m 152 |[39m
     [90m 153 |[39m       [90m// 2ÂõûÁõÆ„ÅØÂ§ßÂπÖ„Å´È´òÈÄüÔºà„Ç≠„É£„ÉÉ„Ç∑„É•„Éí„ÉÉ„ÉàÔºâ[39m
    [31m[1m>[22m[39m[90m 154 |[39m       expect(executionTime2)[33m.[39mtoBeLessThan(executionTime1 [33m*[39m [35m0.5[39m)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 155 |[39m     })[33m;[39m
     [90m 156 |[39m   })[33m;[39m
     [90m 157 |[39m[0m

      at Object.toBeLessThan (app/lib/__tests__/OptimizedBacktest.perf.test.ts:154:30)

  ‚óè Ë®àÁÆóÈáè„ÅÆÁêÜË´ñÁöÑÂàÜÊûê ‚Ä∫ OptimizedAccuracyService„ÅÆË®àÁÆóÈáè„ÅØO(N)„Åß„ÅÇ„Çã

    expect(received).toBeGreaterThan(expected)

    Expected: > 1.5
    Received:   0.5041822522133583

    [0m [90m 205 |[39m
     [90m 206 |[39m     [90m// Á∑öÂΩ¢ÊôÇÈñì„ÅÆË®±ÂÆπÁØÑÂõ≤Ôºà1.5 ~ 3.0ÂÄçÔºâ[39m
    [31m[1m>[22m[39m[90m 207 |[39m     expect(ratio1)[33m.[39mtoBeGreaterThan([35m1.5[39m)[33m;[39m
     [90m     |[39m                    [31m[1m^[22m[39m
     [90m 208 |[39m     expect(ratio1)[33m.[39mtoBeLessThan([35m3.0[39m)[33m;[39m
     [90m 209 |[39m     expect(ratio2)[33m.[39mtoBeGreaterThan([35m1.5[39m)[33m;[39m
     [90m 210 |[39m     expect(ratio2)[33m.[39mtoBeLessThan([35m3.0[39m)[33m;[39m[0m

      at Object.toBeGreaterThan (app/lib/__tests__/OptimizedBacktest.perf.test.ts:207:20)

PASS app/__tests__/alpha-vantage.test.ts
FAIL app/__tests__/tradingCore.test.ts (7.541 s)
  ‚óè Console

    console.log
      [UnifiedTradingPlatform] Starting...

      at UnifiedTradingPlatform.log [as start] (app/lib/tradingCore/UnifiedTradingPlatform.ts:162:13)

    console.log
      [MultiExchangeDataFeed] Starting connections to all exchanges...

      at MultiExchangeDataFeed.log [as connect] (app/lib/marketDataFeed/MultiExchangeDataFeed.ts:135:13)

    console.log
      [SentimentAnalysisEngine] Starting...

      at SentimentAnalysisEngine.log [as start] (app/lib/sentiment/SentimentAnalysisEngine.ts:210:13)

    console.log
      [PaperTrading] Started with capital: 1000000

      at PaperTradingEnvironment.log [as start] (app/lib/paperTrading/PaperTradingEnvironment.ts:169:13)

    console.log
      [AlgorithmicExecutionEngine] Started

      at AlgorithmicExecutionEngine.log [as start] (app/lib/execution/AlgorithmicExecutionEngine.ts:120:13)

    console.log
      [UnifiedTradingPlatform] Started successfully

      at UnifiedTradingPlatform.log [as start] (app/lib/tradingCore/UnifiedTradingPlatform.ts:192:15)

    console.log
      [UnifiedTradingPlatform] Stopping...

      at UnifiedTradingPlatform.log [as stop] (app/lib/tradingCore/UnifiedTradingPlatform.ts:204:13)

    console.log
      [MultiExchangeDataFeed] Disconnecting from all exchanges...

      at MultiExchangeDataFeed.log [as disconnect] (app/lib/marketDataFeed/MultiExchangeDataFeed.ts:149:13)

    console.log
      [AlgorithmicExecutionEngine] Stopped

      at AlgorithmicExecutionEngine.log [as stop] (app/lib/execution/AlgorithmicExecutionEngine.ts:133:13)

    console.log
      [PaperTrading] Stopped

      at PaperTradingEnvironment.log [as stop] (app/lib/paperTrading/PaperTradingEnvironment.ts:178:13)

    console.log
      [UnifiedTradingPlatform] Stopped

      at UnifiedTradingPlatform.log [as stop] (app/lib/tradingCore/UnifiedTradingPlatform.ts:218:13)

    console.log
      [UnifiedTradingPlatform] Starting...

      at UnifiedTradingPlatform.log [as start] (app/lib/tradingCore/UnifiedTradingPlatform.ts:162:13)

    console.log
      [MultiExchangeDataFeed] Starting connections to all exchanges...

      at MultiExchangeDataFeed.log [as connect] (app/lib/marketDataFeed/MultiExchangeDataFeed.ts:135:13)

    console.log
      [SentimentAnalysisEngine] Starting...

      at SentimentAnalysisEngine.log [as start] (app/lib/sentiment/SentimentAnalysisEngine.ts:210:13)

    console.log
      [PaperTrading] Started with capital: 1000000

      at PaperTradingEnvironment.log [as start] (app/lib/paperTrading/PaperTradingEnvironment.ts:169:13)

    console.log
      [AlgorithmicExecutionEngine] Started

      at AlgorithmicExecutionEngine.log [as start] (app/lib/execution/AlgorithmicExecutionEngine.ts:120:13)

    console.log
      [UnifiedTradingPlatform] Started successfully

      at UnifiedTradingPlatform.log [as start] (app/lib/tradingCore/UnifiedTradingPlatform.ts:192:15)

    console.log
      [UnifiedTradingPlatform] Starting...

      at UnifiedTradingPlatform.log [as start] (app/lib/tradingCore/UnifiedTradingPlatform.ts:162:13)

    console.log
      [MultiExchangeDataFeed] Starting connections to all exchanges...

      at MultiExchangeDataFeed.log [as connect] (app/lib/marketDataFeed/MultiExchangeDataFeed.ts:135:13)

    console.log
      [SentimentAnalysisEngine] Starting...

      at SentimentAnalysisEngine.log [as start] (app/lib/sentiment/SentimentAnalysisEngine.ts:210:13)

    console.log
      [PaperTrading] Started with capital: 1000000

      at PaperTradingEnvironment.log [as start] (app/lib/paperTrading/PaperTradingEnvironment.ts:169:13)

    console.log
      [AlgorithmicExecutionEngine] Started

      at AlgorithmicExecutionEngine.log [as start] (app/lib/execution/AlgorithmicExecutionEngine.ts:120:13)

    console.log
      [UnifiedTradingPlatform] Started successfully

      at UnifiedTradingPlatform.log [as start] (app/lib/tradingCore/UnifiedTradingPlatform.ts:192:15)

    console.log
      [UnifiedTradingPlatform] Starting...

      at UnifiedTradingPlatform.log [as start] (app/lib/tradingCore/UnifiedTradingPlatform.ts:162:13)

    console.log
      [MultiExchangeDataFeed] Starting connections to all exchanges...

      at MultiExchangeDataFeed.log [as connect] (app/lib/marketDataFeed/MultiExchangeDataFeed.ts:135:13)

    console.log
      [SentimentAnalysisEngine] Starting...

      at SentimentAnalysisEngine.log [as start] (app/lib/sentiment/SentimentAnalysisEngine.ts:210:13)

    console.log
      [PaperTrading] Started with capital: 1000000

      at PaperTradingEnvironment.log [as start] (app/lib/paperTrading/PaperTradingEnvironment.ts:169:13)

    console.log
      [AlgorithmicExecutionEngine] Started

      at AlgorithmicExecutionEngine.log [as start] (app/lib/execution/AlgorithmicExecutionEngine.ts:120:13)

    console.log
      [UnifiedTradingPlatform] Started successfully

      at UnifiedTradingPlatform.log [as start] (app/lib/tradingCore/UnifiedTradingPlatform.ts:192:15)

    console.log
      [UnifiedTradingPlatform] Starting...

      at UnifiedTradingPlatform.log [as start] (app/lib/tradingCore/UnifiedTradingPlatform.ts:162:13)

    console.log
      [MultiExchangeDataFeed] Starting connections to all exchanges...

      at MultiExchangeDataFeed.log [as connect] (app/lib/marketDataFeed/MultiExchangeDataFeed.ts:135:13)

    console.log
      [SentimentAnalysisEngine] Starting...

      at SentimentAnalysisEngine.log [as start] (app/lib/sentiment/SentimentAnalysisEngine.ts:210:13)

    console.log
      [PaperTrading] Started with capital: 100000

      at PaperTradingEnvironment.log [as start] (app/lib/paperTrading/PaperTradingEnvironment.ts:169:13)

    console.log
      [AlgorithmicExecutionEngine] Started

      at AlgorithmicExecutionEngine.log [as start] (app/lib/execution/AlgorithmicExecutionEngine.ts:120:13)

    console.log
      [UnifiedTradingPlatform] Started successfully

      at UnifiedTradingPlatform.log [as start] (app/lib/tradingCore/UnifiedTradingPlatform.ts:192:15)

    console.warn
      [PaperTrading] Insufficient buying power

    [0m [90m 237 |[39m     [90m// Check buying power[39m
     [90m 238 |[39m     [36mif[39m (totalCost [33m>[39m [36mthis[39m[33m.[39mportfolio[33m.[39mbuyingPower) {
    [31m[1m>[22m[39m[90m 239 |[39m       console[33m.[39mwarn([32m'[PaperTrading] Insufficient buying power'[39m)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 240 |[39m       [36mthis[39m[33m.[39memit([32m'order_rejected'[39m[33m,[39m { reason[33m:[39m [32m'insufficient_funds'[39m[33m,[39m symbol[33m,[39m quantity })[33m;[39m
     [90m 241 |[39m       [36mreturn[39m [36mnull[39m[33m;[39m
     [90m 242 |[39m     }[0m

      at PaperTradingEnvironment.warn [as buy] (app/lib/paperTrading/PaperTradingEnvironment.ts:239:15)
      at UnifiedTradingPlatform.buy [as placeOrder] (app/lib/tradingCore/UnifiedTradingPlatform.ts:479:34)
      at Object.placeOrder (app/__tests__/tradingCore.test.ts:168:22)

  ‚óè UnifiedTradingPlatform ‚Ä∫ portfolio management ‚Ä∫ should calculate P&L correctly

    expect(received).toBeGreaterThanOrEqual(expected)

    Expected: >= 0
    Received:    -0.1

    [0m [90m 147 |[39m       [36mconst[39m positions [33m=[39m platform[33m.[39mgetPortfolio()[33m.[39mpositions[33m;[39m
     [90m 148 |[39m       [36mif[39m (positions[33m.[39mlength [33m>[39m [35m0[39m) {
    [31m[1m>[22m[39m[90m 149 |[39m         expect(positions[[35m0[39m][33m.[39munrealizedPnL)[33m.[39mtoBeGreaterThanOrEqual([35m0[39m)[33m;[39m
     [90m     |[39m                                            [31m[1m^[22m[39m
     [90m 150 |[39m       }
     [90m 151 |[39m     })[33m;[39m
     [90m 152 |[39m   })[33m;[39m[0m

      at Object.toBeGreaterThanOrEqual (app/__tests__/tradingCore.test.ts:149:44)

  ‚óè UnifiedTradingPlatform ‚Ä∫ risk management ‚Ä∫ should prevent overexposure

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 169 |[39m       
     [90m 170 |[39m       [36mconst[39m positions [33m=[39m platform[33m.[39mgetPortfolio()[33m.[39mpositions[33m;[39m
    [31m[1m>[22m[39m[90m 171 |[39m       expect(positions[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 172 |[39m       expect(positions[[35m0[39m][33m.[39mquantity)[33m.[39mtoBeLessThanOrEqual([35m0.025[39m)[33m;[39m [90m// ~10% of $100k at $40k price[39m
     [90m 173 |[39m     })[33m;[39m
     [90m 174 |[39m   })[33m;[39m[0m

      at Object.toBeGreaterThan (app/__tests__/tradingCore.test.ts:171:32)

FAIL app/__tests__/tradingCore.test.tsx (7.681 s)
  ‚óè Console

    console.log
      [UnifiedTradingPlatform] Starting...

      at UnifiedTradingPlatform.log [as start] (app/lib/tradingCore/UnifiedTradingPlatform.ts:162:13)

    console.log
      [MultiExchangeDataFeed] Starting connections to all exchanges...

      at MultiExchangeDataFeed.log [as connect] (app/lib/marketDataFeed/MultiExchangeDataFeed.ts:135:13)

    console.log
      [SentimentAnalysisEngine] Starting...

      at SentimentAnalysisEngine.log [as start] (app/lib/sentiment/SentimentAnalysisEngine.ts:210:13)

    console.log
      [PaperTrading] Started with capital: 1000000

      at PaperTradingEnvironment.log [as start] (app/lib/paperTrading/PaperTradingEnvironment.ts:169:13)

    console.log
      [AlgorithmicExecutionEngine] Started

      at AlgorithmicExecutionEngine.log [as start] (app/lib/execution/AlgorithmicExecutionEngine.ts:120:13)

    console.log
      [UnifiedTradingPlatform] Started successfully

      at UnifiedTradingPlatform.log [as start] (app/lib/tradingCore/UnifiedTradingPlatform.ts:192:15)

    console.log
      [UnifiedTradingPlatform] Stopping...

      at UnifiedTradingPlatform.log [as stop] (app/lib/tradingCore/UnifiedTradingPlatform.ts:204:13)

    console.log
      [MultiExchangeDataFeed] Disconnecting from all exchanges...

      at MultiExchangeDataFeed.log [as disconnect] (app/lib/marketDataFeed/MultiExchangeDataFeed.ts:149:13)

    console.log
      [AlgorithmicExecutionEngine] Stopped

      at AlgorithmicExecutionEngine.log [as stop] (app/lib/execution/AlgorithmicExecutionEngine.ts:133:13)

    console.log
      [PaperTrading] Stopped

      at PaperTradingEnvironment.log [as stop] (app/lib/paperTrading/PaperTradingEnvironment.ts:178:13)

    console.log
      [UnifiedTradingPlatform] Stopped

      at UnifiedTradingPlatform.log [as stop] (app/lib/tradingCore/UnifiedTradingPlatform.ts:218:13)

    console.log
      [UnifiedTradingPlatform] Starting...

      at UnifiedTradingPlatform.log [as start] (app/lib/tradingCore/UnifiedTradingPlatform.ts:162:13)

    console.log
      [MultiExchangeDataFeed] Starting connections to all exchanges...

      at MultiExchangeDataFeed.log [as connect] (app/lib/marketDataFeed/MultiExchangeDataFeed.ts:135:13)

    console.log
      [SentimentAnalysisEngine] Starting...

      at SentimentAnalysisEngine.log [as start] (app/lib/sentiment/SentimentAnalysisEngine.ts:210:13)

    console.log
      [PaperTrading] Started with capital: 1000000

      at PaperTradingEnvironment.log [as start] (app/lib/paperTrading/PaperTradingEnvironment.ts:169:13)

    console.log
      [AlgorithmicExecutionEngine] Started

      at AlgorithmicExecutionEngine.log [as start] (app/lib/execution/AlgorithmicExecutionEngine.ts:120:13)

    console.log
      [UnifiedTradingPlatform] Started successfully

      at UnifiedTradingPlatform.log [as start] (app/lib/tradingCore/UnifiedTradingPlatform.ts:192:15)

    console.log
      [UnifiedTradingPlatform] Starting...

      at UnifiedTradingPlatform.log [as start] (app/lib/tradingCore/UnifiedTradingPlatform.ts:162:13)

    console.log
      [MultiExchangeDataFeed] Starting connections to all exchanges...

      at MultiExchangeDataFeed.log [as connect] (app/lib/marketDataFeed/MultiExchangeDataFeed.ts:135:13)

    console.log
      [SentimentAnalysisEngine] Starting...

      at SentimentAnalysisEngine.log [as start] (app/lib/sentiment/SentimentAnalysisEngine.ts:210:13)

    console.log
      [PaperTrading] Started with capital: 1000000

      at PaperTradingEnvironment.log [as start] (app/lib/paperTrading/PaperTradingEnvironment.ts:169:13)

    console.log
      [AlgorithmicExecutionEngine] Started

      at AlgorithmicExecutionEngine.log [as start] (app/lib/execution/AlgorithmicExecutionEngine.ts:120:13)

    console.log
      [UnifiedTradingPlatform] Started successfully

      at UnifiedTradingPlatform.log [as start] (app/lib/tradingCore/UnifiedTradingPlatform.ts:192:15)

    console.log
      [UnifiedTradingPlatform] Starting...

      at UnifiedTradingPlatform.log [as start] (app/lib/tradingCore/UnifiedTradingPlatform.ts:162:13)

    console.log
      [MultiExchangeDataFeed] Starting connections to all exchanges...

      at MultiExchangeDataFeed.log [as connect] (app/lib/marketDataFeed/MultiExchangeDataFeed.ts:135:13)

    console.log
      [SentimentAnalysisEngine] Starting...

      at SentimentAnalysisEngine.log [as start] (app/lib/sentiment/SentimentAnalysisEngine.ts:210:13)

    console.log
      [PaperTrading] Started with capital: 1000000

      at PaperTradingEnvironment.log [as start] (app/lib/paperTrading/PaperTradingEnvironment.ts:169:13)

    console.log
      [AlgorithmicExecutionEngine] Started

      at AlgorithmicExecutionEngine.log [as start] (app/lib/execution/AlgorithmicExecutionEngine.ts:120:13)

    console.log
      [UnifiedTradingPlatform] Started successfully

      at UnifiedTradingPlatform.log [as start] (app/lib/tradingCore/UnifiedTradingPlatform.ts:192:15)

    console.log
      [UnifiedTradingPlatform] Starting...

      at UnifiedTradingPlatform.log [as start] (app/lib/tradingCore/UnifiedTradingPlatform.ts:162:13)

    console.log
      [MultiExchangeDataFeed] Starting connections to all exchanges...

      at MultiExchangeDataFeed.log [as connect] (app/lib/marketDataFeed/MultiExchangeDataFeed.ts:135:13)

    console.log
      [SentimentAnalysisEngine] Starting...

      at SentimentAnalysisEngine.log [as start] (app/lib/sentiment/SentimentAnalysisEngine.ts:210:13)

    console.log
      [PaperTrading] Started with capital: 100000

      at PaperTradingEnvironment.log [as start] (app/lib/paperTrading/PaperTradingEnvironment.ts:169:13)

    console.log
      [AlgorithmicExecutionEngine] Started

      at AlgorithmicExecutionEngine.log [as start] (app/lib/execution/AlgorithmicExecutionEngine.ts:120:13)

    console.log
      [UnifiedTradingPlatform] Started successfully

      at UnifiedTradingPlatform.log [as start] (app/lib/tradingCore/UnifiedTradingPlatform.ts:192:15)

    console.warn
      [PaperTrading] Insufficient buying power

    [0m [90m 237 |[39m     [90m// Check buying power[39m
     [90m 238 |[39m     [36mif[39m (totalCost [33m>[39m [36mthis[39m[33m.[39mportfolio[33m.[39mbuyingPower) {
    [31m[1m>[22m[39m[90m 239 |[39m       console[33m.[39mwarn([32m'[PaperTrading] Insufficient buying power'[39m)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 240 |[39m       [36mthis[39m[33m.[39memit([32m'order_rejected'[39m[33m,[39m { reason[33m:[39m [32m'insufficient_funds'[39m[33m,[39m symbol[33m,[39m quantity })[33m;[39m
     [90m 241 |[39m       [36mreturn[39m [36mnull[39m[33m;[39m
     [90m 242 |[39m     }[0m

      at PaperTradingEnvironment.warn [as buy] (app/lib/paperTrading/PaperTradingEnvironment.ts:239:15)
      at UnifiedTradingPlatform.buy [as placeOrder] (app/lib/tradingCore/UnifiedTradingPlatform.ts:479:34)
      at Object.placeOrder (app/__tests__/tradingCore.test.tsx:168:22)

  ‚óè UnifiedTradingPlatform ‚Ä∫ portfolio management ‚Ä∫ should calculate P&L correctly

    expect(received).toBeGreaterThanOrEqual(expected)

    Expected: >= 0
    Received:    -0.1

    [0m [90m 147 |[39m       [36mconst[39m positions [33m=[39m platform[33m.[39mgetPortfolio()[33m.[39mpositions[33m;[39m
     [90m 148 |[39m       [36mif[39m (positions[33m.[39mlength [33m>[39m [35m0[39m) {
    [31m[1m>[22m[39m[90m 149 |[39m         expect(positions[[35m0[39m][33m.[39munrealizedPnL)[33m.[39mtoBeGreaterThanOrEqual([35m0[39m)[33m;[39m
     [90m     |[39m                                            [31m[1m^[22m[39m
     [90m 150 |[39m       }
     [90m 151 |[39m     })[33m;[39m
     [90m 152 |[39m   })[33m;[39m[0m

      at Object.toBeGreaterThanOrEqual (app/__tests__/tradingCore.test.tsx:149:44)

  ‚óè UnifiedTradingPlatform ‚Ä∫ risk management ‚Ä∫ should prevent overexposure

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 169 |[39m       
     [90m 170 |[39m       [36mconst[39m positions [33m=[39m platform[33m.[39mgetPortfolio()[33m.[39mpositions[33m;[39m
    [31m[1m>[22m[39m[90m 171 |[39m       expect(positions[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 172 |[39m       expect(positions[[35m0[39m][33m.[39mquantity)[33m.[39mtoBeLessThanOrEqual([35m0.025[39m)[33m;[39m [90m// ~10% of $100k at $40k price[39m
     [90m 173 |[39m     })[33m;[39m
     [90m 174 |[39m   })[33m;[39m[0m

      at Object.toBeGreaterThan (app/__tests__/tradingCore.test.tsx:171:32)

PASS app/components/__tests__/AlertPanel.test.tsx
PASS app/components/__tests__/NotificationCenter.test.tsx
PASS app/__tests__/StockChart.test.tsx
  ‚óè Console

    console.log
      [Chart Y-Axis] {
        currentPrice: 985.2834168697142,
        calculatedMin: 970.5041656166685,
        calculatedMax: 1000.0626681227598
      }

      at log (app/components/StockChart/hooks/useChartOptions.ts:36:13)

    console.log
      [Chart Y-Axis] {
        currentPrice: 985.2834168697142,
        calculatedMin: 970.5041656166685,
        calculatedMax: 1000.0626681227598
      }

      at log (app/components/StockChart/hooks/useChartOptions.ts:36:13)

    console.log
      [Chart Y-Axis] {
        currentPrice: 1006.3763032251914,
        calculatedMin: 991.2806586768135,
        calculatedMax: 1021.4719477735691
      }

      at log (app/components/StockChart/hooks/useChartOptions.ts:36:13)

    console.log
      [Chart Y-Axis] {
        currentPrice: 985.2834168697142,
        calculatedMin: 970.5041656166685,
        calculatedMax: 1000.0626681227598
      }

      at log (app/components/StockChart/hooks/useChartOptions.ts:36:13)

    console.log
      [Chart Y-Axis] {
        currentPrice: 985.2834168697142,
        calculatedMin: 970.5041656166685,
        calculatedMax: 1000.0626681227598
      }

      at log (app/components/StockChart/hooks/useChartOptions.ts:36:13)

    console.log
      [Chart Y-Axis] {
        currentPrice: 1027.4066629489723,
        calculatedMin: 1011.9955630047377,
        calculatedMax: 1042.817762893207
      }

      at log (app/components/StockChart/hooks/useChartOptions.ts:36:13)

    console.log
      [Chart Y-Axis] {
        currentPrice: 1027.4066629489723,
        calculatedMin: 1011.9955630047377,
        calculatedMax: 1042.817762893207
      }

      at log (app/components/StockChart/hooks/useChartOptions.ts:36:13)

    console.log
      [Chart Y-Axis] {
        currentPrice: 1027.4066629489723,
        calculatedMin: 1011.9955630047377,
        calculatedMax: 1042.817762893207
      }

      at log (app/components/StockChart/hooks/useChartOptions.ts:36:13)

    console.log
      [Chart Y-Axis] {
        currentPrice: 1027.4066629489723,
        calculatedMin: 1011.9955630047377,
        calculatedMax: 1042.817762893207
      }

      at log (app/components/StockChart/hooks/useChartOptions.ts:36:13)

    console.log
      [Chart Y-Axis] {
        currentPrice: 1008.5911755037663,
        calculatedMin: 993.4623078712098,
        calculatedMax: 1023.7200431363227
      }

      at log (app/components/StockChart/hooks/useChartOptions.ts:36:13)

    console.log
      [Chart Y-Axis] {
        currentPrice: 1008.5911755037663,
        calculatedMin: 993.4623078712098,
        calculatedMax: 1023.7200431363227
      }

      at log (app/components/StockChart/hooks/useChartOptions.ts:36:13)

    console.log
      [Chart Y-Axis] {
        currentPrice: 1050.6858591221896,
        calculatedMin: 1034.9255712353568,
        calculatedMax: 1066.4461470090223
      }

      at log (app/components/StockChart/hooks/useChartOptions.ts:36:13)

    console.log
      [Chart Y-Axis] {
        currentPrice: 1050.6858591221896,
        calculatedMin: 1034.9255712353568,
        calculatedMax: 1066.4461470090223
      }

      at log (app/components/StockChart/hooks/useChartOptions.ts:36:13)

    console.log
      [Chart Y-Axis] {
        currentPrice: 1050.6858591221896,
        calculatedMin: 1034.9255712353568,
        calculatedMax: 1066.4461470090223
      }

      at log (app/components/StockChart/hooks/useChartOptions.ts:36:13)

    console.log
      [Chart Y-Axis] {
        currentPrice: 997.78638886373,
        calculatedMin: 982.8195930307741,
        calculatedMax: 1012.7531846966859
      }

      at log (app/components/StockChart/hooks/useChartOptions.ts:36:13)

    console.log
      [Chart Y-Axis] {
        currentPrice: 997.78638886373,
        calculatedMin: 982.8195930307741,
        calculatedMax: 1012.7531846966859
      }

      at log (app/components/StockChart/hooks/useChartOptions.ts:36:13)

    console.log
      [Chart Y-Axis] {
        currentPrice: 997.78638886373,
        calculatedMin: 982.8195930307741,
        calculatedMax: 1012.7531846966859
      }

      at log (app/components/StockChart/hooks/useChartOptions.ts:36:13)

    console.log
      [Chart Y-Axis] {
        currentPrice: 997.78638886373,
        calculatedMin: 982.8195930307741,
        calculatedMax: 1012.7531846966859
      }

      at log (app/components/StockChart/hooks/useChartOptions.ts:36:13)

    console.log
      [Chart Y-Axis] {
        currentPrice: 989.2937440856798,
        calculatedMin: 974.4543379243946,
        calculatedMax: 1004.1331502469649
      }

      at log (app/components/StockChart/hooks/useChartOptions.ts:36:13)

    console.log
      [Chart Y-Axis] {
        currentPrice: 989.2937440856798,
        calculatedMin: 974.4543379243946,
        calculatedMax: 1004.1331502469649
      }

      at log (app/components/StockChart/hooks/useChartOptions.ts:36:13)

    console.log
      [Chart Y-Axis] {
        currentPrice: 1002.7200206328143,
        calculatedMin: 987.679220323322,
        calculatedMax: 1017.7608209423065
      }

      at log (app/components/StockChart/hooks/useChartOptions.ts:36:13)

    console.log
      [Chart Y-Axis] {
        currentPrice: 997.6019147454246,
        calculatedMin: 982.6378860242431,
        calculatedMax: 1012.5659434666059
      }

      at log (app/components/StockChart/hooks/useChartOptions.ts:36:13)

    console.log
      [Chart Y-Axis] {
        currentPrice: 974.5118860042692,
        calculatedMin: 959.8942077142051,
        calculatedMax: 989.1295642943331
      }

      at log (app/components/StockChart/hooks/useChartOptions.ts:36:13)

PASS app/lib/__tests__/AccuracyService.test.ts
PASS app/__tests__/PositionTable.test.tsx
PASS app/lib/__tests__/ExitStrategy.test.ts
PASS app/hooks/__tests__/useWebSocket.test.ts
  ‚óè Console

    console.log
      [WebSocket] Connecting to ws://test.com...

      at WebSocketClient.log [as connect] (app/lib/websocket.ts:150:15)

    console.log
      [WebSocket] Connected

      at MockWebSocket.log [as onopen] (app/lib/websocket.ts:155:17)

    console.log
      WebSocket connected to: ws://test.com

      at Object.log [as onOpen] (app/hooks/useWebSocket.ts:61:19)

    console.log
      [WebSocket] Disconnected

      at WebSocketClient.log [as disconnect] (app/lib/websocket.ts:317:13)
          at Array.forEach (<anonymous>)

    console.log
      [WebSocket] Connecting to ws://test.com...

      at WebSocketClient.log [as connect] (app/lib/websocket.ts:150:15)

    console.log
      [WebSocket] Connected

      at MockWebSocket.log [as onopen] (app/lib/websocket.ts:155:17)

    console.log
      WebSocket connected to: ws://test.com

      at Object.log [as onOpen] (app/hooks/useWebSocket.ts:61:19)

    console.log
      [WebSocket] Disconnected

      at WebSocketClient.log [as disconnect] (app/lib/websocket.ts:317:13)
          at Array.forEach (<anonymous>)

    console.log
      [WebSocket] Connecting to ws://test.com...

      at WebSocketClient.log [as connect] (app/lib/websocket.ts:150:15)

    console.log
      [WebSocket] Connected

      at MockWebSocket.log [as onopen] (app/lib/websocket.ts:155:17)

    console.log
      WebSocket connected to: ws://test.com

      at Object.log [as onOpen] (app/hooks/useWebSocket.ts:61:19)

    console.log
      [WebSocket] Connection closed: 1006 Abnormal Closure

      at MockWebSocket.log [as onclose] (app/lib/websocket.ts:187:17)

    console.log
      WebSocket closed: 1006 Abnormal Closure

      at Object.log [as onClose] (app/hooks/useWebSocket.ts:70:19)

    console.log
      [WebSocket] Scheduling reconnect in 2000ms (attempt 1/10)

      at WebSocketClient.log [as scheduleReconnect] (app/lib/websocket.ts:225:13)

    console.log
      [WebSocket] Connecting to ws://test.com...

      at WebSocketClient.log [as connect] (app/lib/websocket.ts:150:15)

    console.log
      [WebSocket] Connected

      at MockWebSocket.log [as onopen] (app/lib/websocket.ts:155:17)

    console.log
      WebSocket connected to: ws://test.com

      at Object.log [as onOpen] (app/hooks/useWebSocket.ts:61:19)

    console.log
      [WebSocket] Disconnected

      at WebSocketClient.log [as disconnect] (app/lib/websocket.ts:317:13)
          at Array.forEach (<anonymous>)

    console.log
      [WebSocket] Connecting to ws://test.com...

      at WebSocketClient.log [as connect] (app/lib/websocket.ts:150:15)

    console.log
      [WebSocket] Connected

      at MockWebSocket.log [as onopen] (app/lib/websocket.ts:155:17)

    console.log
      WebSocket connected to: ws://test.com

      at Object.log [as onOpen] (app/hooks/useWebSocket.ts:61:19)

    console.log
      [WebSocket] Disconnected

      at WebSocketClient.log [as disconnect] (app/lib/websocket.ts:317:13)
          at Array.forEach (<anonymous>)

    console.log
      [WebSocket] Connecting to ws://test.com...

      at WebSocketClient.log [as connect] (app/lib/websocket.ts:150:15)

    console.log
      [WebSocket] Connected

      at MockWebSocket.log [as onopen] (app/lib/websocket.ts:155:17)

    console.log
      WebSocket connected to: ws://test.com

      at Object.log [as onOpen] (app/hooks/useWebSocket.ts:61:19)

    console.log
      [WebSocket] Disconnected

      at WebSocketClient.log [as disconnect] (app/lib/websocket.ts:317:13)

    console.log
      [WebSocket] Disconnected

      at WebSocketClient.log [as disconnect] (app/lib/websocket.ts:317:13)
          at Array.forEach (<anonymous>)

    console.log
      [WebSocket] Connecting to ws://test.com...

      at WebSocketClient.log [as connect] (app/lib/websocket.ts:150:15)

    console.log
      [WebSocket] Connected

      at MockWebSocket.log [as onopen] (app/lib/websocket.ts:155:17)

    console.log
      WebSocket connected to: ws://test.com

      at Object.log [as onOpen] (app/hooks/useWebSocket.ts:61:19)

    console.log
      [WebSocket] Disconnected

      at WebSocketClient.log [as disconnect] (app/lib/websocket.ts:317:13)

    console.log
      [WebSocket] Connecting to ws://test.com...

      at WebSocketClient.log [as connect] (app/lib/websocket.ts:150:15)

    console.log
      [WebSocket] Disconnected

      at WebSocketClient.log [as disconnect] (app/lib/websocket.ts:317:13)
          at Array.forEach (<anonymous>)

    console.log
      WebSocket: Connection disabled by user

      at log (app/hooks/useWebSocket.ts:45:15)

PASS app/__tests__/errors.test.ts
PASS app/components/__tests__/SignalCard.test.tsx
PASS app/__tests__/route_robustness.test.ts
  ‚óè Console

    console.error
      [2026-01-30T11:34:23.853Z] Error in market/quote: {
        name: 'Error',
        message: 'Symbol not found',
        stack: 'Error: Symbol not found\n' +
          '    at GET (C:\\gemini-thinkpad\\Ult\\trading-platform\\app\\api\\market\\route.ts:238:30)\n' +
          '    at processTicksAndRejections (node:internal/process/task_queues:105:5)\n' +
          '    at Object.<anonymous> (C:\\gemini-thinkpad\\Ult\\trading-platform\\app\\__tests__\\route_robustness.test.ts:55:22)'
      }

    [0m [90m 208 |[39m
     [90m 209 |[39m   [36mif[39m (error [36minstanceof[39m [33mError[39m) {
    [31m[1m>[22m[39m[90m 210 |[39m     console[33m.[39merror([32m`[${timestamp}] Error in ${context}:`[39m[33m,[39m {
     [90m     |[39m             [31m[1m^[22m[39m
     [90m 211 |[39m       name[33m:[39m error[33m.[39mname[33m,[39m
     [90m 212 |[39m       message[33m:[39m error[33m.[39mmessage[33m,[39m
     [90m 213 |[39m       stack[33m:[39m error[33m.[39mstack[33m,[39m[0m

      at error (app/lib/error-handler.ts:210:13)
      at logError (app/lib/error-handler.ts:153:3)
      at GET (app/api/market/route.ts:249:32)
      at Object.<anonymous> (app/__tests__/route_robustness.test.ts:55:22)

PASS app/__tests__/websocket-resilient.test.ts
  ‚óè Console

    console.log
      [WebSocket] Disconnected

      at ResilientWebSocketClient.log [as disconnect] (app/lib/websocket-resilient.ts:445:13)

    console.log
      [WebSocket] Connecting to ws://localhost:3001...

      at ResilientWebSocketClient.log [as connect] (app/lib/websocket-resilient.ts:389:15)

    console.log
      [WebSocket] Disconnected

      at ResilientWebSocketClient.log [as disconnect] (app/lib/websocket-resilient.ts:445:13)

    console.log
      [WebSocket] Connecting to ws://localhost:3001...

      at ResilientWebSocketClient.log [as connect] (app/lib/websocket-resilient.ts:389:15)

    console.log
      [WebSocket] Connected

      at MockWebSocket.log [as onopen] (app/lib/websocket-resilient.ts:479:15)

    console.log
      [WebSocket] Disconnected

      at ResilientWebSocketClient.log [as disconnect] (app/lib/websocket-resilient.ts:445:13)

    console.log
      [WebSocket] Connection closed: 1000 Client disconnecting

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Connecting to ws://localhost:3001...

      at ResilientWebSocketClient.log [as connect] (app/lib/websocket-resilient.ts:389:15)

    console.log
      [WebSocket] Connected

      at MockWebSocket.log [as onopen] (app/lib/websocket-resilient.ts:479:15)

    console.log
      [WebSocket] Disconnected

      at ResilientWebSocketClient.log [as disconnect] (app/lib/websocket-resilient.ts:445:13)

    console.log
      [WebSocket] Connection closed: 1000 Client disconnecting

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Disconnected

      at ResilientWebSocketClient.log [as disconnect] (app/lib/websocket-resilient.ts:445:13)

    console.log
      [WebSocket] Connecting to ws://localhost:3001...

      at ResilientWebSocketClient.log [as connect] (app/lib/websocket-resilient.ts:389:15)

    console.log
      [WebSocket] Connected

      at MockWebSocket.log [as onopen] (app/lib/websocket-resilient.ts:479:15)

    console.log
      [WebSocket] Connection closed: 1006 Connection lost

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 1000ms (attempt 1/3)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Reconnecting to ws://localhost:3001...

      at ResilientWebSocketClient.log [as connect] (app/lib/websocket-resilient.ts:389:15)

    console.log
      [WebSocket] Disconnected

      at ResilientWebSocketClient.log [as disconnect] (app/lib/websocket-resilient.ts:445:13)

    console.log
      [WebSocket] Connecting to ws://localhost:3001...

      at ResilientWebSocketClient.log [as connect] (app/lib/websocket-resilient.ts:389:15)

    console.log
      [WebSocket] Connected

      at MockWebSocket.log [as onopen] (app/lib/websocket-resilient.ts:479:15)

    console.log
      [WebSocket] Connection closed: 1006 Connection lost

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 980ms (attempt 1/5)

      at ResilientWebSocketClient.log (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Reconnecting to ws://localhost:3001...

      at ResilientWebSocketClient.log [as connect] (app/lib/websocket-resilient.ts:389:15)

    console.log
      [WebSocket] Connected

      at MockWebSocket.log [as onopen] (app/lib/websocket-resilient.ts:479:15)

    console.warn
      [WebSocket] Invalid state transition: RECONNECTING -> OPEN

    [0m [90m 576 |[39m
     [90m 577 |[39m     [36mif[39m ([33m![39misValidTransition(oldStatus[33m,[39m newStatus)) {
    [31m[1m>[22m[39m[90m 578 |[39m       console[33m.[39mwarn([32m`[WebSocket] Invalid state transition: ${oldStatus} -> ${newStatus}`[39m)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 579 |[39m       [36mreturn[39m[33m;[39m
     [90m 580 |[39m     }
     [90m 581 |[39m[0m

      at ResilientWebSocketClient.warn [as transitionTo] (app/lib/websocket-resilient.ts:578:15)
      at MockWebSocket.transitionTo [as onopen] (app/lib/websocket-resilient.ts:482:12)
      at MockWebSocket.simulateOpen (app/__tests__/websocket-resilient.test.ts:118:16)
      at Object.simulateOpen (app/__tests__/websocket-resilient.test.ts:344:10)

    console.log
      [WebSocket] Connection closed: 1006 Connection lost

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 1236ms (attempt 1/5)

      at ResilientWebSocketClient.log (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Disconnected

      at ResilientWebSocketClient.log [as disconnect] (app/lib/websocket-resilient.ts:445:13)

    console.log
      [WebSocket] Connecting to ws://localhost:3001...

      at ResilientWebSocketClient.log [as connect] (app/lib/websocket-resilient.ts:389:15)

    console.log
      [WebSocket] Connected

      at MockWebSocket.log [as onopen] (app/lib/websocket-resilient.ts:479:15)

    console.log
      [WebSocket] Connection closed: 1006 Connection lost

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 100ms (attempt 1/2)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Reconnecting to ws://localhost:3001...

      at ResilientWebSocketClient.log [as connect] (app/lib/websocket-resilient.ts:389:15)

    console.log
      [WebSocket] Connected

      at MockWebSocket.log [as onopen] (app/lib/websocket-resilient.ts:479:15)

    console.warn
      [WebSocket] Invalid state transition: RECONNECTING -> OPEN

    [0m [90m 576 |[39m
     [90m 577 |[39m     [36mif[39m ([33m![39misValidTransition(oldStatus[33m,[39m newStatus)) {
    [31m[1m>[22m[39m[90m 578 |[39m       console[33m.[39mwarn([32m`[WebSocket] Invalid state transition: ${oldStatus} -> ${newStatus}`[39m)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 579 |[39m       [36mreturn[39m[33m;[39m
     [90m 580 |[39m     }
     [90m 581 |[39m[0m

      at ResilientWebSocketClient.warn [as transitionTo] (app/lib/websocket-resilient.ts:578:15)
      at MockWebSocket.transitionTo [as onopen] (app/lib/websocket-resilient.ts:482:12)
      at MockWebSocket.simulateOpen (app/__tests__/websocket-resilient.test.ts:118:16)
      at Object.simulateOpen (app/__tests__/websocket-resilient.test.ts:395:10)

    console.log
      [WebSocket] Connected

      at MockWebSocket.log [as onopen] (app/lib/websocket-resilient.ts:479:15)

    console.warn
      [WebSocket] Invalid state transition: RECONNECTING -> OPEN

    [0m [90m 576 |[39m
     [90m 577 |[39m     [36mif[39m ([33m![39misValidTransition(oldStatus[33m,[39m newStatus)) {
    [31m[1m>[22m[39m[90m 578 |[39m       console[33m.[39mwarn([32m`[WebSocket] Invalid state transition: ${oldStatus} -> ${newStatus}`[39m)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 579 |[39m       [36mreturn[39m[33m;[39m
     [90m 580 |[39m     }
     [90m 581 |[39m[0m

      at ResilientWebSocketClient.warn [as transitionTo] (app/lib/websocket-resilient.ts:578:15)
      at MockWebSocket.transitionTo [as onopen] (app/lib/websocket-resilient.ts:482:12)
      at MockWebSocket.simulateOpen (app/__tests__/websocket-resilient.test.ts:118:16)
      at Object.simulateOpen (app/__tests__/websocket-resilient.test.ts:405:12)

    console.log
      [WebSocket] Connection closed: 1006 Connection lost

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 100ms (attempt 1/2)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Reconnecting to ws://localhost:3001...

      at ResilientWebSocketClient.log [as connect] (app/lib/websocket-resilient.ts:389:15)

    console.log
      [WebSocket] Connected

      at MockWebSocket.log [as onopen] (app/lib/websocket-resilient.ts:479:15)

    console.warn
      [WebSocket] Invalid state transition: RECONNECTING -> OPEN

    [0m [90m 576 |[39m
     [90m 577 |[39m     [36mif[39m ([33m![39misValidTransition(oldStatus[33m,[39m newStatus)) {
    [31m[1m>[22m[39m[90m 578 |[39m       console[33m.[39mwarn([32m`[WebSocket] Invalid state transition: ${oldStatus} -> ${newStatus}`[39m)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 579 |[39m       [36mreturn[39m[33m;[39m
     [90m 580 |[39m     }
     [90m 581 |[39m[0m

      at ResilientWebSocketClient.warn [as transitionTo] (app/lib/websocket-resilient.ts:578:15)
      at MockWebSocket.transitionTo [as onopen] (app/lib/websocket-resilient.ts:482:12)
      at MockWebSocket.simulateOpen (app/__tests__/websocket-resilient.test.ts:118:16)
      at Object.simulateOpen (app/__tests__/websocket-resilient.test.ts:420:10)

    console.log
      [WebSocket] Connected

      at MockWebSocket.log [as onopen] (app/lib/websocket-resilient.ts:479:15)

    console.warn
      [WebSocket] Invalid state transition: RECONNECTING -> OPEN

    [0m [90m 576 |[39m
     [90m 577 |[39m     [36mif[39m ([33m![39misValidTransition(oldStatus[33m,[39m newStatus)) {
    [31m[1m>[22m[39m[90m 578 |[39m       console[33m.[39mwarn([32m`[WebSocket] Invalid state transition: ${oldStatus} -> ${newStatus}`[39m)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 579 |[39m       [36mreturn[39m[33m;[39m
     [90m 580 |[39m     }
     [90m 581 |[39m[0m

      at ResilientWebSocketClient.warn [as transitionTo] (app/lib/websocket-resilient.ts:578:15)
      at MockWebSocket.transitionTo [as onopen] (app/lib/websocket-resilient.ts:482:12)
      at MockWebSocket.simulateOpen (app/__tests__/websocket-resilient.test.ts:118:16)
      at Object.simulateOpen (app/__tests__/websocket-resilient.test.ts:428:12)

    console.log
      [WebSocket] Connection closed: 1006 Connection lost

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 100ms (attempt 1/2)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Reconnecting to ws://localhost:3001...

      at ResilientWebSocketClient.log [as connect] (app/lib/websocket-resilient.ts:389:15)

    console.log
      [WebSocket] Disconnected

      at ResilientWebSocketClient.log [as disconnect] (app/lib/websocket-resilient.ts:445:13)

    console.log
      [WebSocket] Connecting to ws://localhost:3001...

      at ResilientWebSocketClient.log [as connect] (app/lib/websocket-resilient.ts:389:15)

    console.log
      [WebSocket] Connected

      at MockWebSocket.log [as onopen] (app/lib/websocket-resilient.ts:479:15)

    console.log
      [WebSocket] Disconnected

      at ResilientWebSocketClient.log [as disconnect] (app/lib/websocket-resilient.ts:445:13)

    console.log
      [WebSocket] Connection closed: 1000 Client disconnecting

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Connecting to ws://localhost:3001...

      at ResilientWebSocketClient.log [as connect] (app/lib/websocket-resilient.ts:389:15)

    console.log
      [WebSocket] Connected

      at MockWebSocket.log [as onopen] (app/lib/websocket-resilient.ts:479:15)

    console.log
      [WebSocket] Disconnected

      at ResilientWebSocketClient.log [as disconnect] (app/lib/websocket-resilient.ts:445:13)

    console.log
      [WebSocket] Connection closed: 1000 Client disconnecting

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Connecting to ws://localhost:3001...

      at ResilientWebSocketClient.log [as connect] (app/lib/websocket-resilient.ts:389:15)

    console.log
      [WebSocket] Connected

      at MockWebSocket.log [as onopen] (app/lib/websocket-resilient.ts:479:15)

    console.warn
      [WebSocket] Heartbeat timeout, forcing reconnect

    [0m [90m 641 |[39m           [36mconst[39m timeSinceLastPong [33m=[39m [33mDate[39m[33m.[39mnow() [33m-[39m [36mthis[39m[33m.[39mlastPongTime[33m;[39m
     [90m 642 |[39m           [36mif[39m (timeSinceLastPong [33m>[39m [36mthis[39m[33m.[39mconfig[33m.[39mheartbeatTimeout) {
    [31m[1m>[22m[39m[90m 643 |[39m             console[33m.[39mwarn([32m'[WebSocket] Heartbeat timeout, forcing reconnect'[39m)[33m;[39m
     [90m     |[39m                     [31m[1m^[22m[39m
     [90m 644 |[39m             [36mthis[39m[33m.[39mws[33m?[39m[33m.[39mclose([35m4029[39m[33m,[39m [32m'Heartbeat timeout'[39m)[33m;[39m
     [90m 645 |[39m           }
     [90m 646 |[39m         }[33m,[39m [36mthis[39m[33m.[39mconfig[33m.[39mheartbeatTimeout)[33m;[39m[0m

      at warn (app/lib/websocket-resilient.ts:643:21)
      at callTimer (node_modules/@sinonjs/fake-timers/src/fake-timers-src.js:806:24)
      at doTickInner (node_modules/@sinonjs/fake-timers/src/fake-timers-src.js:1413:29)
      at doTick (node_modules/@sinonjs/fake-timers/src/fake-timers-src.js:1494:20)
      at Object.tick (node_modules/@sinonjs/fake-timers/src/fake-timers-src.js:1502:20)
      at FakeTimers.advanceTimersByTime (node_modules/@jest/fake-timers/build/index.js:576:19)
      at advanceTimersByTime (app/__tests__/websocket-resilient.test.ts:174:8)
      at Object.advanceTimersAndFlush (app/__tests__/websocket-resilient.test.ts:521:13)

    console.log
      [WebSocket] Connection closed: 4029 Heartbeat timeout

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Rate limited, backing off before retry

      at ResilientWebSocketClient.log [as handleUnexpectedClose] (app/lib/websocket-resilient.ts:544:17)

    console.log
      [WebSocket] Scheduling reconnect in 60000ms (attempt 1/5)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Disconnected

      at ResilientWebSocketClient.log [as disconnect] (app/lib/websocket-resilient.ts:445:13)

    console.log
      [WebSocket] Message queued (status: CLOSED)

      at ResilientWebSocketClient.log [as send] (app/lib/websocket-resilient.ts:422:15)

    console.log
      [WebSocket] Disconnected

      at ResilientWebSocketClient.log [as disconnect] (app/lib/websocket-resilient.ts:445:13)

    console.log
      [WebSocket] Message queued (status: CLOSED)

      at ResilientWebSocketClient.log [as send] (app/lib/websocket-resilient.ts:422:15)

    console.log
      [WebSocket] Connecting to ws://localhost:3001...

      at ResilientWebSocketClient.log [as connect] (app/lib/websocket-resilient.ts:389:15)

    console.log
      [WebSocket] Connected

      at MockWebSocket.log [as onopen] (app/lib/websocket-resilient.ts:479:15)

    console.log
      [WebSocket] Sending 1 queued messages

      at ResilientWebSocketClient.log [as flushMessageQueue] (app/lib/websocket-resilient.ts:740:13)

    console.log
      [WebSocket] Disconnected

      at ResilientWebSocketClient.log [as disconnect] (app/lib/websocket-resilient.ts:445:13)

    console.log
      [WebSocket] Connection closed: 1000 Client disconnecting

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Connecting to ws://localhost:3001...

      at ResilientWebSocketClient.log [as connect] (app/lib/websocket-resilient.ts:389:15)

    console.log
      [WebSocket] Connected

      at MockWebSocket.log [as onopen] (app/lib/websocket-resilient.ts:479:15)

    console.log
      [WebSocket] Connection closed: 1008 Authentication failed

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.error
      [WebSocket] Non-recoverable error, entering fallback mode

    [0m [90m 536 |[39m     [36mswitch[39m (error[33m.[39mcategory) {
     [90m 537 |[39m       [36mcase[39m [32m'NON_RECOVERABLE'[39m[33m:[39m
    [31m[1m>[22m[39m[90m 538 |[39m         console[33m.[39merror([32m'[WebSocket] Non-recoverable error, entering fallback mode'[39m)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 539 |[39m         [36mthis[39m[33m.[39mtransitionTo([32m'FALLBACK'[39m)[33m;[39m
     [90m 540 |[39m         [36mthis[39m[33m.[39mstartFallback()[33m;[39m
     [90m 541 |[39m         [36mbreak[39m[33m;[39m[0m

      at ResilientWebSocketClient.error [as handleUnexpectedClose] (app/lib/websocket-resilient.ts:538:17)
      at MockWebSocket.handleUnexpectedClose [as onclose] (app/lib/websocket-resilient.ts:524:14)
      at MockWebSocket.simulateClose (app/__tests__/websocket-resilient.test.ts:144:17)
      at Object.simulateClose (app/__tests__/websocket-resilient.test.ts:609:10)

    console.warn
      [WebSocket] Invalid state transition: OPEN -> FALLBACK

    [0m [90m 576 |[39m
     [90m 577 |[39m     [36mif[39m ([33m![39misValidTransition(oldStatus[33m,[39m newStatus)) {
    [31m[1m>[22m[39m[90m 578 |[39m       console[33m.[39mwarn([32m`[WebSocket] Invalid state transition: ${oldStatus} -> ${newStatus}`[39m)[33m;[39m
     [90m     |[39m               [31m[1m^[22m[39m
     [90m 579 |[39m       [36mreturn[39m[33m;[39m
     [90m 580 |[39m     }
     [90m 581 |[39m[0m

      at ResilientWebSocketClient.warn [as transitionTo] (app/lib/websocket-resilient.ts:578:15)
      at ResilientWebSocketClient.transitionTo [as handleUnexpectedClose] (app/lib/websocket-resilient.ts:539:14)
      at MockWebSocket.handleUnexpectedClose [as onclose] (app/lib/websocket-resilient.ts:524:14)
      at MockWebSocket.simulateClose (app/__tests__/websocket-resilient.test.ts:144:17)
      at Object.simulateClose (app/__tests__/websocket-resilient.test.ts:609:10)

    console.log
      [WebSocket] Starting fallback polling mode

      at ResilientWebSocketClient.log [as startFallback] (app/lib/websocket-resilient.ts:678:13)

    console.log
      [WebSocket] Stopped fallback polling mode

      at ResilientWebSocketClient.log [as stopFallback] (app/lib/websocket-resilient.ts:710:15)

    console.log
      [WebSocket] Disconnected

      at ResilientWebSocketClient.log [as disconnect] (app/lib/websocket-resilient.ts:445:13)

    console.log
      [WebSocket] Connecting to ws://localhost:3001...

      at ResilientWebSocketClient.log [as connect] (app/lib/websocket-resilient.ts:389:15)

    console.log
      [WebSocket] Connection closed: 1000 Normal closure

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 2067ms (attempt 1/5)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Disconnected

      at ResilientWebSocketClient.log [as disconnect] (app/lib/websocket-resilient.ts:445:13)

    console.log
      [WebSocket] Connecting to ws://localhost:3001...

      at ResilientWebSocketClient.log [as connect] (app/lib/websocket-resilient.ts:389:15)

    console.log
      [WebSocket] Disconnected

      at ResilientWebSocketClient.log [as disconnect] (app/lib/websocket-resilient.ts:445:13)

    console.log
      [WebSocket] Disconnected

      at ResilientWebSocketClient.log [as disconnect] (app/lib/websocket-resilient.ts:445:13)

    console.log
      [WebSocket] Connecting to ws://localhost:3001...

      at ResilientWebSocketClient.log [as connect] (app/lib/websocket-resilient.ts:389:15)

    console.log
      [WebSocket] Connected

      at MockWebSocket.log [as onopen] (app/lib/websocket-resilient.ts:479:15)

    console.log
      [WebSocket] Disconnected

      at ResilientWebSocketClient.log [as disconnect] (app/lib/websocket-resilient.ts:445:13)

    console.log
      [WebSocket] Connection closed: 1000 Client disconnecting

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Connecting to ws://localhost:3001...

      at ResilientWebSocketClient.log [as connect] (app/lib/websocket-resilient.ts:389:15)

    console.log
      [WebSocket] Connected

      at MockWebSocket.log [as onopen] (app/lib/websocket-resilient.ts:479:15)

    console.log
      [WebSocket] Connection closed: 1000 Normal closure

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 1875ms (attempt 1/5)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Disconnected

      at ResilientWebSocketClient.log [as disconnect] (app/lib/websocket-resilient.ts:445:13)

    console.log
      [WebSocket] Connecting to ws://localhost:3001...

      at ResilientWebSocketClient.log [as connect] (app/lib/websocket-resilient.ts:389:15)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 1ms (attempt 1/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Reconnecting to ws://localhost:3001...

      at ResilientWebSocketClient.log [as connect] (app/lib/websocket-resilient.ts:389:15)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 2ms (attempt 2/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Reconnecting to ws://localhost:3001...

      at ResilientWebSocketClient.log [as connect] (app/lib/websocket-resilient.ts:389:15)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 5ms (attempt 3/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Reconnecting to ws://localhost:3001...

      at ResilientWebSocketClient.log [as connect] (app/lib/websocket-resilient.ts:389:15)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 9ms (attempt 4/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Reconnecting to ws://localhost:3001...

      at ResilientWebSocketClient.log [as connect] (app/lib/websocket-resilient.ts:389:15)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 20ms (attempt 5/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 27ms (attempt 6/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 62ms (attempt 7/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 160ms (attempt 8/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 312ms (attempt 9/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 552ms (attempt 10/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 782ms (attempt 11/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 1827ms (attempt 12/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 4732ms (attempt 13/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 8293ms (attempt 14/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 17176ms (attempt 15/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 32803ms (attempt 16/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 23831ms (attempt 17/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 26750ms (attempt 18/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 27229ms (attempt 19/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 29823ms (attempt 20/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 28059ms (attempt 21/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 31063ms (attempt 22/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 29234ms (attempt 23/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 30099ms (attempt 24/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 28822ms (attempt 25/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 23771ms (attempt 26/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 25845ms (attempt 27/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 23511ms (attempt 28/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 25140ms (attempt 29/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 36116ms (attempt 30/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 36510ms (attempt 31/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 37058ms (attempt 32/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 30591ms (attempt 33/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 25894ms (attempt 34/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 27774ms (attempt 35/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 27700ms (attempt 36/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 32039ms (attempt 37/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 28374ms (attempt 38/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 30513ms (attempt 39/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 26611ms (attempt 40/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 30722ms (attempt 41/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 22750ms (attempt 42/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 24566ms (attempt 43/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 24847ms (attempt 44/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 23243ms (attempt 45/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 29431ms (attempt 46/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 28442ms (attempt 47/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 35326ms (attempt 48/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 34790ms (attempt 49/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 23629ms (attempt 50/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 35038ms (attempt 51/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 36612ms (attempt 52/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 24657ms (attempt 53/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 22592ms (attempt 54/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 23260ms (attempt 55/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 35533ms (attempt 56/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 26973ms (attempt 57/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 32048ms (attempt 58/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 27071ms (attempt 59/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 28935ms (attempt 60/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 23928ms (attempt 61/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 36565ms (attempt 62/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 35049ms (attempt 63/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 27739ms (attempt 64/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 23439ms (attempt 65/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 36069ms (attempt 66/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 27461ms (attempt 67/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 36193ms (attempt 68/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 32404ms (attempt 69/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 23654ms (attempt 70/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 34362ms (attempt 71/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 26305ms (attempt 72/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 26056ms (attempt 73/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 23002ms (attempt 74/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 31850ms (attempt 75/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 25919ms (attempt 76/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 24097ms (attempt 77/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 34697ms (attempt 78/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 26389ms (attempt 79/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 29534ms (attempt 80/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 29608ms (attempt 81/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 26334ms (attempt 82/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 36238ms (attempt 83/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 24274ms (attempt 84/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 28600ms (attempt 85/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 30772ms (attempt 86/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 35555ms (attempt 87/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 26542ms (attempt 88/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 32904ms (attempt 89/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 30490ms (attempt 90/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 33227ms (attempt 91/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 27271ms (attempt 92/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 24083ms (attempt 93/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 29541ms (attempt 94/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 33291ms (attempt 95/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 28532ms (attempt 96/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 36461ms (attempt 97/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 37100ms (attempt 98/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 22644ms (attempt 99/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 35602ms (attempt 100/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 23140ms (attempt 101/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 24256ms (attempt 102/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 32668ms (attempt 103/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 33535ms (attempt 104/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 24970ms (attempt 105/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 33251ms (attempt 106/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 32179ms (attempt 107/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 32907ms (attempt 108/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 33743ms (attempt 109/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 25346ms (attempt 110/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 23418ms (attempt 111/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 37453ms (attempt 112/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 26864ms (attempt 113/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 29335ms (attempt 114/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 31542ms (attempt 115/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 37182ms (attempt 116/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 32386ms (attempt 117/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 23052ms (attempt 118/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 30660ms (attempt 119/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 26192ms (attempt 120/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 27025ms (attempt 121/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 30785ms (attempt 122/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 32427ms (attempt 123/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 25163ms (attempt 124/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 32824ms (attempt 125/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 31768ms (attempt 126/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 27326ms (attempt 127/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 31354ms (attempt 128/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 32923ms (attempt 129/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 33044ms (attempt 130/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 23504ms (attempt 131/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 35814ms (attempt 132/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 22553ms (attempt 133/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 29510ms (attempt 134/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 33052ms (attempt 135/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 35006ms (attempt 136/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 31295ms (attempt 137/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 30140ms (attempt 138/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 35343ms (attempt 139/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 30608ms (attempt 140/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 33674ms (attempt 141/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 27241ms (attempt 142/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 29685ms (attempt 143/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 37247ms (attempt 144/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 36249ms (attempt 145/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 35797ms (attempt 146/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 26461ms (attempt 147/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 28914ms (attempt 148/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 27786ms (attempt 149/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Connection closed: 1006 Test

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Scheduling reconnect in 24858ms (attempt 150/150)

      at ResilientWebSocketClient.log [as scheduleReconnect] (app/lib/websocket-resilient.ts:621:13)

    console.log
      [WebSocket] Disconnected

      at ResilientWebSocketClient.log [as disconnect] (app/lib/websocket-resilient.ts:445:13)

    console.log
      [WebSocket] Connecting to ws://localhost:3001...

      at ResilientWebSocketClient.log [as connect] (app/lib/websocket-resilient.ts:389:15)

    console.log
      [WebSocket] Connected

      at MockWebSocket.log [as onopen] (app/lib/websocket-resilient.ts:479:15)

    console.log
      [WebSocket] Disconnected

      at ResilientWebSocketClient.log [as disconnect] (app/lib/websocket-resilient.ts:445:13)

    console.log
      [WebSocket] Connection closed: 1000 Client disconnecting

      at MockWebSocket.log [as onclose] (app/lib/websocket-resilient.ts:516:15)

    console.log
      [WebSocket] Disconnected

      at ResilientWebSocketClient.log [as disconnect] (app/lib/websocket-resilient.ts:445:13)

    console.log
      [WebSocket] Connecting to ws://localhost:3001...

      at ResilientWebSocketClient.log [as connect] (app/lib/websocket-resilient.ts:389:15)

    console.log
      [WebSocket] Disconnected

      at ResilientWebSocketClient.log [as disconnect] (app/lib/websocket-resilient.ts:445:13)

    console.log
      [WebSocket] Disconnected

      at ResilientWebSocketClient.log [as disconnect] (app/lib/websocket-resilient.ts:445:13)

    console.log
      [WebSocket] Disconnected

      at ResilientWebSocketClient.log [as disconnect] (app/lib/websocket-resilient.ts:445:13)

    console.log
      [WebSocket] Disconnected

      at ResilientWebSocketClient.log [as disconnect] (app/lib/websocket-resilient.ts:445:13)

PASS app/components/__tests__/TradingDetails.test.tsx
FAIL app/lib/__tests__/TransactionCostModel.test.ts
  ‚óè TransactionCostModel ‚Ä∫ Slippage Estimation ‚Ä∫ should consider order size relative to average volume

    expect(received).toBeGreaterThan(expected)

    Expected: > 0.002206
    Received:   0.001836

    [0m [90m 116 |[39m       [36mconst[39m largeOrder [33m=[39m transactionCostModel[33m.[39mestimateSlippage([35m500000[39m[33m,[39m [32m'normal'[39m[33m,[39m [35m1000000[39m)[33m;[39m
     [90m 117 |[39m       
    [31m[1m>[22m[39m[90m 118 |[39m       expect(largeOrder[33m.[39mslippageRate)[33m.[39mtoBeGreaterThan(smallOrder[33m.[39mslippageRate)[33m;[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 119 |[39m     })[33m;[39m
     [90m 120 |[39m   })[33m;[39m
     [90m 121 |[39m[0m

      at Object.toBeGreaterThan (app/lib/__tests__/TransactionCostModel.test.ts:118:39)

PASS app/lib/__tests__/AnalysisService.test.ts
PASS app/api/market/__tests__/route.test.ts
PASS app/lib/api/__tests__/idb.test.ts
  ‚óè Console

    console.log
      IndexedDB: All data cleared.

      at Object.log [as onsuccess] (app/lib/api/idb.ts:49:17)

PASS app/__tests__/AIPerformance.test.ts
PASS app/__tests__/breakout.test.ts
PASS app/components/__tests__/VolumeProfilePlugin.test.ts
PASS app/lib/backtest.test.ts
  ‚óè Console

    console.log
      [OptimizedAccuracyService] Cache miss, optimizing parameters for TEST

      at OptimizedAccuracyService.log [as getOptimizedParams] (app/lib/OptimizedAccuracyService.ts:101:17)

    console.log
      [OptimizedAccuracyService] Backtest completed in 63.77ms

      at OptimizedAccuracyService.log [as runOptimizedBacktest] (app/lib/OptimizedAccuracyService.ts:362:17)

    console.log
      [OptimizedAccuracyService] Cache miss, optimizing parameters for TEST

      at OptimizedAccuracyService.log [as getOptimizedParams] (app/lib/OptimizedAccuracyService.ts:101:17)

    console.log
      [OptimizedAccuracyService] Backtest completed in 14.88ms

      at OptimizedAccuracyService.log [as runOptimizedBacktest] (app/lib/OptimizedAccuracyService.ts:362:17)

PASS app/__tests__/StockChart_robustness.test.tsx
  ‚óè Console

    console.log
      [Chart Y-Axis] {
        currentPrice: 105,
        calculatedMin: 103.425,
        calculatedMax: 106.57499999999999
      }

      at log (app/components/StockChart/hooks/useChartOptions.ts:36:13)

    console.log
      [Chart Y-Axis] {
        currentPrice: 0.00015,
        calculatedMin: 0.00014774999999999999,
        calculatedMax: 0.00015224999999999996
      }

      at log (app/components/StockChart/hooks/useChartOptions.ts:36:13)

PASS app/__tests__/mlPrediction.test.ts
PASS app/__tests__/rate-limiter.test.ts
  ‚óè Console

    console.log
      Rate limit: Waiting 1 minutes...

      at RateLimiter.log [as waitForNextRequest] (app/lib/api/rate-limiter.ts:133:17)

PASS app/__tests__/error-handler.test.ts
PASS app/lib/__tests__/MarketRegimeDetector.test.ts
PASS app/__tests__/idb_safe.test.ts
PASS app/__tests__/layout_smoke.test.tsx
  ‚óè Console

    console.error
      In HTML, <html> cannot be a child of <div>.
      This will cause a hydration error.

    [0m [90m  9 |[39m describe([32m'RootLayout'[39m[33m,[39m () [33m=>[39m {
     [90m 10 |[39m     it([32m'renders children correctly'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 11 |[39m         [36mconst[39m { container } [33m=[39m render(
     [90m    |[39m                                     [31m[1m^[22m[39m
     [90m 12 |[39m             [33m<[39m[33mRootLayout[39m[33m>[39m
     [90m 13 |[39m                 [33m<[39m[33mdiv[39m data[33m-[39mtestid[33m=[39m[32m"child"[39m[33m>[39m[33mChild[39m [33mContent[39m[33m<[39m[33m/[39m[33mdiv[39m[33m>[39m
     [90m 14 |[39m             [33m<[39m[33m/[39m[33mRootLayout[39m[33m>[39m[0m

      at validateDOMNesting (node_modules/react-dom/cjs/react-dom-client.development.js:2598:19)
      at resolveSingletonInstance (node_modules/react-dom/cjs/react-dom-client.development.js:22598:9)
      at completeWork (node_modules/react-dom/cjs/react-dom-client.development.js:12525:29)
      at runWithFiberInDEV (node_modules/react-dom/cjs/react-dom-client.development.js:874:13)
      at completeUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17777:19)
      at performUnitOfWork (node_modules/react-dom/cjs/react-dom-client.development.js:17658:11)
      at workLoopSync (node_modules/react-dom/cjs/react-dom-client.development.js:17469:41)
      at renderRootSync (node_modules/react-dom/cjs/react-dom-client.development.js:17450:11)
      at performWorkOnRoot (node_modules/react-dom/cjs/react-dom-client.development.js:16504:11)
      at performWorkOnRootViaSchedulerTask (node_modules/react-dom/cjs/react-dom-client.development.js:18957:7)
      at flushActQueue (node_modules/react/cjs/react.development.js:590:34)
      at process.env.NODE_ENV.exports.act (node_modules/react/cjs/react.development.js:884:10)
      at node_modules/@testing-library/react/dist/act-compat.js:46:25
      at renderRoot (node_modules/@testing-library/react/dist/pure.js:189:26)
      at render (node_modules/@testing-library/react/dist/pure.js:291:10)
      at Object.<anonymous> (app/__tests__/layout_smoke.test.tsx:11:37)

PASS app/__tests__/utils_comprehensive.test.ts
PASS app/__tests__/types.test.ts
PASS app/lib/__tests__/logic_coverage.test.ts
PASS app/lib/analysis.test.ts
 ‚Ä∫ 1 snapshot obsolete.
   ‚Ä¢ optimizeParameters returns consistent results 1
PASS app/__tests__/monkey.test.ts
PASS app/lib/__tests__/alertService.test.ts
PASS app/__tests__/screener-utils.test.ts
PASS app/lib/__tests__/TechnicalIndicatorService.test.ts
PASS app/lib/__tests__/integration.test.ts
PASS app/components/__tests__/SimpleRSIChart.test.tsx
PASS app/components/StockChart/hooks/useChartData.test.ts
PASS app/__tests__/ip-rate-limit.test.ts
PASS app/store/__tests__/alertStore.test.ts
PASS app/lib/optimize.test.ts
 ‚Ä∫ 1 snapshot obsolete.
   ‚Ä¢ optimizeParameters Correctness returns consistent parameters for known data 1
PASS app/__tests__/ai_performance_strict.test.ts
PASS app/__tests__/idb.test.ts
  ‚óè Console

    console.log
      IndexedDB Upgrade: 0 -> 1

      at Object.log [as onupgradeneeded] (app/lib/api/idb.ts:26:17)

    console.log
      IndexedDB: All data cleared.

      at Object.log [as onsuccess] (app/lib/api/idb.ts:49:17)

FAIL app/lib/__tests__/TechnicalIndicatorService.property.test.ts
  ‚óè Test suite failed to run

    Configuration error:

    Could not locate module fast-check mapped as:
    C:\gemini-thinkpad\Ult\trading-platform\node_modules\fast-check\lib\esm\entry\main.js.

    Please check your configuration for these entries:
    {
      "moduleNameMapper": {
        "/^fast-check$/": "C:\gemini-thinkpad\Ult\trading-platform\node_modules\fast-check\lib\esm\entry\main.js"
      },
      "resolver": undefined
    }

    [0m [90m  8 |[39m [36mimport[39m [33m*[39m [36mas[39m fc [36mfrom[39m [32m'fast-check'[39m[33m;[39m
     [90m  9 |[39m
    [31m[1m>[22m[39m[90m 10 |[39m [90m// Helper to generate valid price data (positive numbers only)[39m
     [90m    |[39m                                                            [31m[1m^[22m[39m
     [90m 11 |[39m [36mconst[39m positivePriceArb [33m=[39m (minLength[33m:[39m number[33m,[39m maxLength[33m:[39m number)[33m:[39m fc[33m.[39m[33mArbitrary[39m[33m<[39m[33mnumber[39m[][33m>[39m [33m=>[39m 
     [90m 12 |[39m   fc[33m.[39marray(fc[33m.[39mnat([35m10000[39m)[33m.[39mmap((n[33m:[39m number) [33m=>[39m n [33m+[39m [35m1[39m)[33m,[39m { minLength[33m,[39m maxLength })[33m;[39m
     [90m 13 |[39m[0m

      at createNoMappedModuleFoundError (node_modules/jest-resolve/build/index.js:1117:17)
      at Object.<anonymous> (app/lib/__tests__/TechnicalIndicatorService.property.test.ts:10:60)

PASS app/__tests__/StockExpansion.test.ts
PASS app/__tests__/stocks-data.test.ts
FAIL app/hooks/__tests__/useStockData.test.ts
  ‚óè Test suite failed to run

    Cannot find module '@/app/store/tradingStore' from 'app/hooks/__tests__/useStockData.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [90m// Mock dependencies[39m
    [31m[1m>[22m[39m[90m  7 |[39m jest[33m.[39mmock([32m'@/app/store/tradingStore'[39m)[33m;[39m
     [90m    |[39m      [31m[1m^[22m[39m
     [90m  8 |[39m jest[33m.[39mmock([32m'@/app/data/stocks'[39m)[33m;[39m
     [90m  9 |[39m
     [90m 10 |[39m describe([32m'useStockData'[39m[33m,[39m () [33m=>[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.mock (app/hooks/__tests__/useStockData.test.ts:7:6)

FAIL app/store/__tests__/tradingStore.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../tradingStore' from 'app/store/__tests__/tradingStore.test.ts'

    [0m [90m 4 |[39m [36mimport[39m { [33mAI_TRADING[39m } [36mfrom[39m [32m'@/app/lib/constants'[39m[33m;[39m
     [90m 5 |[39m
    [31m[1m>[22m[39m[90m 6 |[39m [90m// Mock localStorage for Zustand persist[39m
     [90m   |[39m                       [31m[1m^[22m[39m
     [90m 7 |[39m [36mconst[39m localStorageMock [33m=[39m ([36mfunction[39m() {
     [90m 8 |[39m   [36mlet[39m store[33m:[39m [33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m string[33m>[39m [33m=[39m {}[33m;[39m
     [90m 9 |[39m   [36mreturn[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (app/store/__tests__/tradingStore.test.ts:6:23)

FAIL app/components/__tests__/StockTable.test.tsx
  ‚óè Test suite failed to run

    Cannot find module '@/app/store/tradingStore' from 'app/components/__tests__/StockTable.test.tsx'

    [0m [90m  6 |[39m
     [90m  7 |[39m [90m// Mock dependencies[39m
    [31m[1m>[22m[39m[90m  8 |[39m jest[33m.[39mmock([32m'@/app/store/tradingStore'[39m[33m,[39m () [33m=>[39m ({
     [90m    |[39m      [31m[1m^[22m[39m
     [90m  9 |[39m     useTradingStore[33m:[39m jest[33m.[39mfn()[33m,[39m
     [90m 10 |[39m }))[33m;[39m
     [90m 11 |[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.mock (app/components/__tests__/StockTable.test.tsx:8:6)

FAIL app/components/__tests__/OrderPanel.test.tsx
  ‚óè Test suite failed to run

    Cannot find module '@/app/store/tradingStore' from 'app/components/__tests__/OrderPanel.test.tsx'

    [0m [90m  5 |[39m
     [90m  6 |[39m [90m// Mock store[39m
    [31m[1m>[22m[39m[90m  7 |[39m jest[33m.[39mmock([32m'@/app/store/tradingStore'[39m)[33m;[39m
     [90m    |[39m      [31m[1m^[22m[39m
     [90m  8 |[39m
     [90m  9 |[39m describe([32m'OrderPanel'[39m[33m,[39m () [33m=>[39m {
     [90m 10 |[39m     [36mconst[39m mockStock [33m=[39m { symbol[33m:[39m [32m'7203'[39m[33m,[39m name[33m:[39m [32m'Toyota'[39m[33m,[39m price[33m:[39m [35m2000[39m[33m,[39m change[33m:[39m [35m0[39m[33m,[39m changePercent[33m:[39m [35m0[39m[33m,[39m market[33m:[39m [32m'japan'[39m [36mas[39m [36mconst[39m[33m,[39m sector[33m:[39m [32m'Automotive'[39m[33m,[39m volume[33m:[39m [35m1000000[39m }[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.mock (app/components/__tests__/OrderPanel.test.tsx:7:6)

FAIL app/components/__tests__/ShellComponents.test.tsx
  ‚óè Test suite failed to run

    Cannot find module '@/app/store/tradingStore' from 'app/components/__tests__/ShellComponents.test.tsx'

    [0m [90m 26 |[39m [90m// Mock store[39m
     [90m 27 |[39m [36mimport[39m { useTradingStore } [36mfrom[39m [32m'@/app/store/tradingStore'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 28 |[39m jest[33m.[39mmock([32m'@/app/store/tradingStore'[39m[33m,[39m () [33m=>[39m ({
     [90m    |[39m      [31m[1m^[22m[39m
     [90m 29 |[39m     useTradingStore[33m:[39m jest[33m.[39mfn()
     [90m 30 |[39m }))[33m;[39m
     [90m 31 |[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.mock (app/components/__tests__/ShellComponents.test.tsx:28:6)

FAIL app/components/__tests__/SignalPanel.test.tsx
  ‚óè Test suite failed to run

    Cannot find module '@/app/store/tradingStore' from 'app/components/__tests__/SignalPanel.test.tsx'

    [0m [90m  6 |[39m
     [90m  7 |[39m [90m// Mocks[39m
    [31m[1m>[22m[39m[90m  8 |[39m jest[33m.[39mmock([32m'@/app/store/tradingStore'[39m[33m,[39m () [33m=>[39m ({
     [90m    |[39m      [31m[1m^[22m[39m
     [90m  9 |[39m   useTradingStore[33m:[39m jest[33m.[39mfn()[33m,[39m
     [90m 10 |[39m }))[33m;[39m
     [90m 11 |[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.mock (app/components/__tests__/SignalPanel.test.tsx:8:6)

FAIL app/__tests__/tradingStore.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../store/tradingStore' from 'app/__tests__/tradingStore.test.ts'

    [0m [90m 3 |[39m
     [90m 4 |[39m describe([32m'tradingStore'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 5 |[39m   beforeEach(() [33m=>[39m {
     [90m   |[39m                       [31m[1m^[22m[39m
     [90m 6 |[39m     useTradingStore[33m.[39msetState(useTradingStore[33m.[39mgetInitialState())[33m;[39m
     [90m 7 |[39m   })[33m;[39m
     [90m 8 |[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (app/__tests__/tradingStore.test.ts:5:23)

FAIL app/components/__tests__/Header.test.tsx
  ‚óè Test suite failed to run

    Cannot find module '@/app/store/portfolioStore' from 'app/components/__tests__/Header.test.tsx'

    [0m [90m  6 |[39m [36mimport[39m { useWatchlistStore } [36mfrom[39m [32m'@/app/store/watchlistStore'[39m[33m;[39m
     [90m  7 |[39m
    [31m[1m>[22m[39m[90m  8 |[39m jest[33m.[39mmock([32m'@/app/store/portfolioStore'[39m)[33m;[39m
     [90m    |[39m      [31m[1m^[22m[39m
     [90m  9 |[39m jest[33m.[39mmock([32m'@/app/store/uiStore'[39m)[33m;[39m
     [90m 10 |[39m jest[33m.[39mmock([32m'@/app/store/watchlistStore'[39m)[33m;[39m
     [90m 11 |[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.mock (app/components/__tests__/Header.test.tsx:8:6)

FAIL app/__tests__/tradingStore-atomic.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../store/tradingStore' from 'app/__tests__/tradingStore-atomic.test.ts'

    [0m [90m  8 |[39m [36mimport[39m { useTradingStore[33m,[39m [33mOrderExecutionResult[39m } [36mfrom[39m [32m'../store/tradingStore'[39m[33m;[39m
     [90m  9 |[39m [36mimport[39m { act[33m,[39m renderHook } [36mfrom[39m [32m'@testing-library/react'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 10 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m 11 |[39m describe([32m'TradingStore Atomic Order Execution'[39m[33m,[39m () [33m=>[39m {
     [90m 12 |[39m   beforeEach(() [33m=>[39m {
     [90m 13 |[39m     [90m// „Çπ„Éà„Ç¢„ÅÆÁä∂ÊÖã„Çí„É™„Çª„ÉÉ„Éà[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (app/__tests__/tradingStore-atomic.test.ts:10:23)

FAIL app/__tests__/StockTable.test.tsx
  ‚óè Test suite failed to run

    Cannot find module '../store/tradingStore' from 'app/__tests__/StockTable.test.tsx'

    [0m [90m 10 |[39m ][33m;[39m
     [90m 11 |[39m
    [31m[1m>[22m[39m[90m 12 |[39m jest[33m.[39mmock([32m'../store/tradingStore'[39m)[33m;[39m
     [90m    |[39m      [31m[1m^[22m[39m
     [90m 13 |[39m
     [90m 14 |[39m describe([32m'StockTable Component - Watchlist Actions'[39m[33m,[39m () [33m=>[39m {
     [90m 15 |[39m   [36mconst[39m mockRemoveFromWatchlist [33m=[39m jest[33m.[39mfn()[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.mock (app/__tests__/StockTable.test.tsx:12:6)

FAIL app/__tests__/SignalPanel.test.tsx
  ‚óè Test suite failed to run

    Cannot find module '@/app/hooks/useWebSocket' from 'app/__tests__/SignalPanel.test.tsx'

    [0m [90m  9 |[39m
     [90m 10 |[39m [90m// Mock WebSocket hook locally for this test[39m
    [31m[1m>[22m[39m[90m 11 |[39m jest[33m.[39mmock([32m'@/app/hooks/useWebSocket'[39m[33m,[39m () [33m=>[39m ({
     [90m    |[39m      [31m[1m^[22m[39m
     [90m 12 |[39m   useWebSocket[33m:[39m () [33m=>[39m ({
     [90m 13 |[39m     status[33m:[39m [32m'OPEN'[39m[33m,[39m
     [90m 14 |[39m     lastMessage[33m:[39m [36mnull[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.mock (app/__tests__/SignalPanel.test.tsx:11:6)

FAIL app/__tests__/page_smoke.test.tsx
  ‚óè Test suite failed to run

    Cannot find module '@/app/components/Header' from 'app/__tests__/page_smoke.test.tsx'

    [0m [90m 4 |[39m
     [90m 5 |[39m [90m// Mock all sub-components to focus on page logic & layout[39m
    [31m[1m>[22m[39m[90m 6 |[39m jest[33m.[39mmock([32m'@/app/components/Header'[39m[33m,[39m () [33m=>[39m ({ [33mHeader[39m[33m:[39m () [33m=>[39m [33m<[39m[33mdiv[39m data[33m-[39mtestid[33m=[39m[32m"Header"[39m [33m/[39m[33m>[39m }))[33m;[39m
     [90m   |[39m      [31m[1m^[22m[39m
     [90m 7 |[39m jest[33m.[39mmock([32m'@/app/components/Navigation'[39m[33m,[39m () [33m=>[39m ({ [33mNavigation[39m[33m:[39m () [33m=>[39m [33m<[39m[33mdiv[39m data[33m-[39mtestid[33m=[39m[32m"Navigation"[39m [33m/[39m[33m>[39m }))[33m;[39m
     [90m 8 |[39m jest[33m.[39mmock([32m'@/app/components/StockChart'[39m[33m,[39m () [33m=>[39m ({ [33mStockChart[39m[33m:[39m () [33m=>[39m [33m<[39m[33mdiv[39m data[33m-[39mtestid[33m=[39m[32m"StockChart"[39m [33m/[39m[33m>[39m }))[33m;[39m
     [90m 9 |[39m jest[33m.[39mmock([32m'@/app/components/ChartToolbar'[39m[33m,[39m () [33m=>[39m ({ [33mChartToolbar[39m[33m:[39m () [33m=>[39m [33m<[39m[33mdiv[39m data[33m-[39mtestid[33m=[39m[32m"ChartToolbar"[39m [33m/[39m[33m>[39m }))[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.mock (app/__tests__/page_smoke.test.tsx:6:6)

FAIL app/__tests__/StockTableAccessibility.test.tsx
  ‚óè Test suite failed to run

    Cannot find module '../store/tradingStore' from 'app/components/StockTable.tsx'

    Require stack:
      app/components/StockTable.tsx
      app/__tests__/StockTableAccessibility.test.tsx

    [0m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (app/components/StockTable.tsx:1677:27)
      at Object.<anonymous> (app/__tests__/StockTableAccessibility.test.tsx:7:21)

FAIL app/__tests__/OrderPanel.test.tsx
  ‚óè Test suite failed to run

    Cannot find module '@/app/store/portfolioStore' from 'app/__tests__/OrderPanel.test.tsx'

    [0m [90m 4 |[39m
     [90m 5 |[39m [90m// Mock zustand[39m
    [31m[1m>[22m[39m[90m 6 |[39m jest[33m.[39mmock([32m'@/app/store/portfolioStore'[39m[33m,[39m () [33m=>[39m ({
     [90m   |[39m      [31m[1m^[22m[39m
     [90m 7 |[39m   usePortfolioStore[33m:[39m () [33m=>[39m ({
     [90m 8 |[39m     portfolio[33m:[39m { cash[33m:[39m [35m20000[39m }[33m,[39m
     [90m 9 |[39m     addPosition[33m:[39m jest[33m.[39mfn()[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.mock (app/__tests__/OrderPanel.test.tsx:6:6)

FAIL app/__tests__/market-api.test.ts
  ‚óè Test suite failed to run

    Cannot find module '@/app/lib/ip-rate-limit' from 'app/__tests__/market-api.test.ts'

    [0m [90m 25 |[39m })[33m;[39m
     [90m 26 |[39m
    [31m[1m>[22m[39m[90m 27 |[39m jest[33m.[39mmock([32m'@/app/lib/ip-rate-limit'[39m[33m,[39m () [33m=>[39m ({
     [90m    |[39m      [31m[1m^[22m[39m
     [90m 28 |[39m     ipRateLimiter[33m:[39m {
     [90m 29 |[39m         check[33m:[39m jest[33m.[39mfn(() [33m=>[39m [36mtrue[39m)
     [90m 30 |[39m     }[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.mock (app/__tests__/market-api.test.ts:27:6)

FAIL app/__tests__/Screener.test.tsx
  ‚óè Test suite failed to run

    Cannot find module '../store/tradingStore' from 'app/__tests__/Screener.test.tsx'

    [0m [90m 56 |[39m
     [90m 57 |[39m         (useTradingStore [36mas[39m any)[33m.[39msetState({
    [31m[1m>[22m[39m[90m 58 |[39m             addToWatchlist[33m:[39m mockAddToWatchlist[33m,[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 59 |[39m             setSelectedStock[33m:[39m mockSetSelectedStock[33m,[39m
     [90m 60 |[39m         })[33m;[39m
     [90m 61 |[39m     })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (app/__tests__/Screener.test.tsx:58:23)

FAIL app/__tests__/OrderPanel_enhanced.test.tsx
  ‚óè Test suite failed to run

    Cannot find module '../store/tradingStore' from 'app/components/OrderPanel.tsx'

    Require stack:
      app/components/OrderPanel.tsx
      app/__tests__/OrderPanel_enhanced.test.tsx

    [0m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (app/components/OrderPanel.tsx:1768:26)
      at Object.<anonymous> (app/__tests__/OrderPanel_enhanced.test.tsx:21:21)

FAIL app/__tests__/page_performance.test.tsx
  ‚óè Test suite failed to run

    Cannot find module '../store/tradingStore' from 'app/__tests__/page_performance.test.tsx'

    [0m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (app/__tests__/page_performance.test.tsx:76:23)

FAIL app/__tests__/page.test.tsx
  ‚óè Test suite failed to run

    Cannot find module '../store/tradingStore' from 'app/__tests__/page.test.tsx'

    [0m [90m 54 |[39m     
     [90m 55 |[39m     expect(screen[33m.[39mqueryByText([32m'ÈäòÊüÑ„ÅåÊú™ÈÅ∏Êäû„Åß„Åô'[39m))[33m.[39mnot[33m.[39mtoBeInTheDocument()[33m;[39m
    [31m[1m>[22m[39m[90m 56 |[39m   })[33m;[39m
     [90m    |[39m                [31m[1m^[22m[39m
     [90m 57 |[39m })[33m;[39m
     [90m 58 |[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (app/__tests__/page.test.tsx:56:23)

FAIL app/__tests__/api-client.test.ts
  ‚óè Test suite failed to run

    Cannot find module '@/app/lib/api/data-aggregator' from 'app/__tests__/api-client.test.ts'

    [0m [90m 38 |[39m
     [90m 39 |[39m [90m// API„ÇØ„É©„Ç§„Ç¢„É≥„Éà„ÅÆ„É¢„ÉÉ„ÇØ[39m
    [31m[1m>[22m[39m[90m 40 |[39m jest[33m.[39mmock([32m'@/app/lib/api/data-aggregator'[39m[33m,[39m () [33m=>[39m {
     [90m    |[39m      [31m[1m^[22m[39m
     [90m 41 |[39m   [36mreturn[39m {
     [90m 42 |[39m     marketClient[33m:[39m {
     [90m 43 |[39m       fetchOHLCV[33m:[39m jest[33m.[39mfn()[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.mock (app/__tests__/api-client.test.ts:40:6)

FAIL app/__tests__/Journal.test.tsx
  ‚óè Test suite failed to run

    Cannot find module '../store/tradingStore' from 'app/__tests__/Journal.test.tsx'

    [0m [90m 13 |[39m         jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 14 |[39m     })[33m;[39m
    [31m[1m>[22m[39m[90m 15 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m 16 |[39m     it([32m'renders empty stats and empty state message when journal is empty'[39m[33m,[39m () [33m=>[39m {
     [90m 17 |[39m         (useTradingStore [36mas[39m any)[33m.[39msetState({
     [90m 18 |[39m             journal[33m:[39m [][33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (app/__tests__/Journal.test.tsx:15:23)

FAIL app/__tests__/Heatmap.test.tsx
  ‚óè Test suite failed to run

    Cannot find module '../store/tradingStore' from 'app/__tests__/Heatmap.test.tsx'

    [0m [90m 60 |[39m     beforeEach(() [33m=>[39m {
     [90m 61 |[39m         jest[33m.[39mclearAllMocks()[33m;[39m
    [31m[1m>[22m[39m[90m 62 |[39m         (useRouter [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({ push[33m:[39m mockPush })[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 63 |[39m         (marketClient[33m.[39mfetchQuotes [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockResolvedValue(mockQuotes)[33m;[39m
     [90m 64 |[39m
     [90m 65 |[39m         [90m// Mock Store[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (app/__tests__/Heatmap.test.tsx:62:23)

-----------------------------------|---------|----------|---------|---------|-----------------------------------------------------------------------------------------------------------------------------------------
File                               | % Stmts | % Branch | % Funcs | % Lines | Uncovered Line #s                                                                                                                       
-----------------------------------|---------|----------|---------|---------|-----------------------------------------------------------------------------------------------------------------------------------------
All files                          |   33.71 |    30.56 |   29.75 |   34.19 |                                                                                                                                         
 app                               |   14.28 |        0 |    9.09 |   12.19 |                                                                                                                                         
  error.tsx                        |       0 |        0 |       0 |       0 | 3-14                                                                                                                                    
  layout.tsx                       |     100 |      100 |     100 |     100 |                                                                                                                                         
  page.tsx                         |       0 |        0 |       0 |       0 | 3-184                                                                                                                                   
 app/api/market                    |   59.43 |     40.5 |   71.42 |   59.22 |                                                                                                                                         
  route.ts                         |   59.43 |     40.5 |   71.42 |   59.22 | 58,69,87,92,98,132,156-228,266-274                                                                                                      
 app/api/trading                   |       0 |        0 |       0 |       0 |                                                                                                                                         
  route.ts                         |       0 |        0 |       0 |       0 | 1-82                                                                                                                                    
 app/api/trading/[symbol]          |       0 |        0 |       0 |       0 |                                                                                                                                         
  route.ts                         |       0 |        0 |       0 |       0 | 1-17                                                                                                                                    
 app/components                    |   28.88 |    33.08 |   32.22 |   29.75 |                                                                                                                                         
  AlertPanel.tsx                   |      80 |    73.07 |   78.57 |   82.75 | 58,76,92-94,102,177,210,243,358                                                                                                         
  BacktestPanel.tsx                |       0 |        0 |       0 |       0 | 9-102                                                                                                                                   
  BottomPanel.tsx                  |       0 |        0 |       0 |       0 | 3-32                                                                                                                                    
  ChartToolbar.tsx                 |       0 |        0 |       0 |       0 | 4-79                                                                                                                                    
  ErrorBoundary.tsx                |       0 |        0 |       0 |       0 | 3-62                                                                                                                                    
  Header.tsx                       |       0 |        0 |       0 |       0 | 3-253                                                                                                                                   
  HistoryTable.tsx                 |     100 |    81.81 |     100 |     100 | 50,54                                                                                                                                   
  LeftSidebar.tsx                  |       0 |        0 |       0 |       0 | 3-15                                                                                                                                    
  MarketDataPanel.tsx              |       0 |        0 |       0 |       0 | 9-91                                                                                                                                    
  Navigation.tsx                   |       0 |        0 |       0 |       0 | 3-26                                                                                                                                    
  NotificationCenter.tsx           |   78.87 |    65.38 |   76.92 |    80.3 | 46,57,68-70,93,102-104,155-172,199,231,263                                                                                              
  OrderBook.tsx                    |     100 |    91.66 |     100 |     100 | 64                                                                                                                                      
  OrderPanel.tsx                   |       0 |        0 |       0 |       0 | 3-195                                                                                                                                   
  PortfolioPanel.tsx               |       0 |        0 |       0 |       0 | 9-164                                                                                                                                   
  PositionTable.tsx                |     100 |      100 |     100 |     100 |                                                                                                                                         
  RSIChart.tsx                     |       0 |        0 |       0 |       0 | 3-68                                                                                                                                    
  RightSidebar.tsx                 |       0 |        0 |       0 |       0 | 3-64                                                                                                                                    
  RiskPanel.tsx                    |       0 |        0 |       0 |       0 | 9-137                                                                                                                                   
  SignalCard.tsx                   |   66.66 |    45.37 |   33.33 |   66.66 | 208-235                                                                                                                                 
  SimpleRSIChart.tsx               |   94.44 |     90.9 |     100 |     100 | 26                                                                                                                                      
  StockTable.tsx                   |       0 |        0 |       0 |       0 | 4-174                                                                                                                                   
  UnifiedTradingDashboard.tsx      |       0 |        0 |       0 |       0 | 10-355                                                                                                                                  
 app/components/SignalPanel        |       0 |        0 |       0 |       0 |                                                                                                                                         
  AIPerformanceView.tsx            |       0 |        0 |       0 |       0 | 2-34                                                                                                                                    
  BacktestView.tsx                 |       0 |        0 |       0 |       0 | 2-59                                                                                                                                    
  ForecastView.tsx                 |       0 |        0 |       0 |       0 | 2-14                                                                                                                                    
  index-optimized.tsx              |       0 |        0 |       0 |       0 | 10-284                                                                                                                                  
  index.tsx                        |       0 |        0 |       0 |       0 | 1-175                                                                                                                                   
 app/components/StockChart         |   27.95 |    37.68 |      15 |   29.06 |                                                                                                                                         
  OptimizedStockChart.tsx          |       0 |        0 |       0 |       0 | 3-371                                                                                                                                   
  StockChart.tsx                   |      96 |    96.29 |      75 |   95.83 | 37                                                                                                                                      
  index.tsx                        |     100 |      100 |     100 |     100 |                                                                                                                                         
 app/components/StockChart/hooks   |   79.54 |    58.02 |   81.81 |   77.87 |                                                                                                                                         
  useChartData.ts                  |     100 |    88.88 |     100 |     100 | 8,44                                                                                                                                    
  useChartOptions.ts               |   68.18 |    27.27 |      50 |   63.15 | 87-114                                                                                                                                  
  useForecastLayers.ts             |   67.74 |    60.97 |     100 |   67.27 | 42-68                                                                                                                                   
  useTechnicalIndicators.ts        |     100 |      100 |     100 |     100 |                                                                                                                                         
 app/components/StockChart/plugins |   96.15 |    91.66 |     100 |     100 |                                                                                                                                         
  volumeProfile.ts                 |   96.15 |    91.66 |     100 |     100 | 20                                                                                                                                      
 app/components/ui                 |       0 |        0 |       0 |       0 |                                                                                                                                         
  Badge.tsx                        |       0 |        0 |       0 |       0 | 1-29                                                                                                                                    
  Button.tsx                       |       0 |        0 |       0 |       0 | 1-43                                                                                                                                    
  Card.tsx                         |       0 |      100 |     100 |       0 | 1-78                                                                                                                                    
  LoadingStates.tsx                |       0 |        0 |       0 |       0 | 11-409                                                                                                                                  
  Tabs.tsx                         |       0 |        0 |       0 |       0 | 3-108                                                                                                                                   
  ToggleSwitch.tsx                 |       0 |        0 |       0 |       0 | 3-59                                                                                                                                    
  index.ts                         |       0 |      100 |     100 |       0 | 1                                                                                                                                       
 app/core                          |       0 |        0 |       0 |       0 |                                                                                                                                         
  EventBus.ts                      |       0 |        0 |       0 |       0 | 19-153                                                                                                                                  
  ServiceRegistry.ts               |       0 |        0 |       0 |       0 | 18-190                                                                                                                                  
  logger.ts                        |       0 |        0 |       0 |       0 | 28-131                                                                                                                                  
 app/data                          |   91.66 |      100 |     100 |     100 |                                                                                                                                         
  stocks.ts                        |   91.66 |      100 |     100 |     100 |                                                                                                                                         
 app/heatmap                       |       0 |        0 |       0 |       0 |                                                                                                                                         
  page.tsx                         |       0 |        0 |       0 |       0 | 3-252                                                                                                                                   
 app/hooks                         |    8.43 |     5.41 |      14 |    8.85 |                                                                                                                                         
  useAIPerformance.ts              |       0 |        0 |       0 |       0 | 1-69                                                                                                                                    
  useBacktestWorker.ts             |       0 |        0 |       0 |       0 | 8-235                                                                                                                                   
  useChartAnalysis.ts              |       0 |        0 |       0 |       0 | 1-189                                                                                                                                   
  useResilientWebSocket.ts         |       0 |        0 |       0 |       0 | 8-282                                                                                                                                   
  useSignalAlerts.ts               |       0 |        0 |       0 |       0 | 1-119                                                                                                                                   
  useStockData.ts                  |       0 |        0 |       0 |       0 | 1-139                                                                                                                                   
  useUnifiedTrading.ts             |       0 |        0 |       0 |       0 | 8-249                                                                                                                                   
  useWebSocket.ts                  |   85.71 |    54.16 |    87.5 |   88.67 | 20,67,92-94,119                                                                                                                         
 app/journal                       |       0 |        0 |       0 |       0 |                                                                                                                                         
  page.tsx                         |       0 |        0 |       0 |       0 | 3-298                                                                                                                                   
 app/lib                           |   67.43 |    60.04 |   68.57 |   67.79 |                                                                                                                                         
  AITradeService.ts                |       0 |        0 |       0 |       0 | 2-134                                                                                                                                   
  AccuracyService.ts               |   86.08 |    68.71 |     100 |   84.48 | 73-76,88,186,193,363-416                                                                                                                
  AnalysisService.ts               |    87.9 |    77.84 |     100 |    87.3 | 249,294-297,306-309,317-319,335-342,420,463-473,489                                                                                     
  BacktestVisualizationUtils.ts    |       0 |        0 |       0 |       0 | 32-230                                                                                                                                  
  ConsensusSignalService.ts        |       0 |        0 |       0 |       0 | 11-347                                                                                                                                  
  ExitStrategy.ts                  |   80.74 |    72.79 |   94.73 |   81.25 | 136,146,176,219,236,260,303,308-312,358,380-382,458-467,474,540                                                                         
  MarketDataService.ts             |    7.44 |        0 |    5.55 |    7.89 | 31,36-68,77-169                                                                                                                         
  MarketRegimeDetector.ts          |   94.02 |    87.67 |   93.75 |   95.16 | 102,110,213,234,325,364                                                                                                                 
  OptimizedAccuracyService.ts      |   91.16 |    84.45 |   96.29 |   91.24 | 50,75-78,113-115,248-251,263,424-425,435-436,438-439                                                                                    
  TechnicalIndicatorService.ts     |     100 |    91.89 |     100 |     100 | 51,123-124                                                                                                                              
  TransactionCostModel.ts          |   86.15 |    78.57 |     100 |   86.29 | 136,156,195,236,250,261,421-422,456-463,495,530                                                                                         
  VolumeAnalysis.ts                |   39.02 |    29.62 |      50 |   35.38 | 24,69-169                                                                                                                               
  alertService.ts                  |   68.36 |     46.8 |     100 |   71.95 | 93-99,172-202,231                                                                                                                       
  alertTypes.ts                    |     100 |      100 |     100 |     100 |                                                                                                                                         
  analysis.ts                      |   86.66 |      100 |      50 |   81.81 | 22-23                                                                                                                                   
  api-key-validator.ts             |       0 |        0 |       0 |       0 | 11-186                                                                                                                                  
  backtest.ts                      |     100 |      100 |     100 |     100 |                                                                                                                                         
  breakout.ts                      |   76.47 |    72.13 |     100 |   76.66 | 84-91,117-124                                                                                                                           
  constants.ts                     |      75 |      100 |     100 |     100 |                                                                                                                                         
  error-handler-client.ts          |       0 |        0 |       0 |       0 | 10-294                                                                                                                                  
  error-handler.ts                 |     100 |       90 |     100 |     100 | 81-90,109,266                                                                                                                           
  errorHandler.ts                  |       0 |        0 |       0 |       0 | 30-421                                                                                                                                  
  errors.ts                        |   37.93 |    47.36 |   30.76 |   36.47 | 8,22-25,44-181,231-232                                                                                                                  
  ip-rate-limit.ts                 |      60 |    63.15 |      50 |   60.52 | 28,48-81,101                                                                                                                            
  mlPrediction.ts                  |     100 |      100 |     100 |     100 |                                                                                                                                         
  riskManagement.ts                |   94.64 |    78.04 |     100 |   94.44 | 111,130,136-137,220,262                                                                                                                 
  screener-utils.ts                |     100 |      100 |     100 |     100 |                                                                                                                                         
  utils.ts                         |   89.21 |    83.61 |     100 |   96.28 | 160-162,176,352,385-386,422,464                                                                                                         
  websocket-resilient.ts           |   76.15 |    71.23 |   84.09 |   77.47 | 119,172,203-224,274,333-334,367-368,373-374,379-382,394-395,415-417,452-455,501-504,509-512,562-567,681-698,729-730,748-751,759,783,841 
  websocket.ts                     |   63.93 |    56.57 |   77.27 |   63.63 | 34,41,46,52,58,84,111,138-139,143-145,169-170,176,181-183,193-204,214,236-244,259-261,274-281,290-294                                   
 app/lib/aiAnalytics               |    6.79 |     0.41 |      12 |    7.39 |                                                                                                                                         
  PredictiveAnalyticsEngine.ts     |    6.79 |     0.41 |      12 |    7.39 | 155-477,508-526,549-570,590-618,654-1009,1025-1033                                                                                      
 app/lib/alerts                    |    1.18 |        0 |    1.42 |    1.32 |                                                                                                                                         
  AlertSystem.ts                   |     3.1 |        0 |    3.22 |    3.37 | 212-605,615-623                                                                                                                         
  EnhancedAlertSystem.ts           |       0 |        0 |       0 |       0 | 9-915                                                                                                                                   
 app/lib/api                       |   33.04 |    24.37 |   41.61 |   32.34 |                                                                                                                                         
  APIClient.ts                     |   41.57 |    33.33 |   44.82 |   44.04 | 48,64-65,89,111-153,173,211,355-371,378-417                                                                                             
  DataAggregator.ts                |       0 |        0 |       0 |       0 | 49-462                                                                                                                                  
  alpha-vantage.ts                 |   77.66 |    62.68 |      75 |   81.01 | 91,112,125,138,153,168,195-204,211,226,232                                                                                              
  data-aggregator.ts               |    3.07 |        0 |       0 |    3.41 | 38-415                                                                                                                                  
  errors.ts                        |      60 |      100 |     100 |     100 |                                                                                                                                         
  idb.ts                           |    91.3 |    71.42 |   81.81 |     100 | 28-42,71                                                                                                                                
  market-api.ts                    |       0 |        0 |       0 |       0 | 2-17                                                                                                                                    
  marketDataClient.ts              |       0 |        0 |       0 |       0 | 6-189                                                                                                                                   
  rate-limiter.ts                  |   98.64 |     90.9 |     100 |   98.48 | 121                                                                                                                                     
 app/lib/backtest                  |    3.73 |     0.92 |     2.7 |    4.18 |                                                                                                                                         
  AdvancedBacktestEngine.ts        |    3.73 |     0.92 |     2.7 |    4.18 | 151-553,563-571                                                                                                                         
 app/lib/execution                 |    5.53 |     0.82 |    6.97 |    5.98 |                                                                                                                                         
  AlgorithmicExecutionEngine.ts    |    5.53 |     0.82 |    6.97 |    5.98 | 131,145-744,754-764                                                                                                                     
 app/lib/market                    |       0 |        0 |       0 |       0 |                                                                                                                                         
  FlashCrashDetector.ts            |       0 |        0 |       0 |       0 | 8-514                                                                                                                                   
  GapRiskManager.ts                |       0 |        0 |       0 |       0 | 8-590                                                                                                                                   
 app/lib/marketDataFeed            |   19.57 |    10.63 |   20.96 |   20.28 |                                                                                                                                         
  MultiExchangeDataFeed.ts         |   19.57 |    10.63 |   20.96 |   20.28 | 172-197,218-224,250-261,265-266,270-272,276-284,300,307-669,679-689                                                                     
 app/lib/paperTrading              |   54.35 |    37.14 |   44.11 |   58.85 |                                                                                                                                         
  PaperTradingEnvironment.ts       |   54.35 |    37.14 |   44.11 |   58.85 | 223-224,229-230,248-250,277-288,330-331,336-337,342-343,348-349,403-404,426-433,460-499,516-532,537,544-549,619-631,641-649             
 app/lib/portfolio                 |       0 |        0 |       0 |       0 |                                                                                                                                         
  PortfolioOptimizer.ts            |       0 |        0 |       0 |       0 | 9-987                                                                                                                                   
 app/lib/risk                      |    3.46 |        0 |    3.57 |    3.95 |                                                                                                                                         
  AdvancedRiskManager.ts           |    3.46 |        0 |    3.57 |    3.95 | 179-858,868-876                                                                                                                         
 app/lib/sentiment                 |    7.61 |     1.96 |    6.25 |    8.98 |                                                                                                                                         
  SentimentAnalysisEngine.ts       |    7.61 |     1.96 |    6.25 |    8.98 | 212,232-640,650-660                                                                                                                     
 app/lib/services                  |   79.68 |    71.64 |      75 |   80.27 |                                                                                                                                         
  feature-calculation-service.ts   |   93.02 |    82.35 |     100 |   91.42 | 27,87,102                                                                                                                               
  ml-model-service.ts              |   96.66 |    95.83 |     100 |   96.49 | 20,143                                                                                                                                  
  signal-generation-service.ts     |   90.38 |    77.63 |     100 |    93.1 | 25,94-96,174-175                                                                                                                        
  technical-indicator-service.ts   |   24.48 |        0 |   29.41 |   17.94 | 13,39-113                                                                                                                               
 app/lib/tradingCore               |   35.32 |    11.23 |   47.05 |   36.32 |                                                                                                                                         
  UnifiedTradingPlatform.ts        |   44.25 |    11.23 |   47.05 |   45.83 | 187,194-196,236-456,485-490,506-525,557-569,579,584,598,602-609                                                                         
  index.ts                         |       0 |      100 |     100 |       0 | 9-133                                                                                                                                   
 app/screener                      |       0 |        0 |       0 |       0 |                                                                                                                                         
  page.tsx                         |       0 |        0 |       0 |       0 | 3-379                                                                                                                                   
 app/security                      |       0 |        0 |       0 |       0 |                                                                                                                                         
  AuditLogger.ts                   |       0 |        0 |       0 |       0 | 26-283                                                                                                                                  
  RateLimiter.ts                   |       0 |        0 |       0 |       0 | 28-307                                                                                                                                  
 app/store                         |   10.08 |     6.31 |   13.28 |   10.66 |                                                                                                                                         
  aiStore.ts                       |       0 |        0 |       0 |       0 | 1-30                                                                                                                                    
  alertStore.ts                    |     100 |       60 |     100 |     100 | 55-101                                                                                                                                  
  index.ts                         |       0 |      100 |       0 |       0 | 1-45                                                                                                                                    
  journalStore.ts                  |       0 |      100 |       0 |       0 | 1-15                                                                                                                                    
  optimizedPortfolioStore.ts       |       0 |        0 |       0 |       0 | 11-332                                                                                                                                  
  orderExecutionStore.ts           |       0 |        0 |       0 |       0 | 1-318                                                                                                                                   
  portfolioStore.ts                |       0 |        0 |       0 |       0 | 1-111                                                                                                                                   
  themeStore.ts                    |       0 |        0 |       0 |       0 | 1-14                                                                                                                                    
  uiStore.ts                       |       0 |      100 |       0 |       0 | 1-21                                                                                                                                    
  watchlistStore.ts                |       0 |        0 |       0 |       0 | 1-45                                                                                                                                    
 app/types                         |     100 |      100 |     100 |     100 |                                                                                                                                         
  index.ts                         |     100 |      100 |     100 |     100 |                                                                                                                                         
 app/workers                       |       0 |        0 |       0 |       0 |                                                                                                                                         
  backtest.worker.ts               |       0 |        0 |       0 |       0 | 9-182                                                                                                                                   
-----------------------------------|---------|----------|---------|---------|-----------------------------------------------------------------------------------------------------------------------------------------
Jest: "global" coverage threshold for statements (40%) not met: 33.71%
Jest: "global" coverage threshold for lines (40%) not met: 34.19%
Jest: "global" coverage threshold for functions (40%) not met: 29.75%
Summary of all failing tests
FAIL app/__tests__/data-interpolation.test.ts
  ‚óè Data Interpolation and Technical Indicator Tests ‚Ä∫ Data Interpolation Handling ‚Ä∫ should handle null/invalid values in SMA calculation

    expect(received).toBeCloseTo(expected, precision)

    Expected: 103
    Received: NaN

    Expected precision:    2
    Expected difference: < 0.005
    Received difference:   NaN

    [0m [90m 18 |[39m       expect(result[[35m3[39m])[33m.[39mtoBeNaN()[33m;[39m
     [90m 19 |[39m       [90m// 5Áï™ÁõÆ„ÅÆ„Éá„Éº„Çø„ÅØ„ÄÅÊúâÂäπ„Å™„Éá„Éº„Çø„Åå3„Å§(102,104,103)„ÅÇ„Çã„ÅÆ„ÅßË®àÁÆóÂèØËÉΩ[39m
    [31m[1m>[22m[39m[90m 20 |[39m       expect(result[[35m4[39m])[33m.[39mtoBeCloseTo(([35m102[39m [33m+[39m [35m104[39m [33m+[39m [35m103[39m) [35m/ 3, 2); /[39m[33m/[39m [35m103[39m
     [90m    |[39m                         [31m[1m^[22m[39m
     [90m 21 |[39m       [90m// 6Áï™ÁõÆ„ÅÆ„Éá„Éº„Çø„ÅØNaN„ÅÆ„Åü„ÇÅNaN[39m
     [90m 22 |[39m       expect(result[[35m5[39m])[33m.[39mtoBeNaN()[33m;[39m
     [90m 23 |[39m       [90m// 7Áï™ÁõÆ„ÅÆ„Éá„Éº„Çø„ÅØ„ÄÅÊúâÂäπ„Å™„Éá„Éº„Çø„Åå2„Å§„Åó„Åã„Å™„ÅÑ„ÅÆ„ÅßNaN[39m[0m

      at Object.toBeCloseTo (app/__tests__/data-interpolation.test.ts:20:25)

  ‚óè Data Interpolation and Technical Indicator Tests ‚Ä∫ Data Interpolation Handling ‚Ä∫ should handle null/invalid values in RSI calculation

    expect(received).toBeNaN()

    Received: 100

    [0m [90m 38 |[39m       expect(result[[35m2[39m])[33m.[39mtoBeNaN()[33m;[39m [90m// nullÂÄ§„ÅÆ„Åü„ÇÅNaN[39m
     [90m 39 |[39m       expect(result[[35m3[39m])[33m.[39mtoBeNaN()[33m;[39m [90m// ÂçÅÂàÜ„Å™„Éá„Éº„Çø„Åå„Å™„ÅÑ„Åü„ÇÅNaN[39m
    [31m[1m>[22m[39m[90m 40 |[39m       expect(result[[35m4[39m])[33m.[39mtoBeNaN()[33m;[39m [90m// ÂçÅÂàÜ„Å™„Éá„Éº„Çø„Åå„Å™„ÅÑ„Åü„ÇÅNaN[39m
     [90m    |[39m                         [31m[1m^[22m[39m
     [90m 41 |[39m       expect(result[[35m5[39m])[33m.[39mtoBeNaN()[33m;[39m [90m// ÂçÅÂàÜ„Å™„Éá„Éº„Çø„Åå„Å™„ÅÑ„Åü„ÇÅNaN[39m
     [90m 42 |[39m     })[33m;[39m
     [90m 43 |[39m[0m

      at Object.toBeNaN (app/__tests__/data-interpolation.test.ts:40:25)

FAIL app/lib/__tests__/riskManagement.test.ts
  ‚óè RiskManagement ‚Ä∫ calculatePositionSize ‚Ä∫ should calculate position size for fixed_ratio method

    expect(received).toBe(expected) // Object.is equality

    Expected: 500
    Received: 5

    [0m [90m 94 |[39m
     [90m 95 |[39m       expect(result[33m.[39mpositionSize)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 96 |[39m       expect(result[33m.[39mriskAmount)[33m.[39mtoBe([35m500[39m)[33m;[39m [90m// (100-95) * positionSize[39m
     [90m    |[39m                                 [31m[1m^[22m[39m
     [90m 97 |[39m       expect(result[33m.[39mriskPercent)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m 98 |[39m     })[33m;[39m
     [90m 99 |[39m[0m

      at Object.toBe (app/lib/__tests__/riskManagement.test.ts:96:33)

  ‚óè RiskManagement ‚Ä∫ calculatePositionSize ‚Ä∫ should return minimum size for small capital

    expect(received).toBe(expected) // Object.is equality

    Expected: 100
    Received: 0

    [0m [90m 107 |[39m       )[33m;[39m
     [90m 108 |[39m
    [31m[1m>[22m[39m[90m 109 |[39m       expect(result[33m.[39mpositionSize)[33m.[39mtoBe([33mPOSITION_SIZING[39m[33m.[39m[33mMIN_SIZE[39m)[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 110 |[39m     })[33m;[39m
     [90m 111 |[39m
     [90m 112 |[39m     it([32m'should respect maxPositionPercent limit'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toBe (app/lib/__tests__/riskManagement.test.ts:109:35)

  ‚óè RiskManagement ‚Ä∫ calculateStopLossPrice ‚Ä∫ should calculate trailing stop

    expect(received).toBe(expected) // Object.is equality

    Expected: 90
    Received: 75

    [0m [90m 218 |[39m       [36mconst[39m stopLoss [33m=[39m calculateStopLossPrice([35m100[39m[33m,[39m [32m'LONG'[39m[33m,[39m { enabled[33m:[39m [36mtrue[39m[33m,[39m type[33m:[39m [32m'trailing'[39m[33m,[39m value[33m:[39m [35m5[39m }[33m,[39m [35m5[39m)[33m;[39m
     [90m 219 |[39m       [90m// Trailing stop uses ATR initially[39m
    [31m[1m>[22m[39m[90m 220 |[39m       expect(stopLoss)[33m.[39mtoBe([35m90[39m)[33m;[39m
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 221 |[39m     })[33m;[39m
     [90m 222 |[39m   })[33m;[39m
     [90m 223 |[39m[0m

      at Object.toBe (app/lib/__tests__/riskManagement.test.ts:220:24)

  ‚óè RiskManagement ‚Ä∫ calculateTakeProfitPrice ‚Ä∫ should calculate percentage take profit for LONG

    expect(received).toBe(expected) // Object.is equality

    Expected: 110
    Received: 110.00000000000001

    [0m [90m 230 |[39m     it([32m'should calculate percentage take profit for LONG'[39m[33m,[39m () [33m=>[39m {
     [90m 231 |[39m       [36mconst[39m takeProfit [33m=[39m calculateTakeProfitPrice([35m100[39m[33m,[39m [32m'LONG'[39m[33m,[39m [35m95[39m[33m,[39m { enabled[33m:[39m [36mtrue[39m[33m,[39m type[33m:[39m [32m'percentage'[39m[33m,[39m value[33m:[39m [35m10[39m })[33m;[39m
    [31m[1m>[22m[39m[90m 232 |[39m       expect(takeProfit)[33m.[39mtoBe([35m110[39m)[33m;[39m
     [90m     |[39m                          [31m[1m^[22m[39m
     [90m 233 |[39m     })[33m;[39m
     [90m 234 |[39m
     [90m 235 |[39m     it([32m'should calculate percentage take profit for SHORT'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toBe (app/lib/__tests__/riskManagement.test.ts:232:26)

  ‚óè RiskManagement ‚Ä∫ checkDailyLossLimit ‚Ä∫ should use custom dailyLossLimit

    expect(received).toBe(expected) // Object.is equality

    Expected: true
    Received: false

    [0m [90m 278 |[39m       [36mconst[39m settings [33m=[39m { [33m...[39m[33mDEFAULT_RISK_SETTINGS[39m[33m,[39m dailyLossLimit[33m:[39m [35m10[39m }[33m;[39m
     [90m 279 |[39m       [36mconst[39m result [33m=[39m checkDailyLossLimit([35m500[39m[33m,[39m [35m10000[39m[33m,[39m settings)[33m;[39m
    [31m[1m>[22m[39m[90m 280 |[39m       expect(result[33m.[39mexceeded)[33m.[39mtoBe([36mtrue[39m)[33m;[39m
     [90m     |[39m                               [31m[1m^[22m[39m
     [90m 281 |[39m     })[33m;[39m
     [90m 282 |[39m   })[33m;[39m
     [90m 283 |[39m[0m

      at Object.toBe (app/lib/__tests__/riskManagement.test.ts:280:31)

  ‚óè RiskManagement ‚Ä∫ Edge cases ‚Ä∫ should handle very small capital

    expect(received).toBe(expected) // Object.is equality

    Expected: 100
    Received: 0

    [0m [90m 375 |[39m         [33mDEFAULT_RISK_SETTINGS[39m
     [90m 376 |[39m       )[33m;[39m
    [31m[1m>[22m[39m[90m 377 |[39m       expect(result[33m.[39mpositionSize)[33m.[39mtoBe([33mPOSITION_SIZING[39m[33m.[39m[33mMIN_SIZE[39m)[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 378 |[39m     })[33m;[39m
     [90m 379 |[39m
     [90m 380 |[39m     it([32m'should handle very large capital'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toBe (app/lib/__tests__/riskManagement.test.ts:377:35)

FAIL app/__tests__/utils-technical-indicators.test.ts
  ‚óè Technical Indicators - calculateSMA ‚Ä∫ should handle NaN values in input

    expect(received).toBeCloseTo(expected)

    Expected: 106
    Received: 108

    Expected precision:    2
    Expected difference: < 0.005
    Received difference:   2

    [0m [90m 33 |[39m
     [90m 34 |[39m     expect(result[[35m2[39m])[33m.[39mtoBeNaN()[33m;[39m [90m// Not enough valid data[39m
    [31m[1m>[22m[39m[90m 35 |[39m     expect(result[[35m5[39m])[33m.[39mtoBeCloseTo(([35m104[39m [33m+[39m [35m106[39m [33m+[39m [35m108[39m) [33m/[39m [35m3[39m)[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 36 |[39m   })[33m;[39m
     [90m 37 |[39m
     [90m 38 |[39m   it([32m'should handle null and undefined values'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toBeCloseTo (app/__tests__/utils-technical-indicators.test.ts:35:23)

  ‚óè Technical Indicators - calculateSMA ‚Ä∫ should handle null and undefined values

    expect(received).toBeCloseTo(expected)

    Expected: 107.33333333333333
    Received: NaN

    Expected precision:    2
    Expected difference: < 0.005
    Received difference:   NaN

    [0m [90m 42 |[39m
     [90m 43 |[39m     expect(result[[35m2[39m])[33m.[39mtoBeNaN()[33m;[39m [90m// Not enough valid data[39m
    [31m[1m>[22m[39m[90m 44 |[39m     expect(result[[35m5[39m])[33m.[39mtoBeCloseTo(([35m104[39m [33m+[39m [35m108[39m [33m+[39m [35m110[39m) [33m/[39m [35m3[39m)[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 45 |[39m   })[33m;[39m
     [90m 46 |[39m
     [90m 47 |[39m   it([32m'should handle negative values by treating them as invalid'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toBeCloseTo (app/__tests__/utils-technical-indicators.test.ts:44:23)

  ‚óè Technical Indicators - calculateSMA ‚Ä∫ should handle negative values by treating them as invalid

    expect(received).toBeCloseTo(expected)

    Expected: 106
    Received: 108

    Expected precision:    2
    Expected difference: < 0.005
    Received difference:   2

    [0m [90m 51 |[39m
     [90m 52 |[39m     expect(result[[35m2[39m])[33m.[39mtoBeNaN()[33m;[39m [90m// Negative value treated as invalid[39m
    [31m[1m>[22m[39m[90m 53 |[39m     expect(result[[35m5[39m])[33m.[39mtoBeCloseTo(([35m104[39m [33m+[39m [35m106[39m [33m+[39m [35m108[39m) [33m/[39m [35m3[39m)[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 54 |[39m   })[33m;[39m
     [90m 55 |[39m
     [90m 56 |[39m   it([32m'should handle zero values as valid'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toBeCloseTo (app/__tests__/utils-technical-indicators.test.ts:53:23)

  ‚óè Technical Indicators - calculateSMA ‚Ä∫ should handle zero values as valid

    expect(received).toBeCloseTo(expected)

    Expected: 68
    Received: NaN

    Expected precision:    2
    Expected difference: < 0.005
    Received difference:   NaN

    [0m [90m 59 |[39m     [36mconst[39m result [33m=[39m calculateSMA(prices[33m,[39m period)[33m;[39m
     [90m 60 |[39m
    [31m[1m>[22m[39m[90m 61 |[39m     expect(result[[35m2[39m])[33m.[39mtoBeCloseTo(([35m100[39m [33m+[39m [35m0[39m [33m+[39m [35m104[39m) [33m/[39m [35m3[39m)[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 62 |[39m   })[33m;[39m
     [90m 63 |[39m
     [90m 64 |[39m   it([32m'should handle empty array'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toBeCloseTo (app/__tests__/utils-technical-indicators.test.ts:61:23)

  ‚óè Technical Indicators - calculateRSI ‚Ä∫ should calculate RSI correctly with valid data

    expect(received).not.toBeNaN()

    Received: NaN

    [0m [90m 94 |[39m     expect(result[33m.[39mlength)[33m.[39mtoBe(prices[33m.[39mlength)[33m;[39m
     [90m 95 |[39m     expect(result[[35m0[39m])[33m.[39mtoBeNaN()[33m;[39m [90m// First period+1 values are NaN[39m
    [31m[1m>[22m[39m[90m 96 |[39m     expect(result[[35m14[39m])[33m.[39mnot[33m.[39mtoBeNaN()[33m;[39m
     [90m    |[39m                            [31m[1m^[22m[39m
     [90m 97 |[39m     expect(result[[35m15[39m])[33m.[39mnot[33m.[39mtoBeNaN()[33m;[39m
     [90m 98 |[39m     [90m// RSI should be between 0 and 100[39m
     [90m 99 |[39m     [36mconst[39m validRSI [33m=[39m result[33m.[39mfilter(v [33m=>[39m [33m![39misNaN(v))[33m;[39m[0m

      at Object.toBeNaN (app/__tests__/utils-technical-indicators.test.ts:96:28)

  ‚óè Technical Indicators - calculateRSI ‚Ä∫ should handle NaN values in input

    expect(received).not.toBeNaN()

    Received: NaN

    [0m [90m 109 |[39m     [36mconst[39m result [33m=[39m calculateRSI(prices[33m,[39m period)[33m;[39m
     [90m 110 |[39m
    [31m[1m>[22m[39m[90m 111 |[39m     expect(result[[35m14[39m])[33m.[39mnot[33m.[39mtoBeNaN()[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 112 |[39m     expect(result[[35m15[39m])[33m.[39mtoBeNaN()[33m;[39m [90m// NaN in calculation[39m
     [90m 113 |[39m     expect(result[[35m16[39m])[33m.[39mtoBeNaN()[33m;[39m [90m// Previous value was NaN[39m
     [90m 114 |[39m   })[33m;[39m[0m

      at Object.toBeNaN (app/__tests__/utils-technical-indicators.test.ts:111:28)

  ‚óè Technical Indicators - calculateRSI ‚Ä∫ should handle null and undefined values

    expect(received).not.toBeNaN()

    Received: NaN

    [0m [90m 119 |[39m     [36mconst[39m result [33m=[39m calculateRSI(prices[33m,[39m period)[33m;[39m
     [90m 120 |[39m
    [31m[1m>[22m[39m[90m 121 |[39m     expect(result[[35m14[39m])[33m.[39mnot[33m.[39mtoBeNaN()[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 122 |[39m     expect(result[[35m15[39m])[33m.[39mtoBeNaN()[33m;[39m
     [90m 123 |[39m   })[33m;[39m
     [90m 124 |[39m[0m

      at Object.toBeNaN (app/__tests__/utils-technical-indicators.test.ts:121:28)

  ‚óè Technical Indicators - calculateRSI ‚Ä∫ should handle negative values by treating them as invalid

    expect(received).not.toBeNaN()

    Received: NaN

    [0m [90m 128 |[39m     [36mconst[39m result [33m=[39m calculateRSI(prices[33m,[39m period)[33m;[39m
     [90m 129 |[39m
    [31m[1m>[22m[39m[90m 130 |[39m     expect(result[[35m14[39m])[33m.[39mnot[33m.[39mtoBeNaN()[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 131 |[39m     expect(result[[35m15[39m])[33m.[39mtoBeNaN()[33m;[39m
     [90m 132 |[39m   })[33m;[39m
     [90m 133 |[39m[0m

      at Object.toBeNaN (app/__tests__/utils-technical-indicators.test.ts:130:28)

  ‚óè Technical Indicators - calculateRSI ‚Ä∫ should handle all gains (RSI should be 100)

    expect(received).toBeCloseTo(expected)

    Expected: 100
    Received: NaN

    Expected precision:    2
    Expected difference: < 0.005
    Received difference:   NaN

    [0m [90m 137 |[39m     [36mconst[39m result [33m=[39m calculateRSI(prices[33m,[39m period)[33m;[39m
     [90m 138 |[39m
    [31m[1m>[22m[39m[90m 139 |[39m     expect(result[[35m14[39m])[33m.[39mtoBeCloseTo([35m100[39m)[33m;[39m
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 140 |[39m   })[33m;[39m
     [90m 141 |[39m
     [90m 142 |[39m   it([32m'should handle all losses (RSI should be 0)'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toBeCloseTo (app/__tests__/utils-technical-indicators.test.ts:139:24)

  ‚óè Technical Indicators - calculateRSI ‚Ä∫ should handle all losses (RSI should be 0)

    expect(received).toBeCloseTo(expected)

    Expected: 0
    Received: NaN

    Expected precision:    2
    Expected difference: < 0.005
    Received difference:   NaN

    [0m [90m 145 |[39m     [36mconst[39m result [33m=[39m calculateRSI(prices[33m,[39m period)[33m;[39m
     [90m 146 |[39m
    [31m[1m>[22m[39m[90m 147 |[39m     expect(result[[35m14[39m])[33m.[39mtoBeCloseTo([35m0[39m)[33m;[39m
     [90m     |[39m                        [31m[1m^[22m[39m
     [90m 148 |[39m   })[33m;[39m
     [90m 149 |[39m
     [90m 150 |[39m   it([32m'should handle empty array'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toBeCloseTo (app/__tests__/utils-technical-indicators.test.ts:147:24)

  ‚óè Technical Indicators - calculateRSI ‚Ä∫ should use default period of 14

    expect(received).not.toBeNaN()

    Received: NaN

    [0m [90m 158 |[39m
     [90m 159 |[39m     expect(result[33m.[39mlength)[33m.[39mtoBe(prices[33m.[39mlength)[33m;[39m
    [31m[1m>[22m[39m[90m 160 |[39m     expect(result[[35m14[39m])[33m.[39mnot[33m.[39mtoBeNaN()[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 161 |[39m   })[33m;[39m
     [90m 162 |[39m })[33m;[39m
     [90m 163 |[39m[0m

      at Object.toBeNaN (app/__tests__/utils-technical-indicators.test.ts:160:28)

  ‚óè Technical Indicators - calculateMACD ‚Ä∫ should calculate MACD correctly with valid data

    expect(received).not.toBeNaN()

    Received: NaN

    [0m [90m 178 |[39m     [90m// Later values should be valid[39m
     [90m 179 |[39m     expect(result[33m.[39mmacd[[35m50[39m])[33m.[39mnot[33m.[39mtoBeNaN()[33m;[39m
    [31m[1m>[22m[39m[90m 180 |[39m     expect(result[33m.[39msignal[[35m50[39m])[33m.[39mnot[33m.[39mtoBeNaN()[33m;[39m
     [90m     |[39m                                   [31m[1m^[22m[39m
     [90m 181 |[39m     expect(result[33m.[39mhistogram[[35m50[39m])[33m.[39mnot[33m.[39mtoBeNaN()[33m;[39m
     [90m 182 |[39m   })[33m;[39m
     [90m 183 |[39m[0m

      at Object.toBeNaN (app/__tests__/utils-technical-indicators.test.ts:180:35)

  ‚óè Technical Indicators - calculateMACD ‚Ä∫ should calculate histogram correctly (macd - signal)

    expect(received).toBeCloseTo(expected)

    Expected: NaN
    Received: NaN

    Expected precision:    2
    Expected difference: < 0.005
    Received difference:   NaN

    [0m [90m 214 |[39m
     [90m 215 |[39m     [36mconst[39m validIndex [33m=[39m [35m50[39m[33m;[39m
    [31m[1m>[22m[39m[90m 216 |[39m     expect(result[33m.[39mhistogram[validIndex])[33m.[39mtoBeCloseTo(
     [90m     |[39m                                          [31m[1m^[22m[39m
     [90m 217 |[39m       result[33m.[39mmacd[validIndex] [33m-[39m result[33m.[39msignal[validIndex]
     [90m 218 |[39m     )[33m;[39m
     [90m 219 |[39m   })[33m;[39m[0m

      at Object.toBeCloseTo (app/__tests__/utils-technical-indicators.test.ts:216:42)

  ‚óè Technical Indicators - calculateATR ‚Ä∫ should handle NaN values in input

    expect(received).not.toBeNaN()

    Received: NaN

    [0m [90m 313 |[39m     [36mconst[39m result [33m=[39m calculateATR(highs[33m,[39m lows[33m,[39m closes[33m,[39m [35m14[39m)[33m;[39m
     [90m 314 |[39m
    [31m[1m>[22m[39m[90m 315 |[39m     expect(result[[35m13[39m])[33m.[39mnot[33m.[39mtoBeNaN()[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 316 |[39m     expect(result[[35m14[39m])[33m.[39mtoBeNaN()[33m;[39m [90m// NaN in calculation[39m
     [90m 317 |[39m   })[33m;[39m
     [90m 318 |[39m[0m

      at Object.toBeNaN (app/__tests__/utils-technical-indicators.test.ts:315:28)

  ‚óè Technical Indicators - calculateATR ‚Ä∫ should handle null and undefined values

    expect(received).not.toBeNaN()

    Received: NaN

    [0m [90m 324 |[39m     [36mconst[39m result [33m=[39m calculateATR(highs[33m,[39m lows[33m,[39m closes[33m,[39m [35m14[39m)[33m;[39m
     [90m 325 |[39m
    [31m[1m>[22m[39m[90m 326 |[39m     expect(result[[35m13[39m])[33m.[39mnot[33m.[39mtoBeNaN()[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 327 |[39m     expect(result[[35m14[39m])[33m.[39mtoBeNaN()[33m;[39m
     [90m 328 |[39m   })[33m;[39m
     [90m 329 |[39m[0m

      at Object.toBeNaN (app/__tests__/utils-technical-indicators.test.ts:326:28)

  ‚óè Technical Indicators - calculateATR ‚Ä∫ should handle negative values by treating them as invalid

    expect(received).not.toBeNaN()

    Received: NaN

    [0m [90m 335 |[39m     [36mconst[39m result [33m=[39m calculateATR(highs[33m,[39m lows[33m,[39m closes[33m,[39m [35m14[39m)[33m;[39m
     [90m 336 |[39m
    [31m[1m>[22m[39m[90m 337 |[39m     expect(result[[35m13[39m])[33m.[39mnot[33m.[39mtoBeNaN()[33m;[39m
     [90m     |[39m                            [31m[1m^[22m[39m
     [90m 338 |[39m     expect(result[[35m14[39m])[33m.[39mtoBeNaN()[33m;[39m
     [90m 339 |[39m   })[33m;[39m
     [90m 340 |[39m[0m

      at Object.toBeNaN (app/__tests__/utils-technical-indicators.test.ts:337:28)

  ‚óè Technical Indicators - calculateATR ‚Ä∫ should handle arrays of different lengths

    expect(received).toBe(expected) // Object.is equality

    Expected: 2
    Received: 3

    [0m [90m 351 |[39m
     [90m 352 |[39m     [90m// Should use the minimum length[39m
    [31m[1m>[22m[39m[90m 353 |[39m     expect(result[33m.[39mlength)[33m.[39mtoBe([35m2[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 354 |[39m   })[33m;[39m
     [90m 355 |[39m
     [90m 356 |[39m   it([32m'should use default period of 14'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toBe (app/__tests__/utils-technical-indicators.test.ts:353:27)

  ‚óè Technical Indicators - Edge Cases and Error Handling ‚Ä∫ should handle arrays with all NaN values

    expect(received).toBeNaN()

    Received: 100

    [0m [90m 396 |[39m
     [90m 397 |[39m     sma[33m.[39mforEach(v [33m=>[39m expect(v)[33m.[39mtoBeNaN())[33m;[39m
    [31m[1m>[22m[39m[90m 398 |[39m     rsi[33m.[39mforEach(v [33m=>[39m expect(v)[33m.[39mtoBeNaN())[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 399 |[39m     macd[33m.[39mmacd[33m.[39mforEach(v [33m=>[39m expect(v)[33m.[39mtoBeNaN())[33m;[39m
     [90m 400 |[39m   })[33m;[39m
     [90m 401 |[39m[0m

      at toBeNaN (app/__tests__/utils-technical-indicators.test.ts:398:32)
          at Array.forEach (<anonymous>)
      at Object.forEach (app/__tests__/utils-technical-indicators.test.ts:398:9)

FAIL app/lib/__tests__/mlPrediction.test.ts
  ‚óè MLPredictionService ‚Ä∫ predict ‚Ä∫ should calculate ensemble prediction from weighted models

    expect(received).toBeCloseTo(expected, precision)

    Expected: 0.801408019374783
    Received: 0.8458893471756127

    Expected precision:    5
    Expected difference: < 0.000005
    Received difference:   0.044481327800829695

    [0m [90m 198 |[39m         prediction[33m.[39mlstmPrediction [33m*[39m [33mENSEMBLE_WEIGHTS[39m[33m.[39m[33mLSTM[39m[33m;[39m
     [90m 199 |[39m       
    [31m[1m>[22m[39m[90m 200 |[39m       expect(prediction[33m.[39mensemblePrediction)[33m.[39mtoBeCloseTo(expectedEnsemble[33m,[39m [35m5[39m)[33m;[39m
     [90m     |[39m                                             [31m[1m^[22m[39m
     [90m 201 |[39m     })[33m;[39m
     [90m 202 |[39m   })[33m;[39m
     [90m 203 |[39m[0m

      at Object.toBeCloseTo (app/lib/__tests__/mlPrediction.test.ts:200:45)

  ‚óè MLPredictionService ‚Ä∫ Edge cases ‚Ä∫ should handle flat prices

    expect(received).toBe(expected) // Object.is equality

    Expected: "HOLD"
    Received: "SELL"

    [0m [90m 338 |[39m
     [90m 339 |[39m       [90m// With flat prices, should likely be HOLD[39m
    [31m[1m>[22m[39m[90m 340 |[39m       expect(signal[33m.[39mtype)[33m.[39mtoBe([32m'HOLD'[39m)[33m;[39m
     [90m     |[39m                           [31m[1m^[22m[39m
     [90m 341 |[39m     })[33m;[39m
     [90m 342 |[39m   })[33m;[39m
     [90m 343 |[39m })[33m;[39m[0m

      at Object.toBe (app/lib/__tests__/mlPrediction.test.ts:340:27)

FAIL app/__tests__/utils-error-handling.test.ts
  ‚óè Utils Error Handling ‚Ä∫ WebSocket URL Error Handling ‚Ä∫ should handle path without leading slash

    expect(received).toContain(expected) // indexOf

    Expected substring: "/ws/signals"
    Received string:    "ws://localhost:8000ws/signals"

    [0m [90m 288 |[39m     it([32m'should handle path without leading slash'[39m[33m,[39m () [33m=>[39m {
     [90m 289 |[39m       [36mconst[39m result [33m=[39m getWebSocketUrl([32m'ws/signals'[39m)[33m;[39m
    [31m[1m>[22m[39m[90m 290 |[39m       expect(result)[33m.[39mtoContain([32m'/ws/signals'[39m)[33m;[39m
     [90m     |[39m                      [31m[1m^[22m[39m
     [90m 291 |[39m     })[33m;[39m
     [90m 292 |[39m
     [90m 293 |[39m     it([32m'should handle path with leading slash'[39m[33m,[39m () [33m=>[39m {[0m

      at Object.toContain (app/__tests__/utils-error-handling.test.ts:290:22)

FAIL app/__tests__/ml-prediction.test.ts (5.534 s)
  ‚óè MLPredictionService ‚Ä∫ calculateIndicators ‚Ä∫ should return indicators with correct values

    expect(received).toBeGreaterThanOrEqual(expected)

    Expected: >= 0
    Received:    NaN

    [0m [90m 92 |[39m
     [90m 93 |[39m       [90m// SMA„ÅÆË®àÁÆóÁµêÊûú„ÇíÊ§úË®ºÔºàÁ∞°ÊòìÁöÑ„Å´ÊúÄÂàù„ÅÆÂÄ§„ÅÆ„ÅøÔºâ[39m
    [31m[1m>[22m[39m[90m 94 |[39m       expect(result[33m.[39msma5[[35m0[39m])[33m.[39mtoBeGreaterThanOrEqual([35m0[39m)[33m;[39m
     [90m    |[39m                              [31m[1m^[22m[39m
     [90m 95 |[39m       expect(result[33m.[39msma20[[35m0[39m])[33m.[39mtoBeGreaterThanOrEqual([35m0[39m)[33m;[39m
     [90m 96 |[39m       expect(result[33m.[39msma50[[35m0[39m])[33m.[39mtoBeGreaterThanOrEqual([35m0[39m)[33m;[39m
     [90m 97 |[39m[0m

      at Object.toBeGreaterThanOrEqual (app/__tests__/ml-prediction.test.ts:94:30)

  ‚óè MLPredictionService ‚Ä∫ analyzeMarketCorrelation ‚Ä∫ should handle market correlation analysis

    TypeError: _mlPrediction.mlPredictionService.analyzeMarketCorrelation is not a function

    [0m [90m 277 |[39m       [90m// „Éó„É©„Ç§„Éô„Éº„Éà„É°„ÇΩ„ÉÉ„Éâ„Çí„ÉÜ„Çπ„Éà„Åô„Çã„Åü„ÇÅ„ÅÆ„É©„ÉÉ„Éë„ÉºÈñ¢Êï∞„ÇíÂÆöÁæ©[39m
     [90m 278 |[39m       [36mconst[39m analyzeMarketCorrelation [33m=[39m (stock[33m:[39m [33mStock[39m[33m,[39m data[33m:[39m [33mOHLCV[39m[][33m,[39m indexDataInput[33m:[39m [33mOHLCV[39m[] [33m|[39m undefined[33m,[39m prediction[33m:[39m number) [33m=>[39m {
    [31m[1m>[22m[39m[90m 279 |[39m         [36mreturn[39m (mlPredictionService [36mas[39m any)[33m.[39manalyzeMarketCorrelation(stock[33m,[39m data[33m,[39m indexDataInput[33m,[39m prediction)[33m;[39m
     [90m     |[39m                                             [31m[1m^[22m[39m
     [90m 280 |[39m       }[33m;[39m
     [90m 281 |[39m
     [90m 282 |[39m       [36mconst[39m result [33m=[39m analyzeMarketCorrelation(mockStock[33m,[39m mockOHLCVData[33m,[39m indexData[33m,[39m [35m2.5[39m)[33m;[39m[0m

      at analyzeMarketCorrelation (app/__tests__/ml-prediction.test.ts:279:45)
      at Object.analyzeMarketCorrelation (app/__tests__/ml-prediction.test.ts:282:22)

  ‚óè MLPredictionService ‚Ä∫ analyzeMarketCorrelation ‚Ä∫ should handle undefined index data

    TypeError: _mlPrediction.mlPredictionService.analyzeMarketCorrelation is not a function

    [0m [90m 302 |[39m     it([32m'should handle undefined index data'[39m[33m,[39m () [33m=>[39m {
     [90m 303 |[39m       [36mconst[39m analyzeMarketCorrelation [33m=[39m (stock[33m:[39m [33mStock[39m[33m,[39m data[33m:[39m [33mOHLCV[39m[][33m,[39m indexDataInput[33m:[39m [33mOHLCV[39m[] [33m|[39m undefined[33m,[39m prediction[33m:[39m number) [33m=>[39m {
    [31m[1m>[22m[39m[90m 304 |[39m         [36mreturn[39m (mlPredictionService [36mas[39m any)[33m.[39manalyzeMarketCorrelation(stock[33m,[39m data[33m,[39m indexDataInput[33m,[39m prediction)[33m;[39m
     [90m     |[39m                                             [31m[1m^[22m[39m
     [90m 305 |[39m       }[33m;[39m
     [90m 306 |[39m
     [90m 307 |[39m       [36mconst[39m result [33m=[39m analyzeMarketCorrelation(mockStock[33m,[39m mockOHLCVData[33m,[39m undefined[33m,[39m [35m2.5[39m)[33m;[39m[0m

      at analyzeMarketCorrelation (app/__tests__/ml-prediction.test.ts:304:45)
      at Object.analyzeMarketCorrelation (app/__tests__/ml-prediction.test.ts:307:22)

FAIL app/lib/__tests__/OptimizedBacktest.perf.test.ts (6.057 s)
  ‚óè „Éê„ÉÉ„ÇØ„ÉÜ„Çπ„ÉàË®àÁÆó„ÅÆ„Éë„Éï„Ç©„Éº„Éû„É≥„Çπ„ÉÜ„Çπ„Éà ‚Ä∫ 1Âπ¥ÂàÜÔºàÂñ∂Ê•≠Êó•Ôºâ„ÅÆ„Éá„Éº„ÇøÔºà252Êó•Ôºâ ‚Ä∫ ‰∏°ÂÆüË£Ö„ÅÆÁµêÊûú„Åå‰∏ÄËá¥„Åô„Çã

    expect(received).toBe(expected) // Object.is equality

    Expected: 0
    Received: 2

    [0m [90m 115 |[39m
     [90m 116 |[39m         [90m// ‰∏ªË¶Å„Å™ÊåáÊ®ô„Åå‰∏ÄËá¥„Åô„Çã„Åì„Å®„ÇíÁ¢∫Ë™ç[39m
    [31m[1m>[22m[39m[90m 117 |[39m         expect(optimizedResult[33m.[39mtotalTrades)[33m.[39mtoBe(originalResult[33m.[39mtotalTrades)[33m;[39m
     [90m     |[39m                                             [31m[1m^[22m[39m
     [90m 118 |[39m         expect(optimizedResult[33m.[39mwinningTrades)[33m.[39mtoBe(originalResult[33m.[39mwinningTrades)[33m;[39m
     [90m 119 |[39m         expect(optimizedResult[33m.[39mlosingTrades)[33m.[39mtoBe(originalResult[33m.[39mlosingTrades)[33m;[39m
     [90m 120 |[39m         expect(optimizedResult[33m.[39mwinRate)[33m.[39mtoBeCloseTo(originalResult[33m.[39mwinRate[33m,[39m [35m1[39m)[33m;[39m[0m

      at Object.toBe (app/lib/__tests__/OptimizedBacktest.perf.test.ts:117:45)

  ‚óè „Éê„ÉÉ„ÇØ„ÉÜ„Çπ„ÉàË®àÁÆó„ÅÆ„Éë„Éï„Ç©„Éº„Éû„É≥„Çπ„ÉÜ„Çπ„Éà ‚Ä∫ „Ç≠„É£„ÉÉ„Ç∑„É•Ê©üËÉΩ„ÅÆ„ÉÜ„Çπ„Éà ‚Ä∫ Âêå„Åò„Éá„Éº„Çø„ÅÆ2ÂõûÁõÆ„ÅÆË®àÁÆó„ÅØ„Ç≠„É£„ÉÉ„Ç∑„É•„Åã„ÇâÂèñÂæó„Åï„Çå„Çã

    expect(received).toBeLessThan(expected)

    Expected: < 3.9944500000001426
    Received:   14.892799999999625

    [0m [90m 152 |[39m
     [90m 153 |[39m       [90m// 2ÂõûÁõÆ„ÅØÂ§ßÂπÖ„Å´È´òÈÄüÔºà„Ç≠„É£„ÉÉ„Ç∑„É•„Éí„ÉÉ„ÉàÔºâ[39m
    [31m[1m>[22m[39m[90m 154 |[39m       expect(executionTime2)[33m.[39mtoBeLessThan(executionTime1 [33m*[39m [35m0.5[39m)[33m;[39m
     [90m     |[39m                              [31m[1m^[22m[39m
     [90m 155 |[39m     })[33m;[39m
     [90m 156 |[39m   })[33m;[39m
     [90m 157 |[39m[0m

      at Object.toBeLessThan (app/lib/__tests__/OptimizedBacktest.perf.test.ts:154:30)

  ‚óè Ë®àÁÆóÈáè„ÅÆÁêÜË´ñÁöÑÂàÜÊûê ‚Ä∫ OptimizedAccuracyService„ÅÆË®àÁÆóÈáè„ÅØO(N)„Åß„ÅÇ„Çã

    expect(received).toBeGreaterThan(expected)

    Expected: > 1.5
    Received:   0.5041822522133583

    [0m [90m 205 |[39m
     [90m 206 |[39m     [90m// Á∑öÂΩ¢ÊôÇÈñì„ÅÆË®±ÂÆπÁØÑÂõ≤Ôºà1.5 ~ 3.0ÂÄçÔºâ[39m
    [31m[1m>[22m[39m[90m 207 |[39m     expect(ratio1)[33m.[39mtoBeGreaterThan([35m1.5[39m)[33m;[39m
     [90m     |[39m                    [31m[1m^[22m[39m
     [90m 208 |[39m     expect(ratio1)[33m.[39mtoBeLessThan([35m3.0[39m)[33m;[39m
     [90m 209 |[39m     expect(ratio2)[33m.[39mtoBeGreaterThan([35m1.5[39m)[33m;[39m
     [90m 210 |[39m     expect(ratio2)[33m.[39mtoBeLessThan([35m3.0[39m)[33m;[39m[0m

      at Object.toBeGreaterThan (app/lib/__tests__/OptimizedBacktest.perf.test.ts:207:20)

FAIL app/__tests__/tradingCore.test.ts (7.541 s)
  ‚óè UnifiedTradingPlatform ‚Ä∫ portfolio management ‚Ä∫ should calculate P&L correctly

    expect(received).toBeGreaterThanOrEqual(expected)

    Expected: >= 0
    Received:    -0.1

    [0m [90m 147 |[39m       [36mconst[39m positions [33m=[39m platform[33m.[39mgetPortfolio()[33m.[39mpositions[33m;[39m
     [90m 148 |[39m       [36mif[39m (positions[33m.[39mlength [33m>[39m [35m0[39m) {
    [31m[1m>[22m[39m[90m 149 |[39m         expect(positions[[35m0[39m][33m.[39munrealizedPnL)[33m.[39mtoBeGreaterThanOrEqual([35m0[39m)[33m;[39m
     [90m     |[39m                                            [31m[1m^[22m[39m
     [90m 150 |[39m       }
     [90m 151 |[39m     })[33m;[39m
     [90m 152 |[39m   })[33m;[39m[0m

      at Object.toBeGreaterThanOrEqual (app/__tests__/tradingCore.test.ts:149:44)

  ‚óè UnifiedTradingPlatform ‚Ä∫ risk management ‚Ä∫ should prevent overexposure

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 169 |[39m       
     [90m 170 |[39m       [36mconst[39m positions [33m=[39m platform[33m.[39mgetPortfolio()[33m.[39mpositions[33m;[39m
    [31m[1m>[22m[39m[90m 171 |[39m       expect(positions[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 172 |[39m       expect(positions[[35m0[39m][33m.[39mquantity)[33m.[39mtoBeLessThanOrEqual([35m0.025[39m)[33m;[39m [90m// ~10% of $100k at $40k price[39m
     [90m 173 |[39m     })[33m;[39m
     [90m 174 |[39m   })[33m;[39m[0m

      at Object.toBeGreaterThan (app/__tests__/tradingCore.test.ts:171:32)

FAIL app/__tests__/tradingCore.test.tsx (7.681 s)
  ‚óè UnifiedTradingPlatform ‚Ä∫ portfolio management ‚Ä∫ should calculate P&L correctly

    expect(received).toBeGreaterThanOrEqual(expected)

    Expected: >= 0
    Received:    -0.1

    [0m [90m 147 |[39m       [36mconst[39m positions [33m=[39m platform[33m.[39mgetPortfolio()[33m.[39mpositions[33m;[39m
     [90m 148 |[39m       [36mif[39m (positions[33m.[39mlength [33m>[39m [35m0[39m) {
    [31m[1m>[22m[39m[90m 149 |[39m         expect(positions[[35m0[39m][33m.[39munrealizedPnL)[33m.[39mtoBeGreaterThanOrEqual([35m0[39m)[33m;[39m
     [90m     |[39m                                            [31m[1m^[22m[39m
     [90m 150 |[39m       }
     [90m 151 |[39m     })[33m;[39m
     [90m 152 |[39m   })[33m;[39m[0m

      at Object.toBeGreaterThanOrEqual (app/__tests__/tradingCore.test.tsx:149:44)

  ‚óè UnifiedTradingPlatform ‚Ä∫ risk management ‚Ä∫ should prevent overexposure

    expect(received).toBeGreaterThan(expected)

    Expected: > 0
    Received:   0

    [0m [90m 169 |[39m       
     [90m 170 |[39m       [36mconst[39m positions [33m=[39m platform[33m.[39mgetPortfolio()[33m.[39mpositions[33m;[39m
    [31m[1m>[22m[39m[90m 171 |[39m       expect(positions[33m.[39mlength)[33m.[39mtoBeGreaterThan([35m0[39m)[33m;[39m
     [90m     |[39m                                [31m[1m^[22m[39m
     [90m 172 |[39m       expect(positions[[35m0[39m][33m.[39mquantity)[33m.[39mtoBeLessThanOrEqual([35m0.025[39m)[33m;[39m [90m// ~10% of $100k at $40k price[39m
     [90m 173 |[39m     })[33m;[39m
     [90m 174 |[39m   })[33m;[39m[0m

      at Object.toBeGreaterThan (app/__tests__/tradingCore.test.tsx:171:32)

FAIL app/lib/__tests__/TransactionCostModel.test.ts
  ‚óè TransactionCostModel ‚Ä∫ Slippage Estimation ‚Ä∫ should consider order size relative to average volume

    expect(received).toBeGreaterThan(expected)

    Expected: > 0.002206
    Received:   0.001836

    [0m [90m 116 |[39m       [36mconst[39m largeOrder [33m=[39m transactionCostModel[33m.[39mestimateSlippage([35m500000[39m[33m,[39m [32m'normal'[39m[33m,[39m [35m1000000[39m)[33m;[39m
     [90m 117 |[39m       
    [31m[1m>[22m[39m[90m 118 |[39m       expect(largeOrder[33m.[39mslippageRate)[33m.[39mtoBeGreaterThan(smallOrder[33m.[39mslippageRate)[33m;[39m
     [90m     |[39m                                       [31m[1m^[22m[39m
     [90m 119 |[39m     })[33m;[39m
     [90m 120 |[39m   })[33m;[39m
     [90m 121 |[39m[0m

      at Object.toBeGreaterThan (app/lib/__tests__/TransactionCostModel.test.ts:118:39)

FAIL app/lib/__tests__/TechnicalIndicatorService.property.test.ts
  ‚óè Test suite failed to run

    Configuration error:

    Could not locate module fast-check mapped as:
    C:\gemini-thinkpad\Ult\trading-platform\node_modules\fast-check\lib\esm\entry\main.js.

    Please check your configuration for these entries:
    {
      "moduleNameMapper": {
        "/^fast-check$/": "C:\gemini-thinkpad\Ult\trading-platform\node_modules\fast-check\lib\esm\entry\main.js"
      },
      "resolver": undefined
    }

    [0m [90m  8 |[39m [36mimport[39m [33m*[39m [36mas[39m fc [36mfrom[39m [32m'fast-check'[39m[33m;[39m
     [90m  9 |[39m
    [31m[1m>[22m[39m[90m 10 |[39m [90m// Helper to generate valid price data (positive numbers only)[39m
     [90m    |[39m                                                            [31m[1m^[22m[39m
     [90m 11 |[39m [36mconst[39m positivePriceArb [33m=[39m (minLength[33m:[39m number[33m,[39m maxLength[33m:[39m number)[33m:[39m fc[33m.[39m[33mArbitrary[39m[33m<[39m[33mnumber[39m[][33m>[39m [33m=>[39m 
     [90m 12 |[39m   fc[33m.[39marray(fc[33m.[39mnat([35m10000[39m)[33m.[39mmap((n[33m:[39m number) [33m=>[39m n [33m+[39m [35m1[39m)[33m,[39m { minLength[33m,[39m maxLength })[33m;[39m
     [90m 13 |[39m[0m

      at createNoMappedModuleFoundError (node_modules/jest-resolve/build/index.js:1117:17)
      at Object.<anonymous> (app/lib/__tests__/TechnicalIndicatorService.property.test.ts:10:60)

FAIL app/hooks/__tests__/useStockData.test.ts
  ‚óè Test suite failed to run

    Cannot find module '@/app/store/tradingStore' from 'app/hooks/__tests__/useStockData.test.ts'

    [0m [90m  5 |[39m
     [90m  6 |[39m [90m// Mock dependencies[39m
    [31m[1m>[22m[39m[90m  7 |[39m jest[33m.[39mmock([32m'@/app/store/tradingStore'[39m)[33m;[39m
     [90m    |[39m      [31m[1m^[22m[39m
     [90m  8 |[39m jest[33m.[39mmock([32m'@/app/data/stocks'[39m)[33m;[39m
     [90m  9 |[39m
     [90m 10 |[39m describe([32m'useStockData'[39m[33m,[39m () [33m=>[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.mock (app/hooks/__tests__/useStockData.test.ts:7:6)

FAIL app/store/__tests__/tradingStore.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../tradingStore' from 'app/store/__tests__/tradingStore.test.ts'

    [0m [90m 4 |[39m [36mimport[39m { [33mAI_TRADING[39m } [36mfrom[39m [32m'@/app/lib/constants'[39m[33m;[39m
     [90m 5 |[39m
    [31m[1m>[22m[39m[90m 6 |[39m [90m// Mock localStorage for Zustand persist[39m
     [90m   |[39m                       [31m[1m^[22m[39m
     [90m 7 |[39m [36mconst[39m localStorageMock [33m=[39m ([36mfunction[39m() {
     [90m 8 |[39m   [36mlet[39m store[33m:[39m [33mRecord[39m[33m<[39m[33mstring[39m[33m,[39m string[33m>[39m [33m=[39m {}[33m;[39m
     [90m 9 |[39m   [36mreturn[39m {[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (app/store/__tests__/tradingStore.test.ts:6:23)

FAIL app/components/__tests__/StockTable.test.tsx
  ‚óè Test suite failed to run

    Cannot find module '@/app/store/tradingStore' from 'app/components/__tests__/StockTable.test.tsx'

    [0m [90m  6 |[39m
     [90m  7 |[39m [90m// Mock dependencies[39m
    [31m[1m>[22m[39m[90m  8 |[39m jest[33m.[39mmock([32m'@/app/store/tradingStore'[39m[33m,[39m () [33m=>[39m ({
     [90m    |[39m      [31m[1m^[22m[39m
     [90m  9 |[39m     useTradingStore[33m:[39m jest[33m.[39mfn()[33m,[39m
     [90m 10 |[39m }))[33m;[39m
     [90m 11 |[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.mock (app/components/__tests__/StockTable.test.tsx:8:6)

FAIL app/components/__tests__/OrderPanel.test.tsx
  ‚óè Test suite failed to run

    Cannot find module '@/app/store/tradingStore' from 'app/components/__tests__/OrderPanel.test.tsx'

    [0m [90m  5 |[39m
     [90m  6 |[39m [90m// Mock store[39m
    [31m[1m>[22m[39m[90m  7 |[39m jest[33m.[39mmock([32m'@/app/store/tradingStore'[39m)[33m;[39m
     [90m    |[39m      [31m[1m^[22m[39m
     [90m  8 |[39m
     [90m  9 |[39m describe([32m'OrderPanel'[39m[33m,[39m () [33m=>[39m {
     [90m 10 |[39m     [36mconst[39m mockStock [33m=[39m { symbol[33m:[39m [32m'7203'[39m[33m,[39m name[33m:[39m [32m'Toyota'[39m[33m,[39m price[33m:[39m [35m2000[39m[33m,[39m change[33m:[39m [35m0[39m[33m,[39m changePercent[33m:[39m [35m0[39m[33m,[39m market[33m:[39m [32m'japan'[39m [36mas[39m [36mconst[39m[33m,[39m sector[33m:[39m [32m'Automotive'[39m[33m,[39m volume[33m:[39m [35m1000000[39m }[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.mock (app/components/__tests__/OrderPanel.test.tsx:7:6)

FAIL app/components/__tests__/ShellComponents.test.tsx
  ‚óè Test suite failed to run

    Cannot find module '@/app/store/tradingStore' from 'app/components/__tests__/ShellComponents.test.tsx'

    [0m [90m 26 |[39m [90m// Mock store[39m
     [90m 27 |[39m [36mimport[39m { useTradingStore } [36mfrom[39m [32m'@/app/store/tradingStore'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 28 |[39m jest[33m.[39mmock([32m'@/app/store/tradingStore'[39m[33m,[39m () [33m=>[39m ({
     [90m    |[39m      [31m[1m^[22m[39m
     [90m 29 |[39m     useTradingStore[33m:[39m jest[33m.[39mfn()
     [90m 30 |[39m }))[33m;[39m
     [90m 31 |[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.mock (app/components/__tests__/ShellComponents.test.tsx:28:6)

FAIL app/components/__tests__/SignalPanel.test.tsx
  ‚óè Test suite failed to run

    Cannot find module '@/app/store/tradingStore' from 'app/components/__tests__/SignalPanel.test.tsx'

    [0m [90m  6 |[39m
     [90m  7 |[39m [90m// Mocks[39m
    [31m[1m>[22m[39m[90m  8 |[39m jest[33m.[39mmock([32m'@/app/store/tradingStore'[39m[33m,[39m () [33m=>[39m ({
     [90m    |[39m      [31m[1m^[22m[39m
     [90m  9 |[39m   useTradingStore[33m:[39m jest[33m.[39mfn()[33m,[39m
     [90m 10 |[39m }))[33m;[39m
     [90m 11 |[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.mock (app/components/__tests__/SignalPanel.test.tsx:8:6)

FAIL app/__tests__/tradingStore.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../store/tradingStore' from 'app/__tests__/tradingStore.test.ts'

    [0m [90m 3 |[39m
     [90m 4 |[39m describe([32m'tradingStore'[39m[33m,[39m () [33m=>[39m {
    [31m[1m>[22m[39m[90m 5 |[39m   beforeEach(() [33m=>[39m {
     [90m   |[39m                       [31m[1m^[22m[39m
     [90m 6 |[39m     useTradingStore[33m.[39msetState(useTradingStore[33m.[39mgetInitialState())[33m;[39m
     [90m 7 |[39m   })[33m;[39m
     [90m 8 |[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (app/__tests__/tradingStore.test.ts:5:23)

FAIL app/components/__tests__/Header.test.tsx
  ‚óè Test suite failed to run

    Cannot find module '@/app/store/portfolioStore' from 'app/components/__tests__/Header.test.tsx'

    [0m [90m  6 |[39m [36mimport[39m { useWatchlistStore } [36mfrom[39m [32m'@/app/store/watchlistStore'[39m[33m;[39m
     [90m  7 |[39m
    [31m[1m>[22m[39m[90m  8 |[39m jest[33m.[39mmock([32m'@/app/store/portfolioStore'[39m)[33m;[39m
     [90m    |[39m      [31m[1m^[22m[39m
     [90m  9 |[39m jest[33m.[39mmock([32m'@/app/store/uiStore'[39m)[33m;[39m
     [90m 10 |[39m jest[33m.[39mmock([32m'@/app/store/watchlistStore'[39m)[33m;[39m
     [90m 11 |[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.mock (app/components/__tests__/Header.test.tsx:8:6)

FAIL app/__tests__/tradingStore-atomic.test.ts
  ‚óè Test suite failed to run

    Cannot find module '../store/tradingStore' from 'app/__tests__/tradingStore-atomic.test.ts'

    [0m [90m  8 |[39m [36mimport[39m { useTradingStore[33m,[39m [33mOrderExecutionResult[39m } [36mfrom[39m [32m'../store/tradingStore'[39m[33m;[39m
     [90m  9 |[39m [36mimport[39m { act[33m,[39m renderHook } [36mfrom[39m [32m'@testing-library/react'[39m[33m;[39m
    [31m[1m>[22m[39m[90m 10 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m 11 |[39m describe([32m'TradingStore Atomic Order Execution'[39m[33m,[39m () [33m=>[39m {
     [90m 12 |[39m   beforeEach(() [33m=>[39m {
     [90m 13 |[39m     [90m// „Çπ„Éà„Ç¢„ÅÆÁä∂ÊÖã„Çí„É™„Çª„ÉÉ„Éà[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (app/__tests__/tradingStore-atomic.test.ts:10:23)

FAIL app/__tests__/StockTable.test.tsx
  ‚óè Test suite failed to run

    Cannot find module '../store/tradingStore' from 'app/__tests__/StockTable.test.tsx'

    [0m [90m 10 |[39m ][33m;[39m
     [90m 11 |[39m
    [31m[1m>[22m[39m[90m 12 |[39m jest[33m.[39mmock([32m'../store/tradingStore'[39m)[33m;[39m
     [90m    |[39m      [31m[1m^[22m[39m
     [90m 13 |[39m
     [90m 14 |[39m describe([32m'StockTable Component - Watchlist Actions'[39m[33m,[39m () [33m=>[39m {
     [90m 15 |[39m   [36mconst[39m mockRemoveFromWatchlist [33m=[39m jest[33m.[39mfn()[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.mock (app/__tests__/StockTable.test.tsx:12:6)

FAIL app/__tests__/SignalPanel.test.tsx
  ‚óè Test suite failed to run

    Cannot find module '@/app/hooks/useWebSocket' from 'app/__tests__/SignalPanel.test.tsx'

    [0m [90m  9 |[39m
     [90m 10 |[39m [90m// Mock WebSocket hook locally for this test[39m
    [31m[1m>[22m[39m[90m 11 |[39m jest[33m.[39mmock([32m'@/app/hooks/useWebSocket'[39m[33m,[39m () [33m=>[39m ({
     [90m    |[39m      [31m[1m^[22m[39m
     [90m 12 |[39m   useWebSocket[33m:[39m () [33m=>[39m ({
     [90m 13 |[39m     status[33m:[39m [32m'OPEN'[39m[33m,[39m
     [90m 14 |[39m     lastMessage[33m:[39m [36mnull[39m[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.mock (app/__tests__/SignalPanel.test.tsx:11:6)

FAIL app/__tests__/page_smoke.test.tsx
  ‚óè Test suite failed to run

    Cannot find module '@/app/components/Header' from 'app/__tests__/page_smoke.test.tsx'

    [0m [90m 4 |[39m
     [90m 5 |[39m [90m// Mock all sub-components to focus on page logic & layout[39m
    [31m[1m>[22m[39m[90m 6 |[39m jest[33m.[39mmock([32m'@/app/components/Header'[39m[33m,[39m () [33m=>[39m ({ [33mHeader[39m[33m:[39m () [33m=>[39m [33m<[39m[33mdiv[39m data[33m-[39mtestid[33m=[39m[32m"Header"[39m [33m/[39m[33m>[39m }))[33m;[39m
     [90m   |[39m      [31m[1m^[22m[39m
     [90m 7 |[39m jest[33m.[39mmock([32m'@/app/components/Navigation'[39m[33m,[39m () [33m=>[39m ({ [33mNavigation[39m[33m:[39m () [33m=>[39m [33m<[39m[33mdiv[39m data[33m-[39mtestid[33m=[39m[32m"Navigation"[39m [33m/[39m[33m>[39m }))[33m;[39m
     [90m 8 |[39m jest[33m.[39mmock([32m'@/app/components/StockChart'[39m[33m,[39m () [33m=>[39m ({ [33mStockChart[39m[33m:[39m () [33m=>[39m [33m<[39m[33mdiv[39m data[33m-[39mtestid[33m=[39m[32m"StockChart"[39m [33m/[39m[33m>[39m }))[33m;[39m
     [90m 9 |[39m jest[33m.[39mmock([32m'@/app/components/ChartToolbar'[39m[33m,[39m () [33m=>[39m ({ [33mChartToolbar[39m[33m:[39m () [33m=>[39m [33m<[39m[33mdiv[39m data[33m-[39mtestid[33m=[39m[32m"ChartToolbar"[39m [33m/[39m[33m>[39m }))[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.mock (app/__tests__/page_smoke.test.tsx:6:6)

FAIL app/__tests__/StockTableAccessibility.test.tsx
  ‚óè Test suite failed to run

    Cannot find module '../store/tradingStore' from 'app/components/StockTable.tsx'

    Require stack:
      app/components/StockTable.tsx
      app/__tests__/StockTableAccessibility.test.tsx

    [0m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (app/components/StockTable.tsx:1677:27)
      at Object.<anonymous> (app/__tests__/StockTableAccessibility.test.tsx:7:21)

FAIL app/__tests__/OrderPanel.test.tsx
  ‚óè Test suite failed to run

    Cannot find module '@/app/store/portfolioStore' from 'app/__tests__/OrderPanel.test.tsx'

    [0m [90m 4 |[39m
     [90m 5 |[39m [90m// Mock zustand[39m
    [31m[1m>[22m[39m[90m 6 |[39m jest[33m.[39mmock([32m'@/app/store/portfolioStore'[39m[33m,[39m () [33m=>[39m ({
     [90m   |[39m      [31m[1m^[22m[39m
     [90m 7 |[39m   usePortfolioStore[33m:[39m () [33m=>[39m ({
     [90m 8 |[39m     portfolio[33m:[39m { cash[33m:[39m [35m20000[39m }[33m,[39m
     [90m 9 |[39m     addPosition[33m:[39m jest[33m.[39mfn()[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.mock (app/__tests__/OrderPanel.test.tsx:6:6)

FAIL app/__tests__/market-api.test.ts
  ‚óè Test suite failed to run

    Cannot find module '@/app/lib/ip-rate-limit' from 'app/__tests__/market-api.test.ts'

    [0m [90m 25 |[39m })[33m;[39m
     [90m 26 |[39m
    [31m[1m>[22m[39m[90m 27 |[39m jest[33m.[39mmock([32m'@/app/lib/ip-rate-limit'[39m[33m,[39m () [33m=>[39m ({
     [90m    |[39m      [31m[1m^[22m[39m
     [90m 28 |[39m     ipRateLimiter[33m:[39m {
     [90m 29 |[39m         check[33m:[39m jest[33m.[39mfn(() [33m=>[39m [36mtrue[39m)
     [90m 30 |[39m     }[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.mock (app/__tests__/market-api.test.ts:27:6)

FAIL app/__tests__/Screener.test.tsx
  ‚óè Test suite failed to run

    Cannot find module '../store/tradingStore' from 'app/__tests__/Screener.test.tsx'

    [0m [90m 56 |[39m
     [90m 57 |[39m         (useTradingStore [36mas[39m any)[33m.[39msetState({
    [31m[1m>[22m[39m[90m 58 |[39m             addToWatchlist[33m:[39m mockAddToWatchlist[33m,[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 59 |[39m             setSelectedStock[33m:[39m mockSetSelectedStock[33m,[39m
     [90m 60 |[39m         })[33m;[39m
     [90m 61 |[39m     })[33m;[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (app/__tests__/Screener.test.tsx:58:23)

FAIL app/__tests__/OrderPanel_enhanced.test.tsx
  ‚óè Test suite failed to run

    Cannot find module '../store/tradingStore' from 'app/components/OrderPanel.tsx'

    Require stack:
      app/components/OrderPanel.tsx
      app/__tests__/OrderPanel_enhanced.test.tsx

    [0m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (app/components/OrderPanel.tsx:1768:26)
      at Object.<anonymous> (app/__tests__/OrderPanel_enhanced.test.tsx:21:21)

FAIL app/__tests__/page_performance.test.tsx
  ‚óè Test suite failed to run

    Cannot find module '../store/tradingStore' from 'app/__tests__/page_performance.test.tsx'

    [0m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (app/__tests__/page_performance.test.tsx:76:23)

FAIL app/__tests__/page.test.tsx
  ‚óè Test suite failed to run

    Cannot find module '../store/tradingStore' from 'app/__tests__/page.test.tsx'

    [0m [90m 54 |[39m     
     [90m 55 |[39m     expect(screen[33m.[39mqueryByText([32m'ÈäòÊüÑ„ÅåÊú™ÈÅ∏Êäû„Åß„Åô'[39m))[33m.[39mnot[33m.[39mtoBeInTheDocument()[33m;[39m
    [31m[1m>[22m[39m[90m 56 |[39m   })[33m;[39m
     [90m    |[39m                [31m[1m^[22m[39m
     [90m 57 |[39m })[33m;[39m
     [90m 58 |[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (app/__tests__/page.test.tsx:56:23)

FAIL app/__tests__/api-client.test.ts
  ‚óè Test suite failed to run

    Cannot find module '@/app/lib/api/data-aggregator' from 'app/__tests__/api-client.test.ts'

    [0m [90m 38 |[39m
     [90m 39 |[39m [90m// API„ÇØ„É©„Ç§„Ç¢„É≥„Éà„ÅÆ„É¢„ÉÉ„ÇØ[39m
    [31m[1m>[22m[39m[90m 40 |[39m jest[33m.[39mmock([32m'@/app/lib/api/data-aggregator'[39m[33m,[39m () [33m=>[39m {
     [90m    |[39m      [31m[1m^[22m[39m
     [90m 41 |[39m   [36mreturn[39m {
     [90m 42 |[39m     marketClient[33m:[39m {
     [90m 43 |[39m       fetchOHLCV[33m:[39m jest[33m.[39mfn()[33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.mock (app/__tests__/api-client.test.ts:40:6)

FAIL app/__tests__/Journal.test.tsx
  ‚óè Test suite failed to run

    Cannot find module '../store/tradingStore' from 'app/__tests__/Journal.test.tsx'

    [0m [90m 13 |[39m         jest[33m.[39mclearAllMocks()[33m;[39m
     [90m 14 |[39m     })[33m;[39m
    [31m[1m>[22m[39m[90m 15 |[39m
     [90m    |[39m [31m[1m^[22m[39m
     [90m 16 |[39m     it([32m'renders empty stats and empty state message when journal is empty'[39m[33m,[39m () [33m=>[39m {
     [90m 17 |[39m         (useTradingStore [36mas[39m any)[33m.[39msetState({
     [90m 18 |[39m             journal[33m:[39m [][33m,[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (app/__tests__/Journal.test.tsx:15:23)

FAIL app/__tests__/Heatmap.test.tsx
  ‚óè Test suite failed to run

    Cannot find module '../store/tradingStore' from 'app/__tests__/Heatmap.test.tsx'

    [0m [90m 60 |[39m     beforeEach(() [33m=>[39m {
     [90m 61 |[39m         jest[33m.[39mclearAllMocks()[33m;[39m
    [31m[1m>[22m[39m[90m 62 |[39m         (useRouter [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockReturnValue({ push[33m:[39m mockPush })[33m;[39m
     [90m    |[39m                       [31m[1m^[22m[39m
     [90m 63 |[39m         (marketClient[33m.[39mfetchQuotes [36mas[39m jest[33m.[39m[33mMock[39m)[33m.[39mmockResolvedValue(mockQuotes)[33m;[39m
     [90m 64 |[39m
     [90m 65 |[39m         [90m// Mock Store[39m[0m

      at Resolver._throwModNotFoundError (node_modules/jest-resolve/build/index.js:863:11)
      at Object.<anonymous> (app/__tests__/Heatmap.test.tsx:62:23)


Snapshot Summary
 ‚Ä∫ 2 snapshots obsolete from 2 test suites. To remove them all, run `npm test -- -u`.
   ‚Ü≥ app/lib/analysis.test.ts
       ‚Ä¢ optimizeParameters returns consistent results 1
   ‚Ü≥ app/lib/optimize.test.ts
       ‚Ä¢ optimizeParameters Correctness returns consistent parameters for known data 1

Test Suites: 33 failed, 1 skipped, 46 passed, 79 of 80 total
Tests:       40 failed, 15 skipped, 677 passed, 732 total
Snapshots:   2 obsolete, 2 passed, 2 total
Time:        27.303 s
Ran all test suites.
