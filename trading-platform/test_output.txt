
> trading-platform@0.1.0 test
> jest c:/gemini-desktop/Ult/trading-platform/app/lib/__tests__/PerformanceScreenerService.dual.test.ts

  console.warn
    [PerformanceScreener] Dual scan failed for TEST1: TypeError: _ConsensusSignalService.consensusSignalService.generateConsensus is not a function
        at PerformanceScreenerService.generateConsensus [as scanDual] (C:\gemini-desktop\Ult\trading-platform\app\lib\PerformanceScreenerService.ts:329:50)
        at Object.<anonymous> (C:\gemini-desktop\Ult\trading-platform\app\lib\__tests__\PerformanceScreenerService.dual.test.ts:64:24)

    [0m [90m 415 |[39m       } [36mcatch[39m (err) {
     [90m 416 |[39m         skipFetchError[33m++[39m[33m;[39m
    [31m[1m>[22m[39m[90m 417 |[39m         console[33m.[39mwarn([32m`[PerformanceScreener] Dual scan failed for ${ds.symbol}:`[39m[33m,[39m err)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 418 |[39m       }
     [90m 419 |[39m
     [90m 420 |[39m       [90m// ÁπùÔΩ¨ÁπùÔΩºÁπùÂåªŒúÁπùÊ∫ò„É£Áπù„Éª[39m[0m

      at PerformanceScreenerService.warn [as scanDual] (app/lib/PerformanceScreenerService.ts:417:17)
      at Object.<anonymous> (app/lib/__tests__/PerformanceScreenerService.dual.test.ts:64:24)

  console.warn
    [PerformanceScreener] Dual scan failed for LOW_CONF: TypeError: _ConsensusSignalService.consensusSignalService.generateConsensus is not a function
        at PerformanceScreenerService.generateConsensus [as scanDual] (C:\gemini-desktop\Ult\trading-platform\app\lib\PerformanceScreenerService.ts:329:50)
        at Object.<anonymous> (C:\gemini-desktop\Ult\trading-platform\app\lib\__tests__\PerformanceScreenerService.dual.test.ts:84:24)

    [0m [90m 415 |[39m       } [36mcatch[39m (err) {
     [90m 416 |[39m         skipFetchError[33m++[39m[33m;[39m
    [31m[1m>[22m[39m[90m 417 |[39m         console[33m.[39mwarn([32m`[PerformanceScreener] Dual scan failed for ${ds.symbol}:`[39m[33m,[39m err)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 418 |[39m       }
     [90m 419 |[39m
     [90m 420 |[39m       [90m// ÁπùÔΩ¨ÁπùÔΩºÁπùÂåªŒúÁπùÊ∫ò„É£Áπù„Éª[39m[0m

      at PerformanceScreenerService.warn [as scanDual] (app/lib/PerformanceScreenerService.ts:417:17)
      at Object.<anonymous> (app/lib/__tests__/PerformanceScreenerService.dual.test.ts:84:24)

  console.warn
    [PerformanceScreener] Dual scan failed for CACHE_TEST: TypeError: _ConsensusSignalService.consensusSignalService.generateConsensus is not a function
        at PerformanceScreenerService.generateConsensus [as scanDual] (C:\gemini-desktop\Ult\trading-platform\app\lib\PerformanceScreenerService.ts:329:50)
        at Object.<anonymous> (C:\gemini-desktop\Ult\trading-platform\app\lib\__tests__\PerformanceScreenerService.dual.test.ts:103:9)

    [0m [90m 415 |[39m       } [36mcatch[39m (err) {
     [90m 416 |[39m         skipFetchError[33m++[39m[33m;[39m
    [31m[1m>[22m[39m[90m 417 |[39m         console[33m.[39mwarn([32m`[PerformanceScreener] Dual scan failed for ${ds.symbol}:`[39m[33m,[39m err)[33m;[39m
     [90m     |[39m                 [31m[1m^[22m[39m
     [90m 418 |[39m       }
     [90m 419 |[39m
     [90m 420 |[39m       [90m// ÁπùÔΩ¨ÁπùÔΩºÁπùÂåªŒúÁπùÊ∫ò„É£Áπù„Éª[39m[0m

      at PerformanceScreenerService.warn [as scanDual] (app/lib/PerformanceScreenerService.ts:417:17)
      at Object.<anonymous> (app/lib/__tests__/PerformanceScreenerService.dual.test.ts:103:9)

FAIL app/lib/__tests__/PerformanceScreenerService.dual.test.ts
  Utils Test Utils Dummy
    Á´è„Éªshould pass (2 ms)
  PerformanceScreenerService - scanDual
    ÔæÉ„Éªshould return matches when criteria are met (77 ms)
    Á´è„Éªshould filter out low confidence stocks (5 ms)
    ÔæÉ„Éªshould cache results (5 ms)

  Á¨≥„ÉªPerformanceScreenerService - scanDual Á™∂ÔΩ∫ should return matches when criteria are met

    expect(received).toBe(expected) // Object.is equality

    Expected: 1
    Received: 0

      68 |         });
      69 |
    > 70 |         expect(result.dualMatches.length).toBe(1);
         |                                           ^
      71 |         expect(result.dualMatches[0].symbol).toBe('TEST1');
      72 |         expect(result.dualMatches[0].dualScore).toBeGreaterThan(0);
      73 |     });

      at Object.toBe (app/lib/__tests__/PerformanceScreenerService.dual.test.ts:70:43)

  Á¨≥„ÉªPerformanceScreenerService - scanDual Á™∂ÔΩ∫ should cache results

    expect(received).toBe(expected) // Object.is equality

    Expected: 1
    Received: 0

      110 |         // 2nd call should be much faster (instant)
      111 |         // But since mocks are already fast, checking logic coverage is enough.
    > 112 |         expect(result2.dualMatches.length).toBe(1);
          |                                            ^
      113 |     });
      114 | });
      115 |

      at Object.toBe (app/lib/__tests__/PerformanceScreenerService.dual.test.ts:112:44)

Test Suites: 1 failed, 1 total
Tests:       2 failed, 2 passed, 4 total
Snapshots:   0 total
Time:        1.453 s
Ran all test suites matching /c:\\gemini-desktop\\Ult\\trading-platform\\app\\lib\\__tests__\\PerformanceScreenerService.dual.test.ts/i.
