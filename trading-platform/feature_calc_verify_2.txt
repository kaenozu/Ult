PASS app/lib/services/__tests__/feature-calculation-service.test.ts
  Utils Test Utils Dummy
    √ should pass (2 ms)
  FeatureCalculationService
    calculateFeatures
      √ should calculate all features correctly (5 ms)
      √ should return valid numeric values for all features (3 ms)
      √ should calculate RSI correctly
      √ should calculate RSI change correctly
      √ should calculate SMA deviation correctly
      √ should calculate volume ratio correctly (1 ms)
      √ should calculate price momentum correctly (1 ms)
      √ should calculate MACD signal difference correctly (1 ms)
      √ should calculate Bollinger position correctly (1 ms)
      √ should calculate ATR percent correctly (1 ms)
    edge cases
      √ should handle empty indicator arrays (1 ms)
      √ should handle single data point (1 ms)
      √ should handle zero volume (1 ms)
      √ should handle zero price
      √ should handle NaN in indicators (1 ms)
      √ should handle very small prices (5 ms)
      √ should handle very large prices
      √ should handle zero SMA value (1 ms)
      √ should handle missing RSI values for change calculation
      √ should handle Bollinger bands at same level
    calculatePriceMomentum
      √ should calculate momentum for sufficient data (1 ms)
      √ should return zero for insufficient data (1 ms)
      √ should handle negative momentum
      √ should handle zero momentum (1 ms)
      √ should handle custom period
    volatility calculation
      √ should calculate volatility from price data
      √ should return zero volatility for constant prices (1 ms)
    integration scenarios
      √ should handle typical market data
      √ should handle bull market scenario (1 ms)
      √ should handle bear market scenario (1 ms)
      √ should handle high volume scenario (2 ms)
    calculateEnhancedFeatures
      √ should calculate both basic and enhanced features (1 ms)
      √ should return valid candlestick pattern features (1 ms)
      √ should return valid price trajectory features (1 ms)
      √ should return valid volume profile features (1 ms)
      √ should return valid volatility regime features (1 ms)
      √ should maintain backward compatibility with basic features (1 ms)
      √ should handle empty data gracefully
      √ should increase feature dimensionality significantly (1 ms)
    calculateFeaturesOptimized - TODO: implement method
      ○ skipped should produce same results as original implementation
      ○ skipped should handle TypedArray data efficiently
      ○ skipped should calculate momentum with zero-copy slicing
      ○ skipped should calculate volatility using iterators
      ○ skipped should calculate volume ratio efficiently

Test Suites: 1 passed, 1 total
Tests:       5 skipped, 40 passed, 45 total
Snapshots:   0 total
Time:        1.896 s
Ran all test suites matching /app\\lib\\services\\__tests__\\feature-calculation-service.test.ts/i.
