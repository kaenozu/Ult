# [SEC-002] 依存関係脆弱性のリアルタイム監視

## 概要

`npm audit`は週次実行ですが、新規脆弱性が公開された際の即時検知体制が必要です。依存関係の脆弱性をリアルタイムに監視し、迅速な対応を可能にする仕組みを構築します。

## 対応内容

1. **Dependabotアラートの有効化・設定**
   - GitHub Dependabotアラートの有効化
   - 自動PR作成の設定調整
   - セキュリティアップデートの自動化

2. **Snyk導入**
   - Snykアカウント設定
   - GitHubリポジトリ連携
   - PR時の自動脆弱性チェック
   - 重大脆弱性の自動Issue作成

3. **通知・ワークフロー統合**
   - 新規脆弱性検出時のSlack通知
   - 重大度に応じたエスカレーション
   - 脆弱性対応のSLA設定

## 受け入れ条件（Acceptance Criteria）

- [ ] Dependabotアラートが有効化され、脆弱性検出時に通知される
- [ ] Snykがリポジトリと連携し、PR時に自動スキャンされる
- [ ] Critical/High脆弱性検出時に自動的にIssueが作成される
- [ ] 脆弱性情報がSlackの専用チャンネルに通知される
- [ ] 週次の脆弱性レポートが自動生成される
- [ ] 過去30日間の新規脆弱性対応率が100%である

## 関連するレビュー発見事項

- `npm audit`は週次実行だが、新規脆弱性が公開された際の即時検知ができていない
- 依存関係の更新が手動で行われており、対応が遅れるリスクがある
- 脆弱性の重大度に応じた対応フローが未定義

## 想定工数

8時間

## 優先度

High

## 担当ロール

DevOps Engineer

## ラベル

`security`, `priority:high`, `dependencies`, `automation`

---

## 補足情報

### 脆弱性対応SLA案

| 重大度 | 対応期限 | 対応内容 |
|--------|----------|----------|
| Critical | 24時間以内 | 即座にパッチ適用または一時的な対策実施 |
| High | 7日以内 | パッチ適用または代替案の実施 |
| Medium | 30日以内 | 計画的な修正対応 |
| Low | 次回リリース時 | 通常の開発サイクルで対応 |

### 通知設定例

```yaml
# .github/dependabot.yml
version: 2
updates:
  - package-ecosystem: "npm"
    directory: "/"
    schedule:
      interval: "daily"
    open-pull-requests-limit: 10
    labels:
      - "dependencies"
      - "security"
```
