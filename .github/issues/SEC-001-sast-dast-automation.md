# [SEC-001] SAST/DAST自動スキャンの導入

## 概要

PR #469で修正した5件のCritical脆弱性は手動レビューで発見されました。継続的な自動検出体制を構築し、脆弱性を早期発見・早期修正する仕組みを導入します。

## 対応内容

1. **SAST（静的アプリケーションセキュリティテスト）**
   - SonarCloudまたはCodeQLの高度化設定
   - PR時の自動スキャン実行
   - セキュリティホットスポットの検出と通知

2. **DAST（動的アプリケーションセキュリティテスト）**
   - OWASP ZAPによる動的スキャン導入
   - ステージング環境での定期スキャン
   - スキャン結果のレポート自動生成

3. **通知・連携**
   - スキャン結果のSlack通知設定
   - 脆弱性検出時の自動Issue作成
   - ダッシュボードでの可視化

## 受け入れ条件（Acceptance Criteria）

- [ ] CodeQLまたはSonarCloudがPR時に自動実行される
- [ ] OWASP ZAPがステージング環境で週1回以上実行される
- [ ] Critical/High脆弱性検出時にSlack通知が送信される
- [ ] スキャン結果が一元管理ダッシュボードで確認できる
- [ ] セキュリティスコアがGitHubリポジトリに表示される
- [ ] 既存の5件のCritical脆弱性と同様の問題が自動検出できることを検証済み

## 関連するレビュー発見事項

- PR #469で5件のCritical脆弱性が手動レビューで発見
- `npm audit`は週次実行だが、リアルタイム検知ができていない
- コードレビューでのセキュリティチェックが属人化している

## 想定工数

16時間

## 優先度

High

## 担当ロール

DevSecOps Engineer

## ラベル

`security`, `priority:high`, `ci-cd`, `automation`

---

## 補足情報

### 推奨ツール比較

| ツール | タイプ | コスト | 統合性 | 備考 |
|--------|--------|--------|--------|------|
| CodeQL | SAST | 無料（公開リポジトリ） | GitHubネイティブ | GitHub Actions連携が容易 |
| SonarCloud | SAST | 無料（公開リポジトリ） | 高 | 包括的なコード品質分析 |
| OWASP ZAP | DAST | 無料 | 中 | オープンソース、カスタマイズ可能 |
| Snyk | SCA/SAST | 無料枠あり | 高 | 依存関係脆弱性も検出 |

### 実装ステップ

1. GitHub Actionsワークフローの作成
2. CodeQL/SonarCloudの設定
3. OWASP ZAPのセットアップ
4. Slack通知連携
5. ダッシュボード構築
