# Trader Pro ロードマップ

**作成日**: 2026-01-26
**バージョン**: 1.0.0
**ステータス**: アクティブ

---

## 📊 現状評価

| カテゴリ | スコア | 優先度 |
|----------|--------|--------|
| アーキテクチャ | 7/10 | - |
| コード品質 | 6/10 | P1 |
| セキュリティ | 4/10 | **P0** |
| パフォーマンス | 5/10 | **P1** |
| テストカバレッジ | 4/10 | P2 |
| UI/UX | 7/10 | P2 |

**総合評価**: 6.3/10

---

## 🎯 フェーズ1: 基盤強化（Week 1-2）

**総工数**: 6-7日

### 🔴 P0 - セキュリティ緊急対応

#### 1.1 APIキーの保護
- **ファイル**: `.env.local`, `lib/api/*.ts`
- **内容**:
  - `.env.local`を`.gitignore`に追加
  - サーバーサイドAPIルートの作成
  - `NEXT_PUBLIC_`プレフィックスの削除
  - APIキーの環境変数検証
- **完了基準**: APIキーがクライアントに露出しない
- **工数**: 2-3時間

### 🟡 P1 - バックエンド・UI対応

#### 1.2 WebSocket接続の修復
- **ファイル**: `lib/websocket.ts`, `hooks/useWebSocket.ts`
- **内容**:
  - バックエンドサーバー起動スクリプトの作成
  - WebSocket接続のリトライロジック実装
  - 接続失敗時のフォールバック処理
- **完了基準**: WebSocket接続が安定して確立される
- **工数**: 1日
- **優先度**: **P1** - リアルタイム機能に影響

#### 1.3 スクリーナーページのUI応答性改善
- **ファイル**: `app/screener/page.tsx`
- **内容**:
  - フィルターボタンのデバウンス処理追加
  - ボタンクリック時の即時フィードバック実装
  - ローディング状態の表示
- **完了基準**: すべてのフィルターボタンが即座に応答
- **工数**: 0.5日
- **優先度**: P1 - ユーザー体験に影響

#### 1.4 フォーム要素のアクセシビリティ改善
- **ファイル**: 全フォームコンポーネント
- **内容**:
  - 全フォーム要素にidまたはname属性を追加
  - aria-labelの導入検討
- **完了基準**: アクセシビリティ警告が0になる
- **工数**: 0.5日
- **優先度**: P2

### 🟢 P1 - コード品質改善

#### 1.5 型定義の改善
- **ファイル**: `lib/api/*.ts`, `types/index.ts`
- **内容**:
  - `Unknown`型の削除
  - APIレスポンス型の厳格化
  - 共通型定義の集約
- **完了基準**: `any`/`unknown`型が0になる
- **工数**: 1日

#### 1.6 エラーハンドリングの統一
- **ファイル**: 全体
- **内容**:
  - 共通エラーハンドラーの作成
  - ユーザー向けエラーメッセージの標準化
  - エラー監視（Sentry等）の導入検討
- **完了基準**: 全API呼び出しが統一されたエラーハンドリングを使用
- **工数**: 1日

---

## 🚀 フェーズ2: 機能拡張（Week 3-6）

### 2.1 AI予測の深化（Forecast Master）

#### Prediction Clouds
- **説明**: ATRに基づいた価格変動幅の可視化
- **実装内容**:
  - ATR計算ロジックの実装
  - 予測範囲のチャート表示
  - 信頼区間の色分け
- **工数**: 3-4日

#### 的中率の動的算出
- **説明**: 過去5年間のデータから予測精度をリアルタイム表示
- **実装内容**:
  - ヒストリカルデータの分析
  - 的中率計算エンジン
  - ダッシュボードへの表示
- **工数**: 4-5日

#### バックテストの高速化
- **説明**: O(N)で最適化されたシミュレーションエンジン
- **実装内容**:
  - 現行アルゴリズムのプロファイリング
  - 最適化済みバックテストエンジンの実装
  - パフォーマンス検証
- **工数**: 5-7日

### 2.2 市場相関分析（Unified Intelligence）

#### Market Sync
- **説明**: 日経225、S&P500との相関分析
- **実装内容**:
  - 指数データの取得
  - 相関係数計算
  - 相関ダッシュボード
- **工数**: 3-4日

#### ベータ値の活用
- **説明**: 市場感応度をシグナル判定に統合
- **実装内容**:
  - ベータ値計算
  - シグナルアルゴリズムの更新
- **工数**: 2-3日

#### 複合アラート
- **説明**: 市場+個別銘柄の統合シグナル
- **実装内容**:
  - 複合条件ロジック
  - アラート通知システム
- **工数**: 2-3日

### 2.3 需給の壁の精度向上（Supply/Demand Master）

#### 動的レジサポ表示
- **説明**: 出来高ベースの抵抗/支持帯の可視化
- **実装内容**:
  - 価格帯別出来高分析
  - レジサボラインの自動描画
- **工数**: 3-4日

#### ブレイクアウト検知
- **説明**: 出来高を伴う壁の突破を通知
- **実装内容**:
  - ブレイクアウト検出ロジック
  - 即時通知システム
- **工数**: 2-3日

---

## 🛠️ フェーズ3: リファクタリング（Week 7-8）

### 🟢 P2 - コード改善

#### 3.1 重複コード削除
- **対象**: APIクライアント
- **内容**:
  - 共通APIクライアントの抽出
  - DRY原則の適用
- **工数**: 2-3日

#### 3.2 メモリリーク防止
- **対象**: `useStockData.ts` 他
- **内容**:
  - cleanup関数の実装
  - useEffectの依存配列の修正
- **工数**: 1-2日

---

## 📝 フェーズ4: 高度な機能（Week 9-12）

### 4.1 AIトレード・アドバイザー

#### 勝ちパターンの抽出
- **説明**: ジャーナルデータの自動分析
- **実装内容**:
  - ジャーナル保存機能
  - パターン認識エンジン
  - 統計レポート
- **工数**: 5-7日

#### 心理的バイアス警告
- **説明**: 無謀なエントリーの警告
- **実装内容**:
  - 連敗検出ロジック
  - リスク管理チェック
  - 警告UI
- **工数**: 3-4日

### 4.2 ユニバース管理

#### 100銘柄の自動メンテ
- **説明**: 日米主力銘柄の定期更新
- **実装内容**:
  - 銘柄マスターデータの構築
  - 定期更新バッチ
- **工数**: 2-3日

#### オンデマンド拡張
- **説明**: 未知のシンボルの自動追加
- **実装内容**:
  - シンボル検証API
  - 自動登録フロー
- **工数**: 2-3日

---

## 🧪 フェーズ5: テスト強化（Week 13-14）

### 5.1 テストカバレッジ向上
- **目標**: 25% → 80%以上
- **内容**:
  - ユニットテスト追加
  - 統合テスト追加
  - E2Eテスト導入
- **工数**: 10日

### 5.2 CI/CD連携
- **内容**:
  - GitHub Actionsの強化
  - 自動テスト実行
  - カバレッジレポート
- **工数**: 3日

---

## 📅 タイムラインまとめ

| フェーズ | 期間 | 主な作業 |
|----------|------|----------|
| フェーズ1 | Week 1-2 | セキュリティ対応、コード品質改善 |
| フェーズ2 | Week 3-6 | AI予測深化、市場相関分析、需給精度向上 |
| フェーズ3 | Week 7-8 | リファクタリング |
| フェーズ4 | Week 9-12 | AIアドバイザー、ユニバース管理 |
| フェーズ5 | Week 13-14 | テスト強化、CI/CD |

---

## 🎯 成功指標（KPI）

| 指標 | 現状 | 目標 |
|------|------|------|
| 総合評価 | 6.3/10 | 8.5/10 |
| セキュリティ | 4/10 | 9/10 |
| パフォーマンス | 5/10 | 8/10 |
| テストカバレッジ | 25% | 80% |
| リードタイム | - | 改善 |
| WebSocket接続安定性 | 失敗 | 99%+ |

---

## 🔄 更新履歴

| 日付 | バージョン | 変更内容 |
|------|-----------|----------|
| 2026-01-26 | 1.1.0 | モンキーテスト結果を反映: WebSocket接続、UI応答性、アクセシビリティの課題を追加 |
| 2026-01-26 | 1.0.0 | 初版作成 |
