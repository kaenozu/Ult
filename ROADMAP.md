# ULT Trading Platform ロードマップ

**最終更新**: 2026-02-13  
**バージョン**: 2.0.0  
**ステータス**: 継続開発中

---

## 現在の状況

| カテゴリ | スコア | 状態 |
|---------|--------|------|
| TypeScript型安全性 | 6.5/10 | 要改善 |
| セキュリティ | 8.5/10 | 良好 |
| パフォーマンス | 5.5/10 | 要改善 |
| コード品質 | 5.5/10 | 要改善 |
| **総合** | **6.5/10** | 改善中 |

---

## Phase 1: 品質基盤強化（今週〜2週間）

### P0: 緊急対応

#### 1.1 ESLint警告の大幅削減
- **現状**: 949件の警告
- **目標**: 300件以下
- **対象**:
  - 未使用インポート/変数（約400件）
  - React Hook依存配列（約20件）
- **予定工数**: 1日

#### 1.2 O(N²)アルゴリズムの修正
- **対象ファイル**:
  - `AdvancedBacktestEngine.ts:248`
  - `calculations.ts:141`
- **内容**: スライス操作を累積計算に変更
- **予定工数**: 半日

### P1: 重要改善

#### 1.3 TypeScript `any`型削減
- **現状**: 主要ファイルでany型使用
- **対象**:
  - `RealisticBacktestEngine.ts`
  - `data-aggregator.ts`
  - `usePerformanceMonitor.ts`
- **目標**: Critical箇所のany型を0に
- **予定工数**: 2日

---

## Phase 2: 機能拡張（2週間〜1ヶ月）

### 2.1 ポートフォリオ分析ダッシュボード

損益計算機能が実装されたので、次は可視化と高度な分析指標：

- **シャープレシオ・ソルティノレシオ**: リスク調整後リターンの計算と表示
- **資産配分チャート**: ドーナツ/円グラフでの可視化
- **ドローダウン分析**: 最大ドローダウン、回復期間の計算
- **月次/年次パフォーマンス**: ヒートマップ表示
- **予定工数**: 3-4日

### 2.2 アラート・通知システム

- **シグナル発生時の通知**: sonner（既存）を活用
- **価格アラート**: 目標値到達時のプッシュ通知
- **リスクアラート**: 損失閾値超過時の警告
- **予定工数**: 2-3日

### 2.3 現実的なバックテストの強化

- **取引コストシミュレーション**: 手数料、スリッページ
- **市場インパクト**: 大口注文の価格影響
- **ウォークフォワード分析**: 期間ごとのロバスト性検証
- **予定工数**: 3-4日

---

## Phase 3: アーキテクチャ改善（1ヶ月〜2ヶ月）

### 3.1 重複コードの統合

- **対象**:
  - `domains/backtest/engine/` と `lib/backtest/`
  - 計算ロジックの共通化
- **内容**: DRY原則の適用、共通ユーティリティ作成
- **予定工数**: 3-5日

### 3.2 パフォーマンス監視の本番統合

- **継続的パフォーマンス計測**
- **ボトルネックの自動検出**
- **メモリ使用量の監視**
- **予定工数**: 2-3日

### 3.3 エラーハンドリングの統一

- **統一エラークラス**: AppError, ApiError, ValidationError
- **エラーログ収集**: 構造化ログ
- **ユーザー向けメッセージ**: 標準化
- **予定工数**: 2日

---

## Phase 4: 高度な機能（2ヶ月〜3ヶ月）

### 4.1 AI予測モデルの精度向上

- **自動再学習パイプライン**: モデルドリフト検出後の自動更新
- **アンサンブルモデルの改良**: 重みの動的最適化
- **特徴量エンジニアリング**: 新しいテクニカル指標の追加
- **予定工数**: 5-7日

### 4.2 市場相関分析

- **日経225・S&P500との相関**: 相関係数の計算と表示
- **ベータ値の活用**: 市場感応度をシグナル判定に統合
- **セクター分析**: 業種別パフォーマンス比較
- **予定工数**: 3-4日

### 4.3 モバイル最適化

- **PWA対応**: オフライン表示、ホーム画面追加
- **タッチUI最適化**: モバイルでの操作性向上
- **レスポンシブ改善**: 小画面でのレイアウト調整
- **予定工数**: 3-4日

---

## 完了済み機能

### 2026-02-13時点

- ✅ 取引履歴の永続化（IndexedDB）
- ✅ 損益計算と勝率算出
- ✅ AIドリフト検出と自動スクリーナー
- ✅ パフォーマンス計測の導入
- ✅ セキュリティ強化（入力検証、JWT認証）
- ✅ 共有計算関数のリファクタリング（ATR、SMA、ボラティリティ）

---

## 改善目標

### 3ヶ月後

| 指標 | 現在 | 目標 |
|------|------|------|
| TypeScriptスコア | 6.5 | 7.5 |
| パフォーマンススコア | 5.5 | 7.0 |
| コード品質スコア | 5.5 | 7.0 |
| ESLint警告 | 949 | 300 |
| テストカバレッジ | 45% | 70% |

### 6ヶ月後

| 指標 | 現在 | 目標 |
|------|------|------|
| TypeScriptスコア | 6.5 | 8.5 |
| パフォーマンススコア | 5.5 | 8.5 |
| コード品質スコア | 5.5 | 8.0 |
| ESLint警告 | 949 | 100 |
| テストカバレッジ | 45% | 80% |

---

## 削除済み項目

以下の項目はプロジェクトの方向性変更により削除：

- ~~WebSocketリアルタイムデータ接続~~ → APIポーリングで十分
- ~~バックエンドPython統合~~ → フロントエンド集中

---

## 関連ドキュメント

- [REVIEW_REPORT_CURRENT.md](./REVIEW_REPORT_CURRENT.md) - 最新のコードレビュー結果
- [REFACTORING_ROADMAP_TRACKING.md](./REFACTORING_ROADMAP_TRACKING.md) - リファクタリング詳細計画
- [SECURITY.md](./SECURITY.md) - セキュリティガイドライン
- [CONTRIBUTING.md](./CONTRIBUTING.md) - 開発ガイドライン
